var content=function(){"use strict";var Qf=Object.defineProperty;var Zf=($e,te,O)=>te in $e?Qf($e,te,{enumerable:!0,configurable:!0,writable:!0,value:O}):$e[te]=O;var u=($e,te,O)=>Zf($e,typeof te!="symbol"?te+"":te,O);var Ll,kl;function $e(i){return i}const O=(kl=(Ll=globalThis.browser)==null?void 0:Ll.runtime)!=null&&kl.id?globalThis.browser:globalThis.chrome;var Gt=(i=>(i[i.A1=1]="A1",i[i.A2=2]="A2",i[i.B1=3]="B1",i[i.B2=4]="B2",i[i.C1=5]="C1",i[i.C2=6]="C2",i))(Gt||{}),Te=(i=>(i.DEFAULT="default",i.SUBTLE="subtle",i.BOLD="bold",i.ITALIC="italic",i.UNDERLINED="underlined",i.HIGHLIGHTED="highlighted",i.DOTTED="dotted",i.LEARNING="learning",i.CUSTOM="custom",i))(Te||{}),ui=(i=>(i.AUTOMATIC="automatic",i.MANUAL="manual",i))(ui||{}),ee=(i=>(i[i.VISIBLE=0]="VISIBLE",i[i.LEARNING=1]="LEARNING",i[i.HIDDEN=2]="HIDDEN",i))(ee||{}),Us=(i=>(i.BEFORE="before",i.AFTER="after",i))(Us||{}),Bi=(i=>(i.WORD="word",i.PARAGRAPH="paragraph",i))(Bi||{}),Mr=(i=>(i.HOVER="hover",i.CLICK="click",i))(Mr||{}),Dr=(i=>(i.AUTO="auto",i.BUTTON="button",i.SWIPE="swipe",i))(Dr||{}),It=(i=>(i.OpenAI="OpenAI",i.DeepSeek="DeepSeek",i.SiliconFlow="SiliconFlow",i.GoogleGemini="GoogleGemini",i.ProxyGemini="ProxyGemini",i))(It||{});const Or={apiKey:"YXBpLTEyMzQ1Ng==",apiEndpoint:"https://side-translation.planktonfly.com/v1/chat/completions",model:"gemini-3-flash-preview",temperature:parseFloat("0.2")||0,enable_thinking:!1,includeThinkingParam:!1,customParams:"",phraseEnabled:!0,requestsPerSecond:0,useBackgroundProxy:!1},Nl={nativeLanguage:"zh",targetLanguage:"en"},Fr={enabled:!0,modifierKeys:[],description:"快捷键"},$s={enabled:!0,position:50,opacity:.8},Rl={enabled:!0,preloadDistance:1},Ml={enabled:!0,apiEndpoint:"https://side-translation.planktonfly.com/wordcard",selectCaptureMode:!0,dbClickCaptureMode:!1,singleClickCaptureMode:!1,showExplainIcon:!1,autoSpeak:!0,showEnglishDefinition:!0};function Dl(){return{id:"default-config",name:"defaultConfig",provider:"openai",config:Or,isDefault:!0,createdAt:Date.now(),updatedAt:Date.now()}}const Z={userLevel:Gt.B1,replacementRate:.3,isEnabled:!0,useGptApi:!0,apiConfigs:[Dl()],activeApiConfigId:"default-config",translationStyle:Te.DEFAULT,translationMode:Bi.WORD,triggerMode:ui.MANUAL,maxLength:2e3,minLength:80,originalWordDisplayMode:ee.VISIBLE,enablePronunciationTooltip:!0,multilingualConfig:Nl,pronunciationHotkey:Fr,floatingBall:$s,translationPosition:Us.AFTER,showParentheses:!0,apiRequestTimeout:0,customTranslationCSS:"",lazyLoading:Rl,ttsProvider:"google",pronunciationTriggerMode:Mr.CLICK,translationTriggerMode:Dr.AUTO,showDebugPanel:!0,enableFullTextTTSBar:!0,enableWordLevelAnimation:!0,fullTextTTSBarCollapsed:!0,fullTextTTSConfigs:[{id:"default-tts-config",name:"Google Cloud TTS",config:{apiEndpoint:"https://texttospeech.googleapis.com/v1beta1/text:synthesize",apiKey:"AIzaSyCJV_CLwIhqiRI-5DobQZ7_YCc9i235m1Y",customParams:""},createdAt:Date.now(),updatedAt:Date.now()}],activeFullTextTTSConfigId:"default-tts-config",fullTextTTSVoiceName:"en-US-Chirp3-HD-Erinome",wordCard:Ml,paragraphTTS:{enabled:!0},gestureTranslation:{leftSwipe:!0,rightSwipe:!0},disableSystemSelectionBanner:!1};/*!
  * shared v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Ol(i,t){typeof console<"u"&&(console.warn("[intlify] "+i),t&&console.warn(t.stack))}const Wi=typeof window<"u",ie=(i,t=!1)=>t?Symbol.for(i):Symbol(i),Fl=(i,t,e)=>Ul({l:i,k:t,s:e}),Ul=i=>JSON.stringify(i).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Q=i=>typeof i=="number"&&isFinite(i),$l=i=>Bs(i)==="[object Date]",zi=i=>Bs(i)==="[object RegExp]",Gi=i=>M(i)&&Object.keys(i).length===0,et=Object.assign,Hl=Object.create,$=(i=null)=>Hl(i);let Ur;const Hs=()=>Ur||(Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:$());function $r(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Hr(i){return i.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Bl(i){return i=i.replace(/(\w+)\s*=\s*"([^"]*)"/g,(s,n,r)=>`${n}="${Hr(r)}"`),i=i.replace(/(\w+)\s*=\s*'([^']*)'/g,(s,n,r)=>`${n}='${Hr(r)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(i)&&(i=i.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(s=>{i=i.replace(s,"$1javascript&#58;")}),i}const Wl=Object.prototype.hasOwnProperty;function Lt(i,t){return Wl.call(i,t)}const Y=Array.isArray,G=i=>typeof i=="function",k=i=>typeof i=="string",j=i=>typeof i=="boolean",D=i=>i!==null&&typeof i=="object",zl=i=>D(i)&&G(i.then)&&G(i.catch),Br=Object.prototype.toString,Bs=i=>Br.call(i),M=i=>Bs(i)==="[object Object]",Gl=i=>i==null?"":Y(i)||M(i)&&i.toString===Br?JSON.stringify(i,null,2):String(i);function Ws(i,t=""){return i.reduce((e,s,n)=>n===0?e+s:e+t+s,"")}const ji=i=>!D(i)||Y(i);function Vi(i,t){if(ji(i)||ji(t))throw new Error("Invalid value");const e=[{src:i,des:t}];for(;e.length;){const{src:s,des:n}=e.pop();Object.keys(s).forEach(r=>{r!=="__proto__"&&(D(s[r])&&!D(n[r])&&(n[r]=Array.isArray(s[r])?[]:$()),ji(n[r])||ji(s[r])?n[r]=s[r]:e.push({src:s[r],des:n[r]}))})}}/*!
  * message-compiler v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function jl(i,t,e){return{line:i,column:t,offset:e}}function zs(i,t,e){return{start:i,end:t}}const F={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},Vl=17;function qi(i,t,e={}){const{domain:s,messages:n,args:r}=e,a=i,o=new SyntaxError(String(a));return o.code=i,t&&(o.location=t),o.domain=s,o}function ql(i){throw i}const jt=" ",Yl="\r",ot=`
`,Kl="\u2028",Jl="\u2029";function Xl(i){const t=i;let e=0,s=1,n=1,r=0;const a=x=>t[x]===Yl&&t[x+1]===ot,o=x=>t[x]===ot,l=x=>t[x]===Jl,c=x=>t[x]===Kl,d=x=>a(x)||o(x)||l(x)||c(x),h=()=>e,g=()=>s,m=()=>n,y=()=>r,C=x=>a(x)||l(x)||c(x)?ot:t[x],L=()=>C(e),b=()=>C(e+r);function v(){return r=0,d(e)&&(s++,n=0),a(e)&&e++,e++,n++,t[e]}function P(){return a(e+r)&&r++,r++,t[e+r]}function S(){e=0,s=1,n=1,r=0}function A(x=0){r=x}function I(){const x=e+r;for(;x!==e;)v();r=0}return{index:h,line:g,column:m,peekOffset:y,charAt:C,currentChar:L,currentPeek:b,next:v,peek:P,reset:S,resetPeek:A,skipToPeek:I}}const se=void 0,Ql=".",Wr="'",Zl="tokenizer";function tc(i,t={}){const e=t.location!==!1,s=Xl(i),n=()=>s.index(),r=()=>jl(s.line(),s.column(),s.index()),a=r(),o=n(),l={currentType:13,offset:o,startLoc:a,endLoc:a,lastType:13,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:d}=t;function h(p,f,T,..._){const J=c();if(f.column+=T,f.offset+=T,d){const R=e?zs(J.startLoc,f):null,w=qi(p,R,{domain:Zl,args:_});d(w)}}function g(p,f,T){p.endLoc=r(),p.currentType=f;const _={type:f};return e&&(_.loc=zs(p.startLoc,p.endLoc)),T!=null&&(_.value=T),_}const m=p=>g(p,13);function y(p,f){return p.currentChar()===f?(p.next(),f):(h(F.EXPECTED_TOKEN,r(),0,f),"")}function C(p){let f="";for(;p.currentPeek()===jt||p.currentPeek()===ot;)f+=p.currentPeek(),p.peek();return f}function L(p){const f=C(p);return p.skipToPeek(),f}function b(p){if(p===se)return!1;const f=p.charCodeAt(0);return f>=97&&f<=122||f>=65&&f<=90||f===95}function v(p){if(p===se)return!1;const f=p.charCodeAt(0);return f>=48&&f<=57}function P(p,f){const{currentType:T}=f;if(T!==2)return!1;C(p);const _=b(p.currentPeek());return p.resetPeek(),_}function S(p,f){const{currentType:T}=f;if(T!==2)return!1;C(p);const _=p.currentPeek()==="-"?p.peek():p.currentPeek(),J=v(_);return p.resetPeek(),J}function A(p,f){const{currentType:T}=f;if(T!==2)return!1;C(p);const _=p.currentPeek()===Wr;return p.resetPeek(),_}function I(p,f){const{currentType:T}=f;if(T!==7)return!1;C(p);const _=p.currentPeek()===".";return p.resetPeek(),_}function x(p,f){const{currentType:T}=f;if(T!==8)return!1;C(p);const _=b(p.currentPeek());return p.resetPeek(),_}function V(p,f){const{currentType:T}=f;if(!(T===7||T===11))return!1;C(p);const _=p.currentPeek()===":";return p.resetPeek(),_}function z(p,f){const{currentType:T}=f;if(T!==9)return!1;const _=()=>{const R=p.currentPeek();return R==="{"?b(p.peek()):R==="@"||R==="|"||R===":"||R==="."||R===jt||!R?!1:R===ot?(p.peek(),_()):Bt(p,!1)},J=_();return p.resetPeek(),J}function yt(p){C(p);const f=p.currentPeek()==="|";return p.resetPeek(),f}function Bt(p,f=!0){const T=(J=!1,R="")=>{const w=p.currentPeek();return w==="{"||w==="@"||!w?J:w==="|"?!(R===jt||R===ot):w===jt?(p.peek(),T(!0,jt)):w===ot?(p.peek(),T(!0,ot)):!0},_=T();return f&&p.resetPeek(),_}function K(p,f){const T=p.currentChar();return T===se?se:f(T)?(p.next(),T):null}function ai(p){const f=p.charCodeAt(0);return f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||f===95||f===36}function wr(p){return K(p,ai)}function vr(p){const f=p.charCodeAt(0);return f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||f===95||f===36||f===45}function yr(p){return K(p,vr)}function Tr(p){const f=p.charCodeAt(0);return f>=48&&f<=57}function Er(p){return K(p,Tr)}function Zt(p){const f=p.charCodeAt(0);return f>=48&&f<=57||f>=65&&f<=70||f>=97&&f<=102}function Ms(p){return K(p,Zt)}function Ds(p){let f="",T="";for(;f=Er(p);)T+=f;return T}function Cr(p){let f="";for(;;){const T=p.currentChar();if(T==="{"||T==="}"||T==="@"||T==="|"||!T)break;if(T===jt||T===ot)if(Bt(p))f+=T,p.next();else{if(yt(p))break;f+=T,p.next()}else f+=T,p.next()}return f}function xr(p){L(p);let f="",T="";for(;f=yr(p);)T+=f;return p.currentChar()===se&&h(F.UNTERMINATED_CLOSING_BRACE,r(),0),T}function Pr(p){L(p);let f="";return p.currentChar()==="-"?(p.next(),f+=`-${Ds(p)}`):f+=Ds(p),p.currentChar()===se&&h(F.UNTERMINATED_CLOSING_BRACE,r(),0),f}function _l(p){return p!==Wr&&p!==ot}function Ar(p){L(p),y(p,"'");let f="",T="";for(;f=K(p,_l);)f==="\\"?T+=Ir(p):T+=f;const _=p.currentChar();return _===ot||_===se?(h(F.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),_===ot&&(p.next(),y(p,"'")),T):(y(p,"'"),T)}function Ir(p){const f=p.currentChar();switch(f){case"\\":case"'":return p.next(),`\\${f}`;case"u":return Os(p,f,4);case"U":return Os(p,f,6);default:return h(F.UNKNOWN_ESCAPE_SEQUENCE,r(),0,f),""}}function Os(p,f,T){y(p,f);let _="";for(let J=0;J<T;J++){const R=Ms(p);if(!R){h(F.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${f}${_}${p.currentChar()}`);break}_+=R}return`\\${f}${_}`}function Lr(p){return p!=="{"&&p!=="}"&&p!==jt&&p!==ot}function kr(p){L(p);let f="",T="";for(;f=K(p,Lr);)T+=f;return T}function _r(p){let f="",T="";for(;f=wr(p);)T+=f;return T}function Nr(p){const f=T=>{const _=p.currentChar();return _==="{"||_==="@"||_==="|"||_==="("||_===")"||!_||_===jt?T:(T+=_,p.next(),f(T))};return f("")}function $i(p){L(p);const f=y(p,"|");return L(p),f}function oi(p,f){let T=null;switch(p.currentChar()){case"{":return f.braceNest>=1&&h(F.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),p.next(),T=g(f,2,"{"),L(p),f.braceNest++,T;case"}":return f.braceNest>0&&f.currentType===2&&h(F.EMPTY_PLACEHOLDER,r(),0),p.next(),T=g(f,3,"}"),f.braceNest--,f.braceNest>0&&L(p),f.inLinked&&f.braceNest===0&&(f.inLinked=!1),T;case"@":return f.braceNest>0&&h(F.UNTERMINATED_CLOSING_BRACE,r(),0),T=li(p,f)||m(f),f.braceNest=0,T;default:{let J=!0,R=!0,w=!0;if(yt(p))return f.braceNest>0&&h(F.UNTERMINATED_CLOSING_BRACE,r(),0),T=g(f,1,$i(p)),f.braceNest=0,f.inLinked=!1,T;if(f.braceNest>0&&(f.currentType===4||f.currentType===5||f.currentType===6))return h(F.UNTERMINATED_CLOSING_BRACE,r(),0),f.braceNest=0,Hi(p,f);if(J=P(p,f))return T=g(f,4,xr(p)),L(p),T;if(R=S(p,f))return T=g(f,5,Pr(p)),L(p),T;if(w=A(p,f))return T=g(f,6,Ar(p)),L(p),T;if(!J&&!R&&!w)return T=g(f,12,kr(p)),h(F.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,T.value),L(p),T;break}}return T}function li(p,f){const{currentType:T}=f;let _=null;const J=p.currentChar();switch((T===7||T===8||T===11||T===9)&&(J===ot||J===jt)&&h(F.INVALID_LINKED_FORMAT,r(),0),J){case"@":return p.next(),_=g(f,7,"@"),f.inLinked=!0,_;case".":return L(p),p.next(),g(f,8,".");case":":return L(p),p.next(),g(f,9,":");default:return yt(p)?(_=g(f,1,$i(p)),f.braceNest=0,f.inLinked=!1,_):I(p,f)||V(p,f)?(L(p),li(p,f)):x(p,f)?(L(p),g(f,11,_r(p))):z(p,f)?(L(p),J==="{"?oi(p,f)||_:g(f,10,Nr(p))):(T===7&&h(F.INVALID_LINKED_FORMAT,r(),0),f.braceNest=0,f.inLinked=!1,Hi(p,f))}}function Hi(p,f){let T={type:13};if(f.braceNest>0)return oi(p,f)||m(f);if(f.inLinked)return li(p,f)||m(f);switch(p.currentChar()){case"{":return oi(p,f)||m(f);case"}":return h(F.UNBALANCED_CLOSING_BRACE,r(),0),p.next(),g(f,3,"}");case"@":return li(p,f)||m(f);default:{if(yt(p))return T=g(f,1,$i(p)),f.braceNest=0,f.inLinked=!1,T;if(Bt(p))return g(f,0,Cr(p));break}}return T}function Rr(){const{currentType:p,offset:f,startLoc:T,endLoc:_}=l;return l.lastType=p,l.lastOffset=f,l.lastStartLoc=T,l.lastEndLoc=_,l.offset=n(),l.startLoc=r(),s.currentChar()===se?g(l,13):Hi(s,l)}return{nextToken:Rr,currentOffset:n,currentPosition:r,context:c}}const ec="parser",ic=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function sc(i,t,e){switch(i){case"\\\\":return"\\";case"\\'":return"'";default:{const s=parseInt(t||e,16);return s<=55295||s>=57344?String.fromCodePoint(s):"�"}}}function nc(i={}){const t=i.location!==!1,{onError:e}=i;function s(b,v,P,S,...A){const I=b.currentPosition();if(I.offset+=S,I.column+=S,e){const x=t?zs(P,I):null,V=qi(v,x,{domain:ec,args:A});e(V)}}function n(b,v,P){const S={type:b};return t&&(S.start=v,S.end=v,S.loc={start:P,end:P}),S}function r(b,v,P,S){t&&(b.end=v,b.loc&&(b.loc.end=P))}function a(b,v){const P=b.context(),S=n(3,P.offset,P.startLoc);return S.value=v,r(S,b.currentOffset(),b.currentPosition()),S}function o(b,v){const P=b.context(),{lastOffset:S,lastStartLoc:A}=P,I=n(5,S,A);return I.index=parseInt(v,10),b.nextToken(),r(I,b.currentOffset(),b.currentPosition()),I}function l(b,v){const P=b.context(),{lastOffset:S,lastStartLoc:A}=P,I=n(4,S,A);return I.key=v,b.nextToken(),r(I,b.currentOffset(),b.currentPosition()),I}function c(b,v){const P=b.context(),{lastOffset:S,lastStartLoc:A}=P,I=n(9,S,A);return I.value=v.replace(ic,sc),b.nextToken(),r(I,b.currentOffset(),b.currentPosition()),I}function d(b){const v=b.nextToken(),P=b.context(),{lastOffset:S,lastStartLoc:A}=P,I=n(8,S,A);return v.type!==11?(s(b,F.UNEXPECTED_EMPTY_LINKED_MODIFIER,P.lastStartLoc,0),I.value="",r(I,S,A),{nextConsumeToken:v,node:I}):(v.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,P.lastStartLoc,0,Wt(v)),I.value=v.value||"",r(I,b.currentOffset(),b.currentPosition()),{node:I})}function h(b,v){const P=b.context(),S=n(7,P.offset,P.startLoc);return S.value=v,r(S,b.currentOffset(),b.currentPosition()),S}function g(b){const v=b.context(),P=n(6,v.offset,v.startLoc);let S=b.nextToken();if(S.type===8){const A=d(b);P.modifier=A.node,S=A.nextConsumeToken||b.nextToken()}switch(S.type!==9&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(S)),S=b.nextToken(),S.type===2&&(S=b.nextToken()),S.type){case 10:S.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(S)),P.key=h(b,S.value||"");break;case 4:S.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(S)),P.key=l(b,S.value||"");break;case 5:S.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(S)),P.key=o(b,S.value||"");break;case 6:S.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(S)),P.key=c(b,S.value||"");break;default:{s(b,F.UNEXPECTED_EMPTY_LINKED_KEY,v.lastStartLoc,0);const A=b.context(),I=n(7,A.offset,A.startLoc);return I.value="",r(I,A.offset,A.startLoc),P.key=I,r(P,A.offset,A.startLoc),{nextConsumeToken:S,node:P}}}return r(P,b.currentOffset(),b.currentPosition()),{node:P}}function m(b){const v=b.context(),P=v.currentType===1?b.currentOffset():v.offset,S=v.currentType===1?v.endLoc:v.startLoc,A=n(2,P,S);A.items=[];let I=null;do{const z=I||b.nextToken();switch(I=null,z.type){case 0:z.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(z)),A.items.push(a(b,z.value||""));break;case 5:z.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(z)),A.items.push(o(b,z.value||""));break;case 4:z.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(z)),A.items.push(l(b,z.value||""));break;case 6:z.value==null&&s(b,F.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Wt(z)),A.items.push(c(b,z.value||""));break;case 7:{const yt=g(b);A.items.push(yt.node),I=yt.nextConsumeToken||null;break}}}while(v.currentType!==13&&v.currentType!==1);const x=v.currentType===1?v.lastOffset:b.currentOffset(),V=v.currentType===1?v.lastEndLoc:b.currentPosition();return r(A,x,V),A}function y(b,v,P,S){const A=b.context();let I=S.items.length===0;const x=n(1,v,P);x.cases=[],x.cases.push(S);do{const V=m(b);I||(I=V.items.length===0),x.cases.push(V)}while(A.currentType!==13);return I&&s(b,F.MUST_HAVE_MESSAGES_IN_PLURAL,P,0),r(x,b.currentOffset(),b.currentPosition()),x}function C(b){const v=b.context(),{offset:P,startLoc:S}=v,A=m(b);return v.currentType===13?A:y(b,P,S,A)}function L(b){const v=tc(b,et({},i)),P=v.context(),S=n(0,P.offset,P.startLoc);return t&&S.loc&&(S.loc.source=b),S.body=C(v),i.onCacheKey&&(S.cacheKey=i.onCacheKey(b)),P.currentType!==13&&s(v,F.UNEXPECTED_LEXICAL_ANALYSIS,P.lastStartLoc,0,b[P.offset]||""),r(S,v.currentOffset(),v.currentPosition()),S}return{parse:L}}function Wt(i){if(i.type===13)return"EOF";const t=(i.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function rc(i,t={}){const e={ast:i,helpers:new Set};return{context:()=>e,helper:r=>(e.helpers.add(r),r)}}function zr(i,t){for(let e=0;e<i.length;e++)Gs(i[e],t)}function Gs(i,t){switch(i.type){case 1:zr(i.cases,t),t.helper("plural");break;case 2:zr(i.items,t);break;case 6:{Gs(i.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function ac(i,t={}){const e=rc(i);e.helper("normalize"),i.body&&Gs(i.body,e);const s=e.context();i.helpers=Array.from(s.helpers)}function oc(i){const t=i.body;return t.type===2?Gr(t):t.cases.forEach(e=>Gr(e)),i}function Gr(i){if(i.items.length===1){const t=i.items[0];(t.type===3||t.type===9)&&(i.static=t.value,delete t.value)}else{const t=[];for(let e=0;e<i.items.length;e++){const s=i.items[e];if(!(s.type===3||s.type===9)||s.value==null)break;t.push(s.value)}if(t.length===i.items.length){i.static=Ws(t);for(let e=0;e<i.items.length;e++){const s=i.items[e];(s.type===3||s.type===9)&&delete s.value}}}}function He(i){switch(i.t=i.type,i.type){case 0:{const t=i;He(t.body),t.b=t.body,delete t.body;break}case 1:{const t=i,e=t.cases;for(let s=0;s<e.length;s++)He(e[s]);t.c=e,delete t.cases;break}case 2:{const t=i,e=t.items;for(let s=0;s<e.length;s++)He(e[s]);t.i=e,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=i;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=i;He(t.key),t.k=t.key,delete t.key,t.modifier&&(He(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=i;t.i=t.index,delete t.index;break}case 4:{const t=i;t.k=t.key,delete t.key;break}}delete i.type}function lc(i,t){const{filename:e,breakLineCode:s,needIndent:n}=t,r=t.location!==!1,a={filename:e,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:n,indentLevel:0};r&&i.loc&&(a.source=i.loc.source);const o=()=>a;function l(C,L){a.code+=C}function c(C,L=!0){const b=L?s:"";l(n?b+"  ".repeat(C):b)}function d(C=!0){const L=++a.indentLevel;C&&c(L)}function h(C=!0){const L=--a.indentLevel;C&&c(L)}function g(){c(a.indentLevel)}return{context:o,push:l,indent:d,deindent:h,newline:g,helper:C=>`_${C}`,needIndent:()=>a.needIndent}}function cc(i,t){const{helper:e}=i;i.push(`${e("linked")}(`),Be(i,t.key),t.modifier?(i.push(", "),Be(i,t.modifier),i.push(", _type")):i.push(", undefined, _type"),i.push(")")}function uc(i,t){const{helper:e,needIndent:s}=i;i.push(`${e("normalize")}([`),i.indent(s());const n=t.items.length;for(let r=0;r<n&&(Be(i,t.items[r]),r!==n-1);r++)i.push(", ");i.deindent(s()),i.push("])")}function dc(i,t){const{helper:e,needIndent:s}=i;if(t.cases.length>1){i.push(`${e("plural")}([`),i.indent(s());const n=t.cases.length;for(let r=0;r<n&&(Be(i,t.cases[r]),r!==n-1);r++)i.push(", ");i.deindent(s()),i.push("])")}}function hc(i,t){t.body?Be(i,t.body):i.push("null")}function Be(i,t){const{helper:e}=i;switch(t.type){case 0:hc(i,t);break;case 1:dc(i,t);break;case 2:uc(i,t);break;case 6:cc(i,t);break;case 8:i.push(JSON.stringify(t.value),t);break;case 7:i.push(JSON.stringify(t.value),t);break;case 5:i.push(`${e("interpolate")}(${e("list")}(${t.index}))`,t);break;case 4:i.push(`${e("interpolate")}(${e("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:i.push(JSON.stringify(t.value),t);break;case 3:i.push(JSON.stringify(t.value),t);break}}const gc=(i,t={})=>{const e=k(t.mode)?t.mode:"normal",s=k(t.filename)?t.filename:"message.intl";t.sourceMap;const n=t.breakLineCode!=null?t.breakLineCode:e==="arrow"?";":`
`,r=t.needIndent?t.needIndent:e!=="arrow",a=i.helpers||[],o=lc(i,{filename:s,breakLineCode:n,needIndent:r});o.push(e==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),o.indent(r),a.length>0&&(o.push(`const { ${Ws(a.map(d=>`${d}: _${d}`),", ")} } = ctx`),o.newline()),o.push("return "),Be(o,i),o.deindent(r),o.push("}"),delete i.helpers;const{code:l,map:c}=o.context();return{ast:i,code:l,map:c?c.toJSON():void 0}};function pc(i,t={}){const e=et({},t),s=!!e.jit,n=!!e.minify,r=e.optimize==null?!0:e.optimize,o=nc(e).parse(i);return s?(r&&oc(o),n&&He(o),{ast:o,code:""}):(ac(o,e),gc(o,e))}/*!
  * core-base v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function fc(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Hs().__INTLIFY_PROD_DEVTOOLS__=!1)}function zt(i){return D(i)&&js(i)===0&&(Lt(i,"b")||Lt(i,"body"))}const jr=["b","body"];function mc(i){return ne(i,jr)}const Vr=["c","cases"];function bc(i){return ne(i,Vr,[])}const qr=["s","static"];function Sc(i){return ne(i,qr)}const Yr=["i","items"];function wc(i){return ne(i,Yr,[])}const Kr=["t","type"];function js(i){return ne(i,Kr)}const Jr=["v","value"];function Yi(i,t){const e=ne(i,Jr);if(e!=null)return e;throw di(t)}const Xr=["m","modifier"];function vc(i){return ne(i,Xr)}const Qr=["k","key"];function yc(i){const t=ne(i,Qr);if(t)return t;throw di(6)}function ne(i,t,e){for(let s=0;s<t.length;s++){const n=t[s];if(Lt(i,n)&&i[n]!=null)return i[n]}return e}const Zr=[...jr,...Vr,...qr,...Yr,...Qr,...Xr,...Jr,...Kr];function di(i){return new Error(`unhandled node type: ${i}`)}function Vs(i){return e=>Tc(e,i)}function Tc(i,t){const e=mc(t);if(e==null)throw di(0);if(js(e)===1){const r=bc(e);return i.plural(r.reduce((a,o)=>[...a,ta(i,o)],[]))}else return ta(i,e)}function ta(i,t){const e=Sc(t);if(e!=null)return i.type==="text"?e:i.normalize([e]);{const s=wc(t).reduce((n,r)=>[...n,qs(i,r)],[]);return i.normalize(s)}}function qs(i,t){const e=js(t);switch(e){case 3:return Yi(t,e);case 9:return Yi(t,e);case 4:{const s=t;if(Lt(s,"k")&&s.k)return i.interpolate(i.named(s.k));if(Lt(s,"key")&&s.key)return i.interpolate(i.named(s.key));throw di(e)}case 5:{const s=t;if(Lt(s,"i")&&Q(s.i))return i.interpolate(i.list(s.i));if(Lt(s,"index")&&Q(s.index))return i.interpolate(i.list(s.index));throw di(e)}case 6:{const s=t,n=vc(s),r=yc(s);return i.linked(qs(i,r),n?qs(i,n):void 0,i.type)}case 7:return Yi(t,e);case 8:return Yi(t,e);default:throw new Error(`unhandled node on format message part: ${e}`)}}const Ec=i=>i;let Ki=$();function Cc(i,t={}){let e=!1;const s=t.onError||ql;return t.onError=n=>{e=!0,s(n)},{...pc(i,t),detectError:e}}function xc(i,t){if(k(i)){j(t.warnHtmlMessage)&&t.warnHtmlMessage;const s=(t.onCacheKey||Ec)(i),n=Ki[s];if(n)return n;const{ast:r,detectError:a}=Cc(i,{...t,location:!1,jit:!0}),o=Vs(r);return a?o:Ki[s]=o}else{const e=i.cacheKey;if(e){const s=Ki[e];return s||(Ki[e]=Vs(i))}else return Vs(i)}}let hi=null;function Pc(i){hi=i}function Ac(i,t,e){hi&&hi.emit("i18n:init",{timestamp:Date.now(),i18n:i,version:t,meta:e})}const Ic=Lc("function:translate");function Lc(i){return t=>hi&&hi.emit(i,t)}const Vt={INVALID_ARGUMENT:Vl,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},kc=24;function qt(i){return qi(i,null,void 0)}function Ys(i,t){return t.locale!=null?ea(t.locale):ea(i.locale)}let Ks;function ea(i){if(k(i))return i;if(G(i)){if(i.resolvedOnce&&Ks!=null)return Ks;if(i.constructor.name==="Function"){const t=i();if(zl(t))throw qt(Vt.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ks=t}else throw qt(Vt.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw qt(Vt.NOT_SUPPORT_LOCALE_TYPE)}function _c(i,t,e){return[...new Set([e,...Y(t)?t:D(t)?Object.keys(t):k(t)?[t]:[e]])]}function ia(i,t,e){const s=k(e)?e:Xi,n=i;n.__localeChainCache||(n.__localeChainCache=new Map);let r=n.__localeChainCache.get(s);if(!r){r=[];let a=[e];for(;Y(a);)a=sa(r,a,t);const o=Y(t)||!M(t)?t:t.default?t.default:null;a=k(o)?[o]:o,Y(a)&&sa(r,a,!1),n.__localeChainCache.set(s,r)}return r}function sa(i,t,e){let s=!0;for(let n=0;n<t.length&&j(s);n++){const r=t[n];k(r)&&(s=Nc(i,t[n],e))}return s}function Nc(i,t,e){let s;const n=t.split("-");do{const r=n.join("-");s=Rc(i,r,e),n.splice(-1,1)}while(n.length&&s===!0);return s}function Rc(i,t,e){let s=!1;if(!i.includes(t)&&(s=!0,t)){s=t[t.length-1]!=="!";const n=t.replace(/!/g,"");i.push(n),(Y(e)||M(e))&&e[n]&&(s=e[n])}return s}const re=[];re[0]={w:[0],i:[3,0],"[":[4],o:[7]},re[1]={w:[1],".":[2],"[":[4],o:[7]},re[2]={w:[2],i:[3,0],0:[3,0]},re[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},re[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},re[5]={"'":[4,0],o:8,l:[5,0]},re[6]={'"':[4,0],o:8,l:[6,0]};const Mc=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Dc(i){return Mc.test(i)}function Oc(i){const t=i.charCodeAt(0),e=i.charCodeAt(i.length-1);return t===e&&(t===34||t===39)?i.slice(1,-1):i}function Fc(i){if(i==null)return"o";switch(i.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return i;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Uc(i){const t=i.trim();return i.charAt(0)==="0"&&isNaN(parseInt(i))?!1:Dc(t)?Oc(t):"*"+t}function $c(i){const t=[];let e=-1,s=0,n=0,r,a,o,l,c,d,h;const g=[];g[0]=()=>{a===void 0?a=o:a+=o},g[1]=()=>{a!==void 0&&(t.push(a),a=void 0)},g[2]=()=>{g[0](),n++},g[3]=()=>{if(n>0)n--,s=4,g[0]();else{if(n=0,a===void 0||(a=Uc(a),a===!1))return!1;g[1]()}};function m(){const y=i[e+1];if(s===5&&y==="'"||s===6&&y==='"')return e++,o="\\"+y,g[0](),!0}for(;s!==null;)if(e++,r=i[e],!(r==="\\"&&m())){if(l=Fc(r),h=re[s],c=h[l]||h.l||8,c===8||(s=c[0],c[1]!==void 0&&(d=g[c[1]],d&&(o=r,d()===!1))))return;if(s===7)return t}}const na=new Map;function Hc(i,t){return D(i)?i[t]:null}function Bc(i,t){if(!D(i))return null;let e=na.get(t);if(e||(e=$c(t),e&&na.set(t,e)),!e)return null;const s=e.length;let n=i,r=0;for(;r<s;){const a=e[r];if(Zr.includes(a)&&zt(n))return null;const o=n[a];if(o===void 0||G(n))return null;n=o,r++}return n}const Wc="11.1.10",Ji=-1,Xi="en-US",ra="",aa=i=>`${i.charAt(0).toLocaleUpperCase()}${i.substr(1)}`;function zc(){return{upper:(i,t)=>t==="text"&&k(i)?i.toUpperCase():t==="vnode"&&D(i)&&"__v_isVNode"in i?i.children.toUpperCase():i,lower:(i,t)=>t==="text"&&k(i)?i.toLowerCase():t==="vnode"&&D(i)&&"__v_isVNode"in i?i.children.toLowerCase():i,capitalize:(i,t)=>t==="text"&&k(i)?aa(i):t==="vnode"&&D(i)&&"__v_isVNode"in i?aa(i.children):i}}let oa;function Gc(i){oa=i}let la;function jc(i){la=i}let ca;function Vc(i){ca=i}let ua=null;const qc=i=>{ua=i},Yc=()=>ua;let da=null;const ha=i=>{da=i},Kc=()=>da;let ga=0;function Jc(i={}){const t=G(i.onWarn)?i.onWarn:Ol,e=k(i.version)?i.version:Wc,s=k(i.locale)||G(i.locale)?i.locale:Xi,n=G(s)?Xi:s,r=Y(i.fallbackLocale)||M(i.fallbackLocale)||k(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:n,a=M(i.messages)?i.messages:Js(n),o=M(i.datetimeFormats)?i.datetimeFormats:Js(n),l=M(i.numberFormats)?i.numberFormats:Js(n),c=et($(),i.modifiers,zc()),d=i.pluralRules||$(),h=G(i.missing)?i.missing:null,g=j(i.missingWarn)||zi(i.missingWarn)?i.missingWarn:!0,m=j(i.fallbackWarn)||zi(i.fallbackWarn)?i.fallbackWarn:!0,y=!!i.fallbackFormat,C=!!i.unresolving,L=G(i.postTranslation)?i.postTranslation:null,b=M(i.processor)?i.processor:null,v=j(i.warnHtmlMessage)?i.warnHtmlMessage:!0,P=!!i.escapeParameter,S=G(i.messageCompiler)?i.messageCompiler:oa,A=G(i.messageResolver)?i.messageResolver:la||Hc,I=G(i.localeFallbacker)?i.localeFallbacker:ca||_c,x=D(i.fallbackContext)?i.fallbackContext:void 0,V=i,z=D(V.__datetimeFormatters)?V.__datetimeFormatters:new Map,yt=D(V.__numberFormatters)?V.__numberFormatters:new Map,Bt=D(V.__meta)?V.__meta:{};ga++;const K={version:e,cid:ga,locale:s,fallbackLocale:r,messages:a,modifiers:c,pluralRules:d,missing:h,missingWarn:g,fallbackWarn:m,fallbackFormat:y,unresolving:C,postTranslation:L,processor:b,warnHtmlMessage:v,escapeParameter:P,messageCompiler:S,messageResolver:A,localeFallbacker:I,fallbackContext:x,onWarn:t,__meta:Bt};return K.datetimeFormats=o,K.numberFormats=l,K.__datetimeFormatters=z,K.__numberFormatters=yt,__INTLIFY_PROD_DEVTOOLS__&&Ac(K,e,Bt),K}const Js=i=>({[i]:$()});function Xs(i,t,e,s,n){const{missing:r,onWarn:a}=i;if(r!==null){const o=r(i,e,t,n);return k(o)?o:t}else return t}function gi(i,t,e){const s=i;s.__localeChainCache=new Map,i.localeFallbacker(i,e,t)}function Xc(i,t){return i===t?!1:i.split("-")[0]===t.split("-")[0]}function Qc(i,t){const e=t.indexOf(i);if(e===-1)return!1;for(let s=e+1;s<t.length;s++)if(Xc(i,t[s]))return!0;return!1}function pa(i,...t){const{datetimeFormats:e,unresolving:s,fallbackLocale:n,onWarn:r,localeFallbacker:a}=i,{__datetimeFormatters:o}=i,[l,c,d,h]=Qs(...t),g=j(d.missingWarn)?d.missingWarn:i.missingWarn;j(d.fallbackWarn)?d.fallbackWarn:i.fallbackWarn;const m=!!d.part,y=Ys(i,d),C=a(i,n,y);if(!k(l)||l==="")return new Intl.DateTimeFormat(y,h).format(c);let L={},b,v=null;const P="datetime format";for(let I=0;I<C.length&&(b=C[I],L=e[b]||{},v=L[l],!M(v));I++)Xs(i,l,b,g,P);if(!M(v)||!k(b))return s?Ji:l;let S=`${b}__${l}`;Gi(h)||(S=`${S}__${JSON.stringify(h)}`);let A=o.get(S);return A||(A=new Intl.DateTimeFormat(b,et({},v,h)),o.set(S,A)),m?A.formatToParts(c):A.format(c)}const fa=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Qs(...i){const[t,e,s,n]=i,r=$();let a=$(),o;if(k(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw qt(Vt.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw qt(Vt.INVALID_ISO_DATE_ARGUMENT)}}else if($l(t)){if(isNaN(t.getTime()))throw qt(Vt.INVALID_DATE_ARGUMENT);o=t}else if(Q(t))o=t;else throw qt(Vt.INVALID_ARGUMENT);return k(e)?r.key=e:M(e)&&Object.keys(e).forEach(l=>{fa.includes(l)?a[l]=e[l]:r[l]=e[l]}),k(s)?r.locale=s:M(s)&&(a=s),M(n)&&(a=n),[r.key||"",o,r,a]}function ma(i,t,e){const s=i;for(const n in e){const r=`${t}__${n}`;s.__datetimeFormatters.has(r)&&s.__datetimeFormatters.delete(r)}}function ba(i,...t){const{numberFormats:e,unresolving:s,fallbackLocale:n,onWarn:r,localeFallbacker:a}=i,{__numberFormatters:o}=i,[l,c,d,h]=Zs(...t),g=j(d.missingWarn)?d.missingWarn:i.missingWarn;j(d.fallbackWarn)?d.fallbackWarn:i.fallbackWarn;const m=!!d.part,y=Ys(i,d),C=a(i,n,y);if(!k(l)||l==="")return new Intl.NumberFormat(y,h).format(c);let L={},b,v=null;const P="number format";for(let I=0;I<C.length&&(b=C[I],L=e[b]||{},v=L[l],!M(v));I++)Xs(i,l,b,g,P);if(!M(v)||!k(b))return s?Ji:l;let S=`${b}__${l}`;Gi(h)||(S=`${S}__${JSON.stringify(h)}`);let A=o.get(S);return A||(A=new Intl.NumberFormat(b,et({},v,h)),o.set(S,A)),m?A.formatToParts(c):A.format(c)}const Sa=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Zs(...i){const[t,e,s,n]=i,r=$();let a=$();if(!Q(t))throw qt(Vt.INVALID_ARGUMENT);const o=t;return k(e)?r.key=e:M(e)&&Object.keys(e).forEach(l=>{Sa.includes(l)?a[l]=e[l]:r[l]=e[l]}),k(s)?r.locale=s:M(s)&&(a=s),M(n)&&(a=n),[r.key||"",o,r,a]}function wa(i,t,e){const s=i;for(const n in e){const r=`${t}__${n}`;s.__numberFormatters.has(r)&&s.__numberFormatters.delete(r)}}const Zc=i=>i,tu=i=>"",eu="text",iu=i=>i.length===0?"":Ws(i),su=Gl;function va(i,t){return i=Math.abs(i),t===2?i?i>1?1:0:1:i?Math.min(i,2):0}function nu(i){const t=Q(i.pluralIndex)?i.pluralIndex:-1;return i.named&&(Q(i.named.count)||Q(i.named.n))?Q(i.named.count)?i.named.count:Q(i.named.n)?i.named.n:t:t}function ru(i,t){t.count||(t.count=i),t.n||(t.n=i)}function au(i={}){const t=i.locale,e=nu(i),s=D(i.pluralRules)&&k(t)&&G(i.pluralRules[t])?i.pluralRules[t]:va,n=D(i.pluralRules)&&k(t)&&G(i.pluralRules[t])?va:void 0,r=b=>b[s(e,b.length,n)],a=i.list||[],o=b=>a[b],l=i.named||$();Q(i.pluralIndex)&&ru(e,l);const c=b=>l[b];function d(b,v){const P=G(i.messages)?i.messages(b,!!v):D(i.messages)?i.messages[b]:!1;return P||(i.parent?i.parent.message(b):tu)}const h=b=>i.modifiers?i.modifiers[b]:Zc,g=M(i.processor)&&G(i.processor.normalize)?i.processor.normalize:iu,m=M(i.processor)&&G(i.processor.interpolate)?i.processor.interpolate:su,y=M(i.processor)&&k(i.processor.type)?i.processor.type:eu,L={list:o,named:c,plural:r,linked:(b,...v)=>{const[P,S]=v;let A="text",I="";v.length===1?D(P)?(I=P.modifier||I,A=P.type||A):k(P)&&(I=P||I):v.length===2&&(k(P)&&(I=P||I),k(S)&&(A=S||A));const x=d(b,!0)(L),V=A==="vnode"&&Y(x)&&I?x[0]:x;return I?h(I)(V,A):V},message:d,type:y,interpolate:m,normalize:g,values:et($(),a,l)};return L}const ya=()=>"",Tt=i=>G(i);function Ta(i,...t){const{fallbackFormat:e,postTranslation:s,unresolving:n,messageCompiler:r,fallbackLocale:a,messages:o}=i,[l,c]=tn(...t),d=j(c.missingWarn)?c.missingWarn:i.missingWarn,h=j(c.fallbackWarn)?c.fallbackWarn:i.fallbackWarn,g=j(c.escapeParameter)?c.escapeParameter:i.escapeParameter,m=!!c.resolvedMessage,y=k(c.default)||j(c.default)?j(c.default)?r?l:()=>l:c.default:e?r?l:()=>l:null,C=e||y!=null&&(k(y)||G(y)),L=Ys(i,c);g&&ou(c);let[b,v,P]=m?[l,L,o[L]||$()]:Ea(i,l,L,a,h,d),S=b,A=l;if(!m&&!(k(S)||zt(S)||Tt(S))&&C&&(S=y,A=S),!m&&(!(k(S)||zt(S)||Tt(S))||!k(v)))return n?Ji:l;let I=!1;const x=()=>{I=!0},V=Tt(S)?S:Ca(i,l,v,S,A,x);if(I)return S;const z=uu(i,v,P,c),yt=au(z),Bt=lu(i,V,yt);let K=s?s(Bt,l):Bt;if(g&&k(K)&&(K=Bl(K)),__INTLIFY_PROD_DEVTOOLS__){const ai={timestamp:Date.now(),key:k(l)?l:Tt(S)?S.key:"",locale:v||(Tt(S)?S.locale:""),format:k(S)?S:Tt(S)?S.source:"",message:K};ai.meta=et({},i.__meta,Yc()||{}),Ic(ai)}return K}function ou(i){Y(i.list)?i.list=i.list.map(t=>k(t)?$r(t):t):D(i.named)&&Object.keys(i.named).forEach(t=>{k(i.named[t])&&(i.named[t]=$r(i.named[t]))})}function Ea(i,t,e,s,n,r){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=i,d=c(i,s,e);let h=$(),g,m=null;const y="translate";for(let C=0;C<d.length&&(g=d[C],h=a[g]||$(),(m=l(h,t))===null&&(m=h[t]),!(k(m)||zt(m)||Tt(m)));C++)if(!Qc(g,d)){const L=Xs(i,t,g,r,y);L!==t&&(m=L)}return[m,g,h]}function Ca(i,t,e,s,n,r){const{messageCompiler:a,warnHtmlMessage:o}=i;if(Tt(s)){const c=s;return c.locale=c.locale||e,c.key=c.key||t,c}if(a==null){const c=()=>s;return c.locale=e,c.key=t,c}const l=a(s,cu(i,e,n,s,o,r));return l.locale=e,l.key=t,l.source=s,l}function lu(i,t,e){return t(e)}function tn(...i){const[t,e,s]=i,n=$();if(!k(t)&&!Q(t)&&!Tt(t)&&!zt(t))throw qt(Vt.INVALID_ARGUMENT);const r=Q(t)?String(t):(Tt(t),t);return Q(e)?n.plural=e:k(e)?n.default=e:M(e)&&!Gi(e)?n.named=e:Y(e)&&(n.list=e),Q(s)?n.plural=s:k(s)?n.default=s:M(s)&&et(n,s),[r,n]}function cu(i,t,e,s,n,r){return{locale:t,key:e,warnHtmlMessage:n,onError:a=>{throw r&&r(a),a},onCacheKey:a=>Fl(t,e,a)}}function uu(i,t,e,s){const{modifiers:n,pluralRules:r,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:d}=i,g={locale:t,modifiers:n,pluralRules:r,messages:(m,y)=>{let C=a(e,m);if(C==null&&(d||y)){const[,,L]=Ea(d||i,m,t,o,l,c);C=a(L,m)}if(k(C)||zt(C)){let L=!1;const v=Ca(i,m,t,C,m,()=>{L=!0});return L?ya:v}else return Tt(C)?C:ya}};return i.processor&&(g.processor=i.processor),s.list&&(g.list=s.list),s.named&&(g.named=s.named),Q(s.plural)&&(g.pluralIndex=s.plural),g}fc();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function du(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const en={},Qi=()=>{},hu=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),pi=Object.assign,gu=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},pu=Object.prototype.hasOwnProperty,sn=(i,t)=>pu.call(i,t),it=Array.isArray,fi=i=>Zi(i)==="[object Map]",fu=i=>Zi(i)==="[object Set]",gt=i=>typeof i=="function",ae=i=>typeof i=="string",mi=i=>typeof i=="symbol",kt=i=>i!==null&&typeof i=="object",mu=i=>(kt(i)||gt(i))&&gt(i.then)&&gt(i.catch),bu=Object.prototype.toString,Zi=i=>bu.call(i),Su=i=>Zi(i).slice(8,-1),wu=i=>Zi(i)==="[object Object]",nn=i=>ae(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,oe=(i,t)=>!Object.is(i,t);let xa;const rn=()=>xa||(xa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function an(i){if(it(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=ae(s)?Eu(s):an(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(ae(i)||kt(i))return i}const vu=/;(?![^(]*\))/g,yu=/:([^]+)/,Tu=/\/\*[^]*?\*\//g;function Eu(i){const t={};return i.replace(Tu,"").split(vu).forEach(e=>{if(e){const s=e.split(yu);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function on(i){let t="";if(ae(i))t=i;else if(it(i))for(let e=0;e<i.length;e++){const s=on(i[e]);s&&(t+=s+" ")}else if(kt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ut;class Cu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ut,!t&&ut&&(this.index=(ut.scopes||(ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ut;try{return ut=this,t()}finally{ut=e}}}on(){++this._on===1&&(this.prevScope=ut,ut=this)}off(){this._on>0&&--this._on===0&&(ut=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function xu(i){return new Cu(i)}function Pu(){return ut}let W;const ln=new WeakSet;class Au{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ut&&ut.active&&ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ln.has(this)&&(ln.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Aa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Na(this),Ia(this);const t=W,e=_t;W=this,_t=!0;try{return this.fn()}finally{La(this),W=t,_t=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)hn(t);this.deps=this.depsTail=void 0,Na(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ln.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){dn(this)&&this.run()}get dirty(){return dn(this)}}let Pa=0,bi,Si;function Aa(i,t=!1){if(i.flags|=8,t){i.next=Si,Si=i;return}i.next=bi,bi=i}function cn(){Pa++}function un(){if(--Pa>0)return;if(Si){let t=Si;for(Si=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;bi;){let t=bi;for(bi=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function Ia(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function La(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),hn(s),Iu(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function dn(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ka(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function ka(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===wi)||(i.globalVersion=wi,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!dn(i))))return;i.flags|=2;const t=i.dep,e=W,s=_t;W=i,_t=!0;try{Ia(i);const n=i.fn(i._value);(t.version===0||oe(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{W=e,_t=s,La(i),i.flags&=-3}}function hn(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)hn(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Iu(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let _t=!0;const _a=[];function ts(){_a.push(_t),_t=!1}function es(){const i=_a.pop();_t=i===void 0?!0:i}function Na(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=W;W=void 0;try{t()}finally{W=e}}}let wi=0;class Lu{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!W||!_t||W===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==W)e=this.activeLink=new Lu(W,this),W.deps?(e.prevDep=W.depsTail,W.depsTail.nextDep=e,W.depsTail=e):W.deps=W.depsTail=e,Ra(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=W.depsTail,e.nextDep=void 0,W.depsTail.nextDep=e,W.depsTail=e,W.deps===e&&(W.deps=s)}return e}trigger(t){this.version++,wi++,this.notify(t)}notify(t){cn();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{un()}}}function Ra(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Ra(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const pn=new WeakMap,Ee=Symbol(""),fn=Symbol(""),vi=Symbol("");function dt(i,t,e){if(_t&&W){let s=pn.get(i);s||pn.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new gn),n.map=s,n.key=e),n.track()}}function le(i,t,e,s,n,r){const a=pn.get(i);if(!a){wi++;return}const o=l=>{l&&l.trigger()};if(cn(),t==="clear")a.forEach(o);else{const l=it(i),c=l&&nn(e);if(l&&e==="length"){const d=Number(s);a.forEach((h,g)=>{(g==="length"||g===vi||!mi(g)&&g>=d)&&o(h)})}else switch((e!==void 0||a.has(void 0))&&o(a.get(e)),c&&o(a.get(vi)),t){case"add":l?c&&o(a.get("length")):(o(a.get(Ee)),fi(i)&&o(a.get(fn)));break;case"delete":l||(o(a.get(Ee)),fi(i)&&o(a.get(fn)));break;case"set":fi(i)&&o(a.get(Ee));break}}un()}function We(i){const t=H(i);return t===i?t:(dt(t,"iterate",vi),Nt(i)?t:t.map(lt))}function mn(i){return dt(i=H(i),"iterate",vi),i}const ku={__proto__:null,[Symbol.iterator](){return bn(this,Symbol.iterator,lt)},concat(...i){return We(this).concat(...i.map(t=>it(t)?We(t):t))},entries(){return bn(this,"entries",i=>(i[1]=lt(i[1]),i))},every(i,t){return Yt(this,"every",i,t,void 0,arguments)},filter(i,t){return Yt(this,"filter",i,t,e=>e.map(lt),arguments)},find(i,t){return Yt(this,"find",i,t,lt,arguments)},findIndex(i,t){return Yt(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return Yt(this,"findLast",i,t,lt,arguments)},findLastIndex(i,t){return Yt(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return Yt(this,"forEach",i,t,void 0,arguments)},includes(...i){return Sn(this,"includes",i)},indexOf(...i){return Sn(this,"indexOf",i)},join(i){return We(this).join(i)},lastIndexOf(...i){return Sn(this,"lastIndexOf",i)},map(i,t){return Yt(this,"map",i,t,void 0,arguments)},pop(){return yi(this,"pop")},push(...i){return yi(this,"push",i)},reduce(i,...t){return Ma(this,"reduce",i,t)},reduceRight(i,...t){return Ma(this,"reduceRight",i,t)},shift(){return yi(this,"shift")},some(i,t){return Yt(this,"some",i,t,void 0,arguments)},splice(...i){return yi(this,"splice",i)},toReversed(){return We(this).toReversed()},toSorted(i){return We(this).toSorted(i)},toSpliced(...i){return We(this).toSpliced(...i)},unshift(...i){return yi(this,"unshift",i)},values(){return bn(this,"values",lt)}};function bn(i,t,e){const s=mn(i),n=s[t]();return s!==i&&!Nt(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const _u=Array.prototype;function Yt(i,t,e,s,n,r){const a=mn(i),o=a!==i&&!Nt(i),l=a[t];if(l!==_u[t]){const h=l.apply(i,r);return o?lt(h):h}let c=e;a!==i&&(o?c=function(h,g){return e.call(this,lt(h),g,i)}:e.length>2&&(c=function(h,g){return e.call(this,h,g,i)}));const d=l.call(a,c,s);return o&&n?n(d):d}function Ma(i,t,e,s){const n=mn(i);let r=e;return n!==i&&(Nt(i)?e.length>3&&(r=function(a,o,l){return e.call(this,a,o,l,i)}):r=function(a,o,l){return e.call(this,a,lt(o),l,i)}),n[t](r,...s)}function Sn(i,t,e){const s=H(i);dt(s,"iterate",vi);const n=s[t](...e);return(n===-1||n===!1)&&vn(e[0])?(e[0]=H(e[0]),s[t](...e)):n}function yi(i,t,e=[]){ts(),cn();const s=H(i)[t].apply(i,e);return un(),es(),s}const Nu=du("__proto__,__v_isRef,__isVue"),Da=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(mi));function Ru(i){mi(i)||(i=String(i));const t=H(this);return dt(t,"has",i),t.hasOwnProperty(i)}class Oa{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?zu:$a:r?Wu:Ua).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=it(t);if(!n){let l;if(a&&(l=ku[e]))return l;if(e==="hasOwnProperty")return Ru}const o=Reflect.get(t,e,Rt(t)?t:s);return(mi(e)?Da.has(e):Nu(e))||(n||dt(t,"get",e),r)?o:Rt(o)?a&&nn(e)?o:o.value:kt(o)?n?Ba(o):Ha(o):o}}class Mu extends Oa{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const l=Ce(r);if(!Nt(s)&&!Ce(s)&&(r=H(r),s=H(s)),!it(t)&&Rt(r)&&!Rt(s))return l?!1:(r.value=s,!0)}const a=it(t)&&nn(e)?Number(e)<t.length:sn(t,e),o=Reflect.set(t,e,s,Rt(t)?t:n);return t===H(n)&&(a?oe(s,r)&&le(t,"set",e,s):le(t,"add",e,s)),o}deleteProperty(t,e){const s=sn(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&le(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!mi(e)||!Da.has(e))&&dt(t,"has",e),s}ownKeys(t){return dt(t,"iterate",it(t)?"length":Ee),Reflect.ownKeys(t)}}class Du extends Oa{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Ou=new Mu,Fu=new Du,wn=i=>i,is=i=>Reflect.getPrototypeOf(i);function Uu(i,t,e){return function(...s){const n=this.__v_raw,r=H(n),a=fi(r),o=i==="entries"||i===Symbol.iterator&&a,l=i==="keys"&&a,c=n[i](...s),d=e?wn:t?yn:lt;return!t&&dt(r,"iterate",l?fn:Ee),{next(){const{value:h,done:g}=c.next();return g?{value:h,done:g}:{value:o?[d(h[0]),d(h[1])]:d(h),done:g}},[Symbol.iterator](){return this}}}}function ss(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function $u(i,t){const e={get(n){const r=this.__v_raw,a=H(r),o=H(n);i||(oe(n,o)&&dt(a,"get",n),dt(a,"get",o));const{has:l}=is(a),c=t?wn:i?yn:lt;if(l.call(a,n))return c(r.get(n));if(l.call(a,o))return c(r.get(o));r!==a&&r.get(n)},get size(){const n=this.__v_raw;return!i&&dt(H(n),"iterate",Ee),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,a=H(r),o=H(n);return i||(oe(n,o)&&dt(a,"has",n),dt(a,"has",o)),n===o?r.has(n):r.has(n)||r.has(o)},forEach(n,r){const a=this,o=a.__v_raw,l=H(o),c=t?wn:i?yn:lt;return!i&&dt(l,"iterate",Ee),o.forEach((d,h)=>n.call(r,c(d),c(h),a))}};return pi(e,i?{add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear")}:{add(n){!t&&!Nt(n)&&!Ce(n)&&(n=H(n));const r=H(this);return is(r).has.call(r,n)||(r.add(n),le(r,"add",n,n)),this},set(n,r){!t&&!Nt(r)&&!Ce(r)&&(r=H(r));const a=H(this),{has:o,get:l}=is(a);let c=o.call(a,n);c||(n=H(n),c=o.call(a,n));const d=l.call(a,n);return a.set(n,r),c?oe(r,d)&&le(a,"set",n,r):le(a,"add",n,r),this},delete(n){const r=H(this),{has:a,get:o}=is(r);let l=a.call(r,n);l||(n=H(n),l=a.call(r,n)),o&&o.call(r,n);const c=r.delete(n);return l&&le(r,"delete",n,void 0),c},clear(){const n=H(this),r=n.size!==0,a=n.clear();return r&&le(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=Uu(n,i,t)}),e}function Fa(i,t){const e=$u(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(sn(e,n)&&n in s?e:s,n,r)}const Hu={get:Fa(!1,!1)},Bu={get:Fa(!0,!1)},Ua=new WeakMap,Wu=new WeakMap,$a=new WeakMap,zu=new WeakMap;function Gu(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ju(i){return i.__v_skip||!Object.isExtensible(i)?0:Gu(Su(i))}function Ha(i){return Ce(i)?i:Wa(i,!1,Ou,Hu,Ua)}function Ba(i){return Wa(i,!0,Fu,Bu,$a)}function Wa(i,t,e,s,n){if(!kt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=ju(i);if(r===0)return i;const a=n.get(i);if(a)return a;const o=new Proxy(i,r===2?s:e);return n.set(i,o),o}function ns(i){return Ce(i)?ns(i.__v_raw):!!(i&&i.__v_isReactive)}function Ce(i){return!!(i&&i.__v_isReadonly)}function Nt(i){return!!(i&&i.__v_isShallow)}function vn(i){return i?!!i.__v_raw:!1}function H(i){const t=i&&i.__v_raw;return t?H(t):i}const lt=i=>kt(i)?Ha(i):i,yn=i=>kt(i)?Ba(i):i;function Rt(i){return i?i.__v_isRef===!0:!1}function Vu(i){return za(i,!1)}function qu(i){return za(i,!0)}function za(i,t){return Rt(i)?i:new Yu(i,t)}class Yu{constructor(t,e){this.dep=new gn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:H(t),this._value=e?t:lt(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Nt(t)||Ce(t);t=s?t:H(t),oe(t,e)&&(this._rawValue=t,this._value=s?t:lt(t),this.dep.trigger())}}class Ku{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new gn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&W!==this)return Aa(this,!0),!0}get value(){const t=this.dep.track();return ka(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ju(i,t,e=!1){let s,n;return gt(i)?s=i:(s=i.get,n=i.set),new Ku(s,n,e)}const rs={},as=new WeakMap;let xe;function Xu(i,t=!1,e=xe){if(e){let s=as.get(e);s||as.set(e,s=[]),s.push(i)}}function Qu(i,t,e=en){const{immediate:s,deep:n,once:r,scheduler:a,augmentJob:o,call:l}=e,c=S=>n?S:Nt(S)||n===!1||n===0?ce(S,1):ce(S);let d,h,g,m,y=!1,C=!1;if(Rt(i)?(h=()=>i.value,y=Nt(i)):ns(i)?(h=()=>c(i),y=!0):it(i)?(C=!0,y=i.some(S=>ns(S)||Nt(S)),h=()=>i.map(S=>{if(Rt(S))return S.value;if(ns(S))return c(S);if(gt(S))return l?l(S,2):S()})):gt(i)?t?h=l?()=>l(i,2):i:h=()=>{if(g){ts();try{g()}finally{es()}}const S=xe;xe=d;try{return l?l(i,3,[m]):i(m)}finally{xe=S}}:h=Qi,t&&n){const S=h,A=n===!0?1/0:n;h=()=>ce(S(),A)}const L=Pu(),b=()=>{d.stop(),L&&L.active&&gu(L.effects,d)};if(r&&t){const S=t;t=(...A)=>{S(...A),b()}}let v=C?new Array(i.length).fill(rs):rs;const P=S=>{if(!(!(d.flags&1)||!d.dirty&&!S))if(t){const A=d.run();if(n||y||(C?A.some((I,x)=>oe(I,v[x])):oe(A,v))){g&&g();const I=xe;xe=d;try{const x=[A,v===rs?void 0:C&&v[0]===rs?[]:v,m];v=A,l?l(t,3,x):t(...x)}finally{xe=I}}}else d.run()};return o&&o(P),d=new Au(h),d.scheduler=a?()=>a(P,!1):P,m=S=>Xu(S,!1,d),g=d.onStop=()=>{const S=as.get(d);if(S){if(l)l(S,4);else for(const A of S)A();as.delete(d)}},t?s?P(!0):v=d.run():a?a(P.bind(null,!0),!0):d.run(),b.pause=d.pause.bind(d),b.resume=d.resume.bind(d),b.stop=b,b}function ce(i,t=1/0,e){if(t<=0||!kt(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,Rt(i))ce(i.value,t,e);else if(it(i))for(let s=0;s<i.length;s++)ce(i[s],t,e);else if(fu(i)||fi(i))i.forEach(s=>{ce(s,t,e)});else if(wu(i)){for(const s in i)ce(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&ce(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tn(i,t,e,s){try{return s?i(...s):i()}catch(n){Ga(n,t,e)}}function En(i,t,e,s){if(gt(i)){const n=Tn(i,t,e,s);return n&&mu(n)&&n.catch(r=>{Ga(r,t,e)}),n}if(it(i)){const n=[];for(let r=0;r<i.length;r++)n.push(En(i[r],t,e,s));return n}}function Ga(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||en;if(t){let o=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${e}`;for(;o;){const d=o.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](i,l,c)===!1)return}o=o.parent}if(r){ts(),Tn(r,null,10,[i,l,c]),es();return}}Zu(i,e,n,s,a)}function Zu(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const Et=[];let Kt=-1;const ze=[];let ue=null,Ge=0;const td=Promise.resolve();let Cn=null;function ed(i){let t=Kt+1,e=Et.length;for(;t<e;){const s=t+e>>>1,n=Et[s],r=Ti(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function id(i){if(!(i.flags&1)){const t=Ti(i),e=Et[Et.length-1];!e||!(i.flags&2)&&t>=Ti(e)?Et.push(i):Et.splice(ed(t),0,i),i.flags|=1,ja()}}function ja(){Cn||(Cn=td.then(Va))}function sd(i){it(i)?ze.push(...i):ue&&i.id===-1?ue.splice(Ge+1,0,i):i.flags&1||(ze.push(i),i.flags|=1),ja()}function nd(i){if(ze.length){const t=[...new Set(ze)].sort((e,s)=>Ti(e)-Ti(s));if(ze.length=0,ue){ue.push(...t);return}for(ue=t,Ge=0;Ge<ue.length;Ge++){const e=ue[Ge];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}ue=null,Ge=0}}const Ti=i=>i.id==null?i.flags&2?-1:1/0:i.id;function Va(i){try{for(Kt=0;Kt<Et.length;Kt++){const t=Et[Kt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Tn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kt<Et.length;Kt++){const t=Et[Kt];t&&(t.flags&=-2)}Kt=-1,Et.length=0,nd(),Cn=null,(Et.length||ze.length)&&Va()}}let je=null,rd=null;const ad=i=>i.__isTeleport;function qa(i,t){i.shapeFlag&6&&i.component?(i.transition=t,qa(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function xn(i,t){return gt(i)?pi({name:i.name},t,{setup:i}):i}rn().requestIdleCallback,rn().cancelIdleCallback;function od(i,t,e=Pe,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...a)=>{ts();const o=xd(e),l=En(t,e,i,a);return o(),es(),l});return s?n.unshift(r):n.push(r),r}}const Ya=i=>(t,e=Pe)=>{(!Ei||i==="sp")&&od(i,(...s)=>t(...s),e)},ld=Ya("m"),cd=Ya("um"),ud=Symbol.for("v-ndc");let dd=null;function Ka(i,t,e=!1){const s=Pe||je;if(s||dd){let n=s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&gt(t)?t.call(s&&s.proxy):t}}const hd={},Ja=i=>Object.getPrototypeOf(i)===hd,gd=Sd,pd=Symbol.for("v-scx"),fd=()=>Ka(pd);function Pn(i,t,e){return md(i,t,e)}function md(i,t,e=en){const{immediate:s,deep:n,flush:r,once:a}=e,o=pi({},e),l=t&&s||!t&&r!=="post";let c;if(Ei){if(r==="sync"){const m=fd();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Qi,m.resume=Qi,m.pause=Qi,m}}const d=Pe;o.call=(m,y,C)=>En(m,d,y,C);let h=!1;r==="post"?o.scheduler=m=>{gd(m,d&&d.suspense)}:r!=="sync"&&(h=!0,o.scheduler=(m,y)=>{y?m():id(m)}),o.augmentJob=m=>{t&&(m.flags|=4),h&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const g=Qu(i,t,o);return Ei&&(c?c.push(g):l&&g()),g}const bd=i=>i.__isSuspense;function Sd(i,t){t&&t.pendingBranch?it(i)?t.effects.push(...i):t.effects.push(i):sd(i)}const os=Symbol.for("v-fgt"),Xa=Symbol.for("v-txt"),wd=Symbol.for("v-cmt");function An(i){return i?i.__v_isVNode===!0:!1}const Qa=({key:i})=>i??null,ls=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?ae(i)||Rt(i)||gt(i)?{i:je,r:i,k:t,f:!!e}:i:null);function vd(i,t=null,e=null,s=0,n=null,r=i===os?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&Qa(t),ref:t&&ls(t),scopeId:rd,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:je};return o?(Ln(l,e),r&128&&i.normalize(l)):e&&(l.shapeFlag|=ae(e)?8:16),l}const Ve=yd;function yd(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===ud)&&(i=wd),An(i)){const o=In(i,t,!0);return e&&Ln(o,e),o.patchFlag=-2,o}if(Pd(i)&&(i=i.__vccOpts),t){t=Td(t);let{class:o,style:l}=t;o&&!ae(o)&&(t.class=on(o)),kt(l)&&(vn(l)&&!it(l)&&(l=pi({},l)),t.style=an(l))}const a=ae(i)?1:bd(i)?128:ad(i)?64:kt(i)?4:gt(i)?2:0;return vd(i,t,e,s,n,a,r,!0)}function Td(i){return i?vn(i)||Ja(i)?pi({},i):i:null}function In(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:a,children:o,transition:l}=i,c=t?Cd(n||{},t):n,d={__v_isVNode:!0,__v_skip:!0,type:i.type,props:c,key:c&&Qa(c),ref:t&&t.ref?e&&r?it(r)?r.concat(ls(t)):[r,ls(t)]:ls(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==os?a===-1?16:a|16:a,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&In(i.ssContent),ssFallback:i.ssFallback&&In(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&s&&qa(d,l.clone(d)),d}function Ed(i=" ",t=0){return Ve(Xa,null,i,t)}function Ln(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(it(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Ln(i,n()),n._c&&(n._d=!0));return}else e=32,!t._&&!Ja(t)&&(t._ctx=je);else gt(t)?(t={default:t,_ctx:je},e=32):(t=String(t),s&64?(e=16,t=[Ed(t)]):e=8);i.children=t,i.shapeFlag|=e}function Cd(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=on([t.class,s.class]));else if(n==="style")t.style=an([t.style,s.style]);else if(hu(n)){const r=t[n],a=s[n];a&&r!==a&&!(it(r)&&r.includes(a))&&(t[n]=r?[].concat(r,a):a)}else n!==""&&(t[n]=s[n])}return t}let Pe=null;const kn=()=>Pe||je;let _n;{const i=rn(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(a=>a(r)):n[0](r)}};_n=t("__VUE_INSTANCE_SETTERS__",e=>Pe=e),t("__VUE_SSR_SETTERS__",e=>Ei=e)}const xd=i=>{const t=Pe;return _n(i),i.scope.on(),()=>{i.scope.off(),_n(t)}};let Ei=!1;function Pd(i){return gt(i)&&"__vccOpts"in i}const Ci=(i,t)=>Ju(i,t,Ei);function Za(i,t,e){const s=arguments.length;return s===2?kt(t)&&!it(t)?An(t)?Ve(i,null,[t]):Ve(i,t):Ve(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&An(e)&&(e=[e]),Ve(i,t,e))}/*!
  * vue-i18n v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Ad="11.1.10";function Id(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Hs().__INTLIFY_PROD_DEVTOOLS__=!1)}const Ct={UNEXPECTED_RETURN_TYPE:kc,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Mt(i,...t){return qi(i,null,void 0)}const Nn=ie("__translateVNode"),Rn=ie("__datetimeParts"),Mn=ie("__numberParts"),Ld=ie("__setPluralRules"),kd=ie("__injectWithOption"),Dn=ie("__dispose");function xi(i){if(!D(i)||zt(i))return i;for(const t in i)if(Lt(i,t))if(!t.includes("."))D(i[t])&&xi(i[t]);else{const e=t.split("."),s=e.length-1;let n=i,r=!1;for(let a=0;a<s;a++){if(e[a]==="__proto__")throw new Error(`unsafe key: ${e[a]}`);if(e[a]in n||(n[e[a]]=$()),!D(n[e[a]])){r=!0;break}n=n[e[a]]}if(r||(zt(n)?Zr.includes(e[s])||delete i[t]:(n[e[s]]=i[t],delete i[t])),!zt(n)){const a=n[e[s]];D(a)&&xi(a)}}return i}function to(i,t){const{messages:e,__i18n:s,messageResolver:n,flatJson:r}=t,a=M(e)?e:Y(s)?$():{[i]:$()};if(Y(s)&&s.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||$(),Vi(c,a[l])):Vi(c,a)}else k(o)&&Vi(JSON.parse(o),a)}),n==null&&r)for(const o in a)Lt(a,o)&&xi(a[o]);return a}function eo(i){return i.type}function _d(i,t,e){let s=D(t.messages)?t.messages:$();"__i18nGlobal"in e&&(s=to(i.locale.value,{messages:s,__i18n:e.__i18nGlobal}));const n=Object.keys(s);n.length&&n.forEach(r=>{i.mergeLocaleMessage(r,s[r])});{if(D(t.datetimeFormats)){const r=Object.keys(t.datetimeFormats);r.length&&r.forEach(a=>{i.mergeDateTimeFormat(a,t.datetimeFormats[a])})}if(D(t.numberFormats)){const r=Object.keys(t.numberFormats);r.length&&r.forEach(a=>{i.mergeNumberFormat(a,t.numberFormats[a])})}}}function io(i){return Ve(Xa,null,i,0)}const so="__INTLIFY_META__",no=()=>[],Nd=()=>!1;let ro=0;function ao(i){return(t,e,s,n)=>i(e,s,kn()||void 0,n)}const Rd=()=>{const i=kn();let t=null;return i&&(t=eo(i)[so])?{[so]:t}:null};function oo(i={}){const{__root:t,__injectWithOption:e}=i,s=t===void 0,n=i.flatJson,r=Wi?Vu:qu;let a=j(i.inheritLocale)?i.inheritLocale:!0;const o=r(t&&a?t.locale.value:k(i.locale)?i.locale:Xi),l=r(t&&a?t.fallbackLocale.value:k(i.fallbackLocale)||Y(i.fallbackLocale)||M(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:o.value),c=r(to(o.value,i)),d=r(M(i.datetimeFormats)?i.datetimeFormats:{[o.value]:{}}),h=r(M(i.numberFormats)?i.numberFormats:{[o.value]:{}});let g=t?t.missingWarn:j(i.missingWarn)||zi(i.missingWarn)?i.missingWarn:!0,m=t?t.fallbackWarn:j(i.fallbackWarn)||zi(i.fallbackWarn)?i.fallbackWarn:!0,y=t?t.fallbackRoot:j(i.fallbackRoot)?i.fallbackRoot:!0,C=!!i.fallbackFormat,L=G(i.missing)?i.missing:null,b=G(i.missing)?ao(i.missing):null,v=G(i.postTranslation)?i.postTranslation:null,P=t?t.warnHtmlMessage:j(i.warnHtmlMessage)?i.warnHtmlMessage:!0,S=!!i.escapeParameter;const A=t?t.modifiers:M(i.modifiers)?i.modifiers:{};let I=i.pluralRules||t&&t.pluralRules,x;x=(()=>{s&&ha(null);const w={version:Ad,locale:o.value,fallbackLocale:l.value,messages:c.value,modifiers:A,pluralRules:I,missing:b===null?void 0:b,missingWarn:g,fallbackWarn:m,fallbackFormat:C,unresolving:!0,postTranslation:v===null?void 0:v,warnHtmlMessage:P,escapeParameter:S,messageResolver:i.messageResolver,messageCompiler:i.messageCompiler,__meta:{framework:"vue"}};w.datetimeFormats=d.value,w.numberFormats=h.value,w.__datetimeFormatters=M(x)?x.__datetimeFormatters:void 0,w.__numberFormatters=M(x)?x.__numberFormatters:void 0;const E=Jc(w);return s&&ha(E),E})(),gi(x,o.value,l.value);function z(){return[o.value,l.value,c.value,d.value,h.value]}const yt=Ci({get:()=>o.value,set:w=>{x.locale=w,o.value=w}}),Bt=Ci({get:()=>l.value,set:w=>{x.fallbackLocale=w,l.value=w,gi(x,o.value,w)}}),K=Ci(()=>c.value),ai=Ci(()=>d.value),wr=Ci(()=>h.value);function vr(){return G(v)?v:null}function yr(w){v=w,x.postTranslation=w}function Tr(){return L}function Er(w){w!==null&&(b=ao(w)),L=w,x.missing=b}const Zt=(w,E,B,X,Ue,Fs)=>{z();let ci;try{__INTLIFY_PROD_DEVTOOLS__,s||(x.fallbackContext=t?Kc():void 0),ci=w(x)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(x.fallbackContext=void 0)}if(B!=="translate exists"&&Q(ci)&&ci===Ji||B==="translate exists"&&!ci){const[Xf,am]=E();return t&&y?X(t):Ue(Xf)}else{if(Fs(ci))return ci;throw Mt(Ct.UNEXPECTED_RETURN_TYPE)}};function Ms(...w){return Zt(E=>Reflect.apply(Ta,null,[E,...w]),()=>tn(...w),"translate",E=>Reflect.apply(E.t,E,[...w]),E=>E,E=>k(E))}function Ds(...w){const[E,B,X]=w;if(X&&!D(X))throw Mt(Ct.INVALID_ARGUMENT);return Ms(E,B,et({resolvedMessage:!0},X||{}))}function Cr(...w){return Zt(E=>Reflect.apply(pa,null,[E,...w]),()=>Qs(...w),"datetime format",E=>Reflect.apply(E.d,E,[...w]),()=>ra,E=>k(E)||Y(E))}function xr(...w){return Zt(E=>Reflect.apply(ba,null,[E,...w]),()=>Zs(...w),"number format",E=>Reflect.apply(E.n,E,[...w]),()=>ra,E=>k(E)||Y(E))}function Pr(w){return w.map(E=>k(E)||Q(E)||j(E)?io(String(E)):E)}const Ar={normalize:Pr,interpolate:w=>w,type:"vnode"};function Ir(...w){return Zt(E=>{let B;const X=E;try{X.processor=Ar,B=Reflect.apply(Ta,null,[X,...w])}finally{X.processor=null}return B},()=>tn(...w),"translate",E=>E[Nn](...w),E=>[io(E)],E=>Y(E))}function Os(...w){return Zt(E=>Reflect.apply(ba,null,[E,...w]),()=>Zs(...w),"number format",E=>E[Mn](...w),no,E=>k(E)||Y(E))}function Lr(...w){return Zt(E=>Reflect.apply(pa,null,[E,...w]),()=>Qs(...w),"datetime format",E=>E[Rn](...w),no,E=>k(E)||Y(E))}function kr(w){I=w,x.pluralRules=I}function _r(w,E){return Zt(()=>{if(!w)return!1;const B=k(E)?E:o.value,X=oi(B),Ue=x.messageResolver(X,w);return zt(Ue)||Tt(Ue)||k(Ue)},()=>[w],"translate exists",B=>Reflect.apply(B.te,B,[w,E]),Nd,B=>j(B))}function Nr(w){let E=null;const B=ia(x,l.value,o.value);for(let X=0;X<B.length;X++){const Ue=c.value[B[X]]||{},Fs=x.messageResolver(Ue,w);if(Fs!=null){E=Fs;break}}return E}function $i(w){const E=Nr(w);return E??(t?t.tm(w)||{}:{})}function oi(w){return c.value[w]||{}}function li(w,E){if(n){const B={[w]:E};for(const X in B)Lt(B,X)&&xi(B[X]);E=B[w]}c.value[w]=E,x.messages=c.value}function Hi(w,E){c.value[w]=c.value[w]||{};const B={[w]:E};if(n)for(const X in B)Lt(B,X)&&xi(B[X]);E=B[w],Vi(E,c.value[w]),x.messages=c.value}function Rr(w){return d.value[w]||{}}function p(w,E){d.value[w]=E,x.datetimeFormats=d.value,ma(x,w,E)}function f(w,E){d.value[w]=et(d.value[w]||{},E),x.datetimeFormats=d.value,ma(x,w,E)}function T(w){return h.value[w]||{}}function _(w,E){h.value[w]=E,x.numberFormats=h.value,wa(x,w,E)}function J(w,E){h.value[w]=et(h.value[w]||{},E),x.numberFormats=h.value,wa(x,w,E)}ro++,t&&Wi&&(Pn(t.locale,w=>{a&&(o.value=w,x.locale=w,gi(x,o.value,l.value))}),Pn(t.fallbackLocale,w=>{a&&(l.value=w,x.fallbackLocale=w,gi(x,o.value,l.value))}));const R={id:ro,locale:yt,fallbackLocale:Bt,get inheritLocale(){return a},set inheritLocale(w){a=w,w&&t&&(o.value=t.locale.value,l.value=t.fallbackLocale.value,gi(x,o.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:K,get modifiers(){return A},get pluralRules(){return I||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(w){g=w,x.missingWarn=g},get fallbackWarn(){return m},set fallbackWarn(w){m=w,x.fallbackWarn=m},get fallbackRoot(){return y},set fallbackRoot(w){y=w},get fallbackFormat(){return C},set fallbackFormat(w){C=w,x.fallbackFormat=C},get warnHtmlMessage(){return P},set warnHtmlMessage(w){P=w,x.warnHtmlMessage=w},get escapeParameter(){return S},set escapeParameter(w){S=w,x.escapeParameter=w},t:Ms,getLocaleMessage:oi,setLocaleMessage:li,mergeLocaleMessage:Hi,getPostTranslationHandler:vr,setPostTranslationHandler:yr,getMissingHandler:Tr,setMissingHandler:Er,[Ld]:kr};return R.datetimeFormats=ai,R.numberFormats=wr,R.rt=Ds,R.te=_r,R.tm=$i,R.d=Cr,R.n=xr,R.getDateTimeFormat=Rr,R.setDateTimeFormat=p,R.mergeDateTimeFormat=f,R.getNumberFormat=T,R.setNumberFormat=_,R.mergeNumberFormat=J,R[kd]=e,R[Nn]=Ir,R[Rn]=Lr,R[Mn]=Os,R}const On={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:i=>i==="parent"||i==="global",default:"parent"},i18n:{type:Object}};function Md({slots:i},t){return t.length===1&&t[0]==="default"?(i.default?i.default():[]).reduce((s,n)=>[...s,...n.type===os?n.children:[n]],[]):t.reduce((e,s)=>{const n=i[s];return n&&(e[s]=n()),e},$())}function lo(){return os}const co=xn({name:"i18n-t",props:et({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:i=>Q(i)||!isNaN(i)}},On),setup(i,t){const{slots:e,attrs:s}=t,n=i.i18n||Fn({useScope:i.scope,__useComponent:!0});return()=>{const r=Object.keys(e).filter(h=>h[0]!=="_"),a=$();i.locale&&(a.locale=i.locale),i.plural!==void 0&&(a.plural=k(i.plural)?+i.plural:i.plural);const o=Md(t,r),l=n[Nn](i.keypath,o,a),c=et($(),s),d=k(i.tag)||D(i.tag)?i.tag:lo();return Za(d,c,l)}}});function Dd(i){return Y(i)&&!k(i[0])}function uo(i,t,e,s){const{slots:n,attrs:r}=t;return()=>{const a={part:!0};let o=$();i.locale&&(a.locale=i.locale),k(i.format)?a.key=i.format:D(i.format)&&(k(i.format.key)&&(a.key=i.format.key),o=Object.keys(i.format).reduce((g,m)=>e.includes(m)?et($(),g,{[m]:i.format[m]}):g,$()));const l=s(i.value,a,o);let c=[a.key];Y(l)?c=l.map((g,m)=>{const y=n[g.type],C=y?y({[g.type]:g.value,index:m,parts:l}):[g.value];return Dd(C)&&(C[0].key=`${g.type}-${m}`),C}):k(l)&&(c=[l]);const d=et($(),r),h=k(i.tag)||D(i.tag)?i.tag:lo();return Za(h,d,c)}}const ho=xn({name:"i18n-n",props:et({value:{type:Number,required:!0},format:{type:[String,Object]}},On),setup(i,t){const e=i.i18n||Fn({useScope:i.scope,__useComponent:!0});return uo(i,t,Sa,(...s)=>e[Mn](...s))}});function Od(i,t){const e=i;if(i.mode==="composition")return e.__getInstance(t)||i.global;{const s=e.__getInstance(t);return s!=null?s.__composer:i.global.__composer}}function Fd(i){const t=a=>{const{instance:o,value:l}=a;if(!o||!o.$)throw Mt(Ct.UNEXPECTED_ERROR);const c=Od(i,o.$),d=go(l);return[Reflect.apply(c.t,c,[...po(d)]),c]};return{created:(a,o)=>{const[l,c]=t(o);Wi&&i.global===c&&(a.__i18nWatcher=Pn(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{Wi&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=go(o);a.textContent=Reflect.apply(l.t,l,[...po(c)])}},getSSRProps:a=>{const[o]=t(a);return{textContent:o}}}}function go(i){if(k(i))return{path:i};if(M(i)){if(!("path"in i))throw Mt(Ct.REQUIRED_VALUE,"path");return i}else throw Mt(Ct.INVALID_VALUE)}function po(i){const{path:t,locale:e,args:s,choice:n,plural:r}=i,a={},o=s||{};return k(e)&&(a.locale=e),Q(n)&&(a.plural=n),Q(r)&&(a.plural=r),[t,o,a]}function Ud(i,t,...e){const s=M(e[0])?e[0]:{};(j(s.globalInstall)?s.globalInstall:!0)&&([co.name,"I18nT"].forEach(r=>i.component(r,co)),[ho.name,"I18nN"].forEach(r=>i.component(r,ho)),[mo.name,"I18nD"].forEach(r=>i.component(r,mo))),i.directive("t",Fd(t))}const $d=ie("global-vue-i18n");function Hd(i={}){const t=j(i.globalInjection)?i.globalInjection:!0,e=new Map,[s,n]=Bd(i),r=ie("");function a(d){return e.get(d)||null}function o(d,h){e.set(d,h)}function l(d){e.delete(d)}const c={get mode(){return"composition"},async install(d,...h){if(d.__VUE_I18N_SYMBOL__=r,d.provide(d.__VUE_I18N_SYMBOL__,c),M(h[0])){const y=h[0];c.__composerExtend=y.__composerExtend,c.__vueI18nExtend=y.__vueI18nExtend}let g=null;t&&(g=Kd(d,c.global)),Ud(d,c,...h);const m=d.unmount;d.unmount=()=>{g&&g(),c.dispose(),m()}},get global(){return n},dispose(){s.stop()},__instances:e,__getInstance:a,__setInstance:o,__deleteInstance:l};return c}function Fn(i={}){const t=kn();if(t==null)throw Mt(Ct.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Mt(Ct.NOT_INSTALLED);const e=Wd(t),s=Gd(e),n=eo(t),r=zd(i,n);if(r==="global")return _d(s,i,n),s;if(r==="parent"){let l=jd(e,t,i.__useComponent);return l==null&&(l=s),l}const a=e;let o=a.__getInstance(t);if(o==null){const l=et({},i);"__i18n"in n&&(l.__i18n=n.__i18n),s&&(l.__root=s),o=oo(l),a.__composerExtend&&(o[Dn]=a.__composerExtend(o)),qd(a,t,o),a.__setInstance(t,o)}return o}function Bd(i,t){const e=xu(),s=e.run(()=>oo(i));if(s==null)throw Mt(Ct.UNEXPECTED_ERROR);return[e,s]}function Wd(i){const t=Ka(i.isCE?$d:i.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Mt(i.isCE?Ct.NOT_INSTALLED_WITH_PROVIDE:Ct.UNEXPECTED_ERROR);return t}function zd(i,t){return Gi(i)?"__i18n"in t?"local":"global":i.useScope?i.useScope:"local"}function Gd(i){return i.mode==="composition"?i.global:i.global.__composer}function jd(i,t,e=!1){let s=null;const n=t.root;let r=Vd(t,e);for(;r!=null;){const a=i;if(i.mode==="composition"&&(s=a.__getInstance(r)),s!=null||n===r)break;r=r.parent}return s}function Vd(i,t=!1){return i==null?null:t&&i.vnode.ctx||i.parent}function qd(i,t,e){ld(()=>{},t),cd(()=>{const s=e;i.__deleteInstance(t);const n=s[Dn];n&&(n(),delete s[Dn])},t)}const Yd=["locale","fallbackLocale","availableLocales"],fo=["t","rt","d","n","tm","te"];function Kd(i,t){const e=Object.create(null);return Yd.forEach(n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r)throw Mt(Ct.UNEXPECTED_ERROR);const a=Rt(r.value)?{get(){return r.value.value},set(o){r.value.value=o}}:{get(){return r.get&&r.get()}};Object.defineProperty(e,n,a)}),i.config.globalProperties.$i18n=e,fo.forEach(n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw Mt(Ct.UNEXPECTED_ERROR);Object.defineProperty(i.config.globalProperties,`$${n}`,r)}),()=>{delete i.config.globalProperties.$i18n,fo.forEach(n=>{delete i.config.globalProperties[`$${n}`]})}}const mo=xn({name:"i18n-d",props:et({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},On),setup(i,t){const e=i.i18n||Fn({useScope:i.scope,__useComponent:!0});return uo(i,t,fa,(...s)=>e[Rn](...s))}});if(Id(),Gc(xc),jc(Bc),Vc(ia),__INTLIFY_PROD_DEVTOOLS__){const i=Hs();i.__INTLIFY__=!0,Pc(i.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Jd={app:{title:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}}},common:{tip:{t:0,b:{t:2,i:[{t:3}],s:"💡"}},new:{t:0,b:{t:2,i:[{t:3}],s:"NEW"}},save:{t:0,b:{t:2,i:[{t:3}],s:"保存"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"取消"}},saved:{t:0,b:{t:2,i:[{t:3}],s:"保存成功"}}},errors:{getExtensionVersion:{t:0,b:{t:2,i:[{t:3}],s:"获取扩展版本失败"}},apiTestFailed:{t:0,b:{t:2,i:[{t:3}],s:"API测试失败"}},manualTranslateFailed:{t:0,b:{t:2,i:[{t:3}],s:"手动翻译失败"}},checkUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"检查更新失败"}},getUpdateInfoFailed:{t:0,b:{t:2,i:[{t:3}],s:"获取更新信息失败"}},dismissUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"忽略更新失败"}},noDownloadFile:{t:0,b:{t:2,i:[{t:3}],s:"没有找到可下载的文件"}},downloadFailed:{t:0,b:{t:2,i:[{t:3}],s:"下载失败"}},loadRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"加载规则失败"}},saveRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存规则失败"}},deleteRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"删除规则失败"}},batchDeleteRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"批量删除规则失败"}},toggleRuleStatusFailed:{t:0,b:{t:2,i:[{t:3}],s:"切换规则状态失败"}},copyFailed:{t:0,b:{t:2,i:[{t:3}],s:"复制失败"}},updateActiveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"更新活跃配置失败"}},deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"删除配置失败"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存配置失败"}},loadSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"加载设置失败"}},notifyConfigChangeFailed:{t:0,b:{t:2,i:[{t:3}],s:"通知配置更改失败"}},saveSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存设置失败"}},getHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"获取当前快捷键失败"}},checkHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"检查快捷键状态失败"}},actionFeedback:{network:{t:0,b:{t:2,i:[{t:3}],s:"网络异常，请检查连接后重试"}},business:{t:0,b:{t:2,i:[{t:3}],s:"服务处理失败，请稍后重试"}},businessWithStatus:{t:0,b:{t:2,i:[{t:3,v:"服务异常 (HTTP "},{t:4,k:"statusCode"},{t:3,v:")，请稍后重试"}]}},system:{t:0,b:{t:2,i:[{t:3}],s:"系统错误，请刷新页面后重试"}}}},settings:{selectLanguageFirst:{t:0,b:{t:2,i:[{t:3}],s:"请先选择语言"}},save:{t:0,b:{t:2,i:[{t:3}],s:"设置已保存"}},saveFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存失败"}},switchConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"切换配置失败"}}},actions:{translate:{t:0,b:{t:2,i:[{t:3}],s:"翻译"}}},language:{nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"母语"}},targetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"目标语言"}},languageLevel:{t:0,b:{t:2,i:[{t:3}],s:"语言水平"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"请选择母语"}},selectTargetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"请选择目标语言"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"常用语言"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"其他语言"}}},languageLevel:{a1:{t:0,b:{t:2,i:[{t:3}],s:"A1 入门"}},a2:{t:0,b:{t:2,i:[{t:3}],s:"A2 初级"}},b1:{t:0,b:{t:2,i:[{t:3}],s:"B1 中级"}},b2:{t:0,b:{t:2,i:[{t:3}],s:"B2 中高级"}},c1:{t:0,b:{t:2,i:[{t:3}],s:"C1 高级"}},c2:{t:0,b:{t:2,i:[{t:3}],s:"C2 精通"}}},translation:{style:{t:0,b:{t:2,i:[{t:3}],s:"翻译风格"}},default:{t:0,b:{t:2,i:[{t:3}],s:"默认"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"微妙"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"粗体"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"斜体"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"下划线"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"高亮"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"点画线"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学习模式"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"自定义"}},setCSS:{t:0,b:{t:2,i:[{t:3}],s:"设置CSS样式"}}},trigger:{mode:{t:0,b:{t:2,i:[{t:3}],s:"触发模式"}},automatic:{t:0,b:{t:2,i:[{t:3}],s:"自动"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"手动"}}},display:{originalWord:{t:0,b:{t:2,i:[{t:3}],s:"原文显示"}},visible:{t:0,b:{t:2,i:[{t:3}],s:"显示"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"隐藏"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学习模式"}}},replacement:{rate:{t:0,b:{t:2,i:[{t:3}],s:"替换比例"}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"最大长度"}}},pronunciation:{},floatingBall:{},lazyLoading:{title:{t:0,b:{t:2,i:[{t:3}],s:"懒加载翻译"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"启用懒加载翻译"}},description:{t:0,b:{t:2,i:[{t:3}],s:"滚动到段落时才进行翻译，减少资源消耗和提高性能"}},preloadDistance:{t:0,b:{t:2,i:[{t:3}],s:"预加载距离"}},preloadDistanceHint:{t:0,b:{t:2,i:[{t:3}],s:"较高的值可以捕获更多段落，但会增加资源消耗。推荐范围：50%-100%"}},performanceHintTitle:{t:0,b:{t:2,i:[{t:3}],s:"性能提示"}},performanceHintEnabled:{t:0,b:{t:2,i:[{t:3}],s:"懒加载已启用，将在您滚动时按需翻译内容，有效减少内存使用和提高页面加载速度。"}},performanceHintDisabled:{t:0,b:{t:2,i:[{t:3}],s:"懒加载未启用，将一次性翻译整个页面。建议在内容较多的页面开启懒加载。"}},note:{t:0,b:{t:2,i:[{t:3}],s:"较高值可捕获更多段落，但会增加资源消耗"}}},api:{title:{t:0,b:{t:2,i:[{t:3}],s:"模型 API 设置"}},openSettings:{t:0,b:{t:2,i:[{t:3}],s:"打开详细设置"}},currentConfig:{t:0,b:{t:2,i:[{t:3}],s:"当前配置"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"配置名称"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"服务商"}},model:{t:0,b:{t:2,i:[{t:3}],s:"模型"}},status:{t:0,b:{t:2,i:[{t:3}],s:"状态"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"已配置"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"未配置API密钥"}},test:{t:0,b:{t:2,i:[{t:3}],s:"测试"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"测试中"}},note:{t:0,b:{t:2,i:[{t:3}],s:"注意: API 密钥仅保存在本地，不会发送到其他地方。"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"如需管理配置，请打开设置中心。"}},unknownError:{t:0,b:{t:2,i:[{t:3}],s:"未知错误"}}},footer:{slogan:{t:0,b:{t:2,i:[{t:3}],s:'💖 基于"i+1"理论，让学习自然发生'}},clickForUpdate:{t:0,b:{t:2,i:[{t:3}],s:"点击查看更新详情"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"设置"}}},websiteManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"网站管理"}},description:{t:0,b:{t:2,i:[{t:3}],s:"管理翻译功能的网站规则。黑名单禁用翻译，白名单强制自动翻译。"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜索网站模式..."}},filterAll:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},filterBlacklist:{t:0,b:{t:2,i:[{t:3}],s:"黑名单"}},filterWhitelist:{t:0,b:{t:2,i:[{t:3}],s:"白名单"}},addRule:{t:0,b:{t:2,i:[{t:3}],s:"添加规则"}},deleteSelected:{t:0,b:{t:2,i:[{t:3}],s:"删除选中"}},tableType:{t:0,b:{t:2,i:[{t:3}],s:"类型"}},tablePattern:{t:0,b:{t:2,i:[{t:3}],s:"网站模式"}},tableDescription:{t:0,b:{t:2,i:[{t:3}],s:"描述"}},tableStatus:{t:0,b:{t:2,i:[{t:3}],s:"状态"}},tableActions:{t:0,b:{t:2,i:[{t:3}],s:"操作"}},blacklist:{t:0,b:{t:2,i:[{t:3}],s:"黑名单"}},whitelist:{t:0,b:{t:2,i:[{t:3}],s:"白名单"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"启用"}},disabled:{t:0,b:{t:2,i:[{t:3}],s:"禁用"}},copy:{t:0,b:{t:2,i:[{t:3}],s:"复制"}},openMenu:{t:0,b:{t:2,i:[{t:3}],s:"打开菜单"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"编辑"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"删除"}},noMatchingRules:{t:0,b:{t:2,i:[{t:3}],s:"未找到匹配的规则"}},noRules:{t:0,b:{t:2,i:[{t:3}],s:"暂无网站规则"}},tryOtherKeywords:{t:0,b:{t:2,i:[{t:3}],s:"试试其他搜索关键词"}},startAddingRules:{t:0,b:{t:2,i:[{t:3}],s:"开始添加网站规则来管理翻译行为"}},addFirstRule:{t:0,b:{t:2,i:[{t:3}],s:"添加第一个规则"}},totalRules:{t:0,b:{t:2,i:[{t:3,v:"共 "},{t:4,k:"count"},{t:3,v:" 个网站规则"}]}},showingResults:{t:0,b:{t:2,i:[{t:3,v:"，显示 "},{t:4,k:"count"},{t:3,v:" 个匹配结果"}]}},blacklistCount:{t:0,b:{t:2,i:[{t:3,v:"黑名单: "},{t:4,k:"count"}]}},whitelistCount:{t:0,b:{t:2,i:[{t:3,v:"白名单: "},{t:4,k:"count"}]}},confirmDeleteRule:{t:0,b:{t:2,i:[{t:3}],s:"确定要删除这个规则吗？"}},confirmDeleteSelected:{t:0,b:{t:2,i:[{t:3,v:"确定要删除选中的 "},{t:4,k:"count"},{t:3,v:" 个规则吗？"}]}}},websiteRuleDialog:{editTitle:{t:0,b:{t:2,i:[{t:3}],s:"编辑网站规则"}},addTitle:{t:0,b:{t:2,i:[{t:3}],s:"添加网站规则"}},pattern:{t:0,b:{t:2,i:[{t:3}],s:"网站模式"}},description:{t:0,b:{t:2,i:[{t:3}],s:"描述（可选）"}},descriptionPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"为这个规则添加一些说明..."}},patternPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例如: *://github.com/*"}},supportedPatterns:{t:0,b:{t:2,i:[{t:3}],s:"支持的模式："}},entireDomain:{t:0,b:{t:2,i:[{t:3}],s:"整个域名"}},specificPath:{t:0,b:{t:2,i:[{t:3}],s:"特定路径"}},includeSubdomain:{t:0,b:{t:2,i:[{t:3}],s:"包含子域名"}},localFile:{t:0,b:{t:2,i:[{t:3}],s:"本地文件"}},commonTemplates:{t:0,b:{t:2,i:[{t:3}],s:"常用模板："}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"取消"}},update:{t:0,b:{t:2,i:[{t:3}],s:"更新"}},add:{t:0,b:{t:2,i:[{t:3}],s:"添加"}},patternRequired:{t:0,b:{t:2,i:[{t:3}],s:"请输入网站模式"}},invalidPattern:{t:0,b:{t:2,i:[{t:3}],s:"请输入有效的URL模式"}}},ruleTypeSelector:{title:{t:0,b:{t:2,i:[{t:3}],s:"规则类型"}},blacklist:{label:{t:0,b:{t:2,i:[{t:3}],s:"黑名单"}},description:{t:0,b:{t:2,i:[{t:3}],s:"禁用翻译功能的网站"}}},whitelist:{label:{t:0,b:{t:2,i:[{t:3}],s:"白名单"}},description:{t:0,b:{t:2,i:[{t:3}],s:"强制自动翻译的网站"}}}},basicSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"基本设置"}},enableExtension:{t:0,b:{t:2,i:[{t:3}],s:"启用扩展总开关"}},enableExtensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"关闭后，所有翻译功能将停止工作。"}},disableSystemSelectionBanner:{t:0,b:{t:2,i:[{t:3}],s:"禁用 Android 系统文本菜单"}},disableSystemSelectionBannerDescription:{t:0,b:{t:2,i:[{t:3}],s:"若 app 支持，将隐藏长按后的 Copy/Search/... 横幅。即使失败也不会影响扩展功能。"}},interfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"界面语言"}},interfaceLanguageDescription:{t:0,b:{t:2,i:[{t:3}],s:"选择扩展界面的显示语言"}},selectInterfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"请选择界面语言"}},showParentheses:{t:0,b:{t:2,i:[{t:3}],s:"翻译是否显示括号"}},nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"母语设置"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"选择您的母语"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"常用语言"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"其他语言"}},translationPosition:{t:0,b:{t:2,i:[{t:3}],s:"翻译位置"}},afterWord:{t:0,b:{t:2,i:[{t:3}],s:"词后"}},beforeWord:{t:0,b:{t:2,i:[{t:3}],s:"词前"}},translationStyle:{t:0,b:{t:2,i:[{t:3}],s:"翻译样式"}},selectStyle:{t:0,b:{t:2,i:[{t:3}],s:"选择样式"}},styles:{default:{t:0,b:{t:2,i:[{t:3}],s:"默认"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"微妙"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"粗体"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"斜体"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"下划线"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"高亮"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"点画线"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学习模式"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"自定义"}}},customCSSPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例如: color: #ff0000; font-weight: bold; background-color: #f0f0f0;"}},customCSSHint:{t:0,b:{t:2,i:[{t:3}],s:"提示：这里的CSS样式将应用到翻译文本上。请不要包含选择器，直接写样式属性即可。"}},maxLengthPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例如: 400"}},previewText:{t:0,b:{t:2,i:[{t:3}],s:"这是一个示例文本，其中包含"}},originalText:{t:0,b:{t:2,i:[{t:3}],s:"原文"}},advancedSettings:{t:0,b:{t:2,i:[{t:3}],s:"高级设置"}},triggerMode:{t:0,b:{t:2,i:[{t:3}],s:"触发模式"}},triggerModes:{automatic:{t:0,b:{t:2,i:[{t:3}],s:"自动翻译"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"手动触发"}}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"最大处理长度"}},minLength:{t:0,b:{t:2,i:[{t:3}],s:"最小处理长度"}},userLevel:{t:0,b:{t:2,i:[{t:3}],s:"单词熟悉度"}},selectUserLevel:{t:0,b:{t:2,i:[{t:3}],s:"请选择您的语言水平"}},replacementRate:{t:0,b:{t:2,i:[{t:3}],s:"替换率"}},translationMode:{t:0,b:{t:2,i:[{t:3}],s:"翻译模式"}},translationModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"选择翻译方式：单词模式（部分替换）或段落模式（整段翻译）"}},translationModes:{word:{t:0,b:{t:2,i:[{t:3}],s:"单词翻译模式"}},wordDescription:{t:0,b:{t:2,i:[{t:3}],s:"智能选择部分单词进行翻译，保持原文结构，适合语言学习"}},paragraph:{t:0,b:{t:2,i:[{t:3}],s:"段落翻译模式"}},paragraphDescription:{t:0,b:{t:2,i:[{t:3}],s:"翻译整个段落，显示完整译文，适合内容理解"}}},lazyLoading:{}},hotkeySettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"快捷键设置"}},translatePageHotkey:{t:0,b:{t:2,i:[{t:3}],s:"翻译整页快捷键"}},currentHotkey:{t:0,b:{t:2,i:[{t:3}],s:"当前快捷键"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"全局设置"}},translatePageDescription:{t:0,b:{t:2,i:[{t:3}],s:"按快捷键翻译当前页面的所有文本内容"}},translateEntirePage:{t:0,b:{t:2,i:[{t:3}],s:"翻译整个页面"}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"推荐"}},quickTranslateDescription:{t:0,b:{t:2,i:[{t:3}],s:"快速翻译当前页面的所有文本"}},notSet:{t:0,b:{t:2,i:[{t:3}],s:"未设置"}},manageHotkeys:{t:0,b:{t:2,i:[{t:3}],s:"管理快捷键"}},howToModify:{t:0,b:{t:2,i:[{t:3}],s:"💡 如何修改快捷键："}},modifyInstructions:{t:0,b:{t:2,i:[{t:3}],s:'点击上方"管理快捷键"按钮，或访问 chrome://extensions/shortcuts 来自定义快捷键组合'}},currentSetting:{t:0,b:{t:2,i:[{t:3,v:"当前设置："},{t:4,k:"shortcut"}]}},suggestedSetting:{t:0,b:{t:2,i:[{t:3}],s:"建议设置：Ctrl+Shift+T (Mac: Command+Shift+T)"}},statusCheck:{t:0,b:{t:2,i:[{t:3}],s:"快捷键状态检查"}},checking:{t:0,b:{t:2,i:[{t:3}],s:"检查中..."}},checkStatus:{t:0,b:{t:2,i:[{t:3}],s:"检查状态"}},hotkeySet:{t:0,b:{t:2,i:[{t:3}],s:"快捷键已设置"}},hotkeyNotSet:{t:0,b:{t:2,i:[{t:3}],s:"快捷键未设置"}},shortcut:{t:0,b:{t:2,i:[{t:3}],s:"快捷键"}},command:{t:0,b:{t:2,i:[{t:3}],s:"命令"}},status:{t:0,b:{t:2,i:[{t:3}],s:"状态"}},pleaseSetHotkey:{t:0,b:{t:2,i:[{t:3}],s:"请设置快捷键以启用此功能"}},clickManageButton:{t:0,b:{t:2,i:[{t:3}],s:'💡 点击上方"管理快捷键"按钮进行设置，或访问'}},clickCheckButton:{t:0,b:{t:2,i:[{t:3}],s:'点击"检查状态"按钮来验证快捷键设置'}},checkFailed:{t:0,b:{t:2,i:[{t:3}],s:"检查快捷键状态失败"}}},translationSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"翻译服务配置"}},apiRequestSettings:{t:0,b:{t:2,i:[{t:3}],s:"API请求设置"}},timeoutSeconds:{t:0,b:{t:2,i:[{t:3}],s:"超时时间（秒）"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"全局设置"}},timeoutDescription:{t:0,b:{t:2,i:[{t:3}],s:"设置所有API请求的最大等待时间。填写"}},noTimeoutLimit:{t:0,b:{t:2,i:[{t:3}],s:"表示不做任何超时限制。"}},timeoutPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"输入超时时间（秒），0表示无限制"}},seconds:{t:0,b:{t:2,i:[{t:3}],s:"秒"}},unlimited:{t:0,b:{t:2,i:[{t:3}],s:"无限制"}},secondsValue:{t:0,b:{t:2,i:[{t:4,k:"value"},{t:3,v:"秒"}]}},currentActiveConfig:{t:0,b:{t:2,i:[{t:3}],s:"当前活跃配置"}},selectApiConfig:{t:0,b:{t:2,i:[{t:3}],s:"选择API配置"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"服务商"}},model:{t:0,b:{t:2,i:[{t:3}],s:"模型"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"端点"}},status:{t:0,b:{t:2,i:[{t:3}],s:"状态"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"已配置"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"未配置API密钥"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"管理配置"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"添加配置"}},connectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"连接成功"}},connectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"连接失败"}},noConfigMessage:{t:0,b:{t:2,i:[{t:3}],s:'暂无配置，点击上方"添加配置"按钮创建'}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"编辑配置"}},addNewConfig:{t:0,b:{t:2,i:[{t:3}],s:"添加新配置"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"配置名称"}},inputConfigName:{t:0,b:{t:2,i:[{t:3}],s:"输入配置名称"}},serviceProvider:{t:0,b:{t:2,i:[{t:3}],s:"服务提供商"}},selectServiceProvider:{t:0,b:{t:2,i:[{t:3}],s:"选择服务提供商"}},openai:{t:0,b:{t:2,i:[{t:3}],s:"OpenAI"}},deepseek:{t:0,b:{t:2,i:[{t:3}],s:"DeepSeek"}},siliconFlow:{t:0,b:{t:2,i:[{t:3}],s:"Silicon Flow"}},googleGemini:{t:0,b:{t:2,i:[{t:3}],s:"Google Gemini"}},proxyGemini:{t:0,b:{t:2,i:[{t:3}],s:"Proxy-Gemini"}},anthropic:{t:0,b:{t:2,i:[{t:3}],s:"Anthropic"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"自定义"}},customProviderName:{t:0,b:{t:2,i:[{t:3}],s:"自定义服务商名称"}},inputCustomProviderName:{t:0,b:{t:2,i:[{t:3}],s:"输入自定义服务商名称"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"API端点"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"https:/xxxxx/v1/chat/completions"}},proxyApiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"代理API端点"}},inputProxyEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"输入你的代理端点URL"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API密钥"}},inputApiKey:{t:0,b:{t:2,i:[{t:3}],s:"输入API密钥"}},modelName:{t:0,b:{t:2,i:[{t:3}],s:"模型名称"}},inputModelName:{t:0,b:{t:2,i:[{t:3}],s:"gpt-4o-mini"}},temperatureParam:{t:0,b:{t:2,i:[{t:3,v:"温度参数 ("},{t:4,k:"value"},{t:3,v:")"}]}},requestsPerSecond:{t:0,b:{t:2,i:[{t:3,v:"每秒请求限制 ("},{t:4,k:"value"},{t:3,v:")"}]}},noLimit:{t:0,b:{t:2,i:[{t:3}],s:"无限制"}},requestsPerSecondUnit:{t:0,b:{t:2,i:[{t:3}],s:"次/秒"}},requestsPerSecondDescription:{t:0,b:{t:2,i:[{t:3}],s:"设置每秒最大API请求数，0表示无限制。建议设置适当限制避免触发API 429错误。"}},inputRequestsPerSecond:{t:0,b:{t:2,i:[{t:3}],s:"0 = 无限制"}},enableThinkingMode:{t:0,b:{t:2,i:[{t:3}],s:"启用思考模式"}},enableThinkingModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"控制是否启用AI的思考过程输出"}},includeThinkingParam:{t:0,b:{t:2,i:[{t:3}],s:"请求传递思考参数"}},includeThinkingParamDescription:{t:0,b:{t:2,i:[{t:3}],s:"控制enable_thinking参数是否向API发送思考参数（某些模型不支持此参数）"}},sendRequestThroughBackground:{t:0,b:{t:2,i:[{t:3}],s:"通过扩展后台发送请求"}},sendRequestThroughBackgroundDescription:{t:0,b:{t:2,i:[{t:3}],s:"启用此选项可绕过CORS限制，适用于无法访问的API服务。如果遇到跨域错误，建议启用此选项"}},customApiParams:{t:0,b:{t:2,i:[{t:3}],s:"自定义API参数"}},customApiParamsDescription:{t:0,b:{t:2,i:[{t:3}],s:"支持添加额外的API参数，如top_p、presence_penalty等（JSON格式）"}},formatJson:{t:0,b:{t:2,i:[{t:3}],s:"格式化JSON"}},clear:{t:0,b:{t:2,i:[{t:3}],s:"清空"}},showExample:{t:0,b:{t:2,i:[{t:3}],s:"显示示例"}},hideExample:{t:0,b:{t:2,i:[{t:3}],s:"隐藏示例"}},jsonValid:{t:0,b:{t:2,i:[{t:3}],s:"JSON格式正确"}},jsonInvalid:{t:0,b:{t:2,i:[{t:3}],s:"JSON格式错误"}},commonParamsExample:{t:0,b:{t:2,i:[{t:3}],s:"常用参数示例："}},note:{t:0,b:{t:2,i:[{t:3}],s:"注意："}},systemParamsNote:{t:0,b:{t:2,i:[{t:3}],s:"system参数如model、messages、apiKey等将被系统保护，不会被覆盖。"}},apiConnectionTest:{t:0,b:{t:2,i:[{t:3}],s:"API连接测试"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"测试连接"}},apiConnectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"API连接成功"}},apiConnectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"API连接失败"}},detectedModel:{t:0,b:{t:2,i:[{t:3}],s:"检测到模型"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"取消"}},save:{t:0,b:{t:2,i:[{t:3}],s:"保存"}},add:{t:0,b:{t:2,i:[{t:3}],s:"添加"}},activate:{t:0,b:{t:2,i:[{t:3}],s:"激活"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"测试中"}},test:{t:0,b:{t:2,i:[{t:3}],s:"测试"}},errors:{deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"删除配置失败"}},fillRequiredFields:{t:0,b:{t:2,i:[{t:3}],s:"请填写配置名称和API密钥"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存配置失败"}}}},time:{justNow:{t:0,b:{t:2,i:[{t:3}],s:"刚刚"}},minutesAgo:{t:0,b:{t:2,i:[{t:4,k:"minutes"},{t:3,v:"分钟前"}]}},hoursAgo:{t:0,b:{t:2,i:[{t:4,k:"hours"},{t:3,v:"小时前"}]}},daysAgo:{t:0,b:{t:2,i:[{t:4,k:"days"},{t:3,v:"天前"}]}}},about:{title:{t:0,b:{t:2,i:[{t:3}],s:"关于 Side Translation"}},logoAlt:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation Logo"}},appName:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}},version:{t:0,b:{t:2,i:[{t:3,v:"版本 "},{t:4,k:"version"}]}},description:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation 是一款基于 'i+1' 可理解输入理论的浏览器扩展，旨在通过沉浸式翻译和发音学习生态系统，帮助您在日常浏览中轻松、高效地学习外语。"}},coreFeatures:{t:0,b:{t:2,i:[{t:3}],s:"核心功能"}},features:{smartTranslation:{title:{t:0,b:{t:2,i:[{t:3}],s:"智能翻译与词汇替换"}},description:{t:0,b:{t:2,i:[{t:3}],s:"支持超过20种语言，并根据您的水平智能选择词汇。"}}},pronunciation:{title:{t:0,b:{t:2,i:[{t:3}],s:"发音学习生态系统"}},description:{t:0,b:{t:2,i:[{t:3}],s:"集成音标、AI词义解释和双TTS语音朗读，提供一站式发音学习体验。"}}},learningStyles:{title:{t:0,b:{t:2,i:[{t:3}],s:"多种学习风格"}},description:{t:0,b:{t:2,i:[{t:3}],s:"提供7种不同的翻译样式（如下划线、高亮、模糊等），满足个性化学习需求。"}}},interactive:{title:{t:0,b:{t:2,i:[{t:3}],s:"交互式悬浮框"}},description:{t:0,b:{t:2,i:[{t:3}],s:"鼠标悬停即可查看单词和短语的详细发音与释义，支持嵌套查询。"}}}},versionUpdate:{t:0,b:{t:2,i:[{t:3}],s:"版本更新"}},currentVersion:{t:0,b:{t:2,i:[{t:3,v:"当前版本：v"},{t:4,k:"version"}]}},newVersionFound:{t:0,b:{t:2,i:[{t:3,v:"发现新版本：v"},{t:4,k:"version"}]}},latestVersion:{t:0,b:{t:2,i:[{t:3}],s:"已是最新版本"}},lastCheck:{t:0,b:{t:2,i:[{t:3,v:"上次检查："},{t:4,k:"time"}]}},checking:{t:0,b:{t:2,i:[{t:3}],s:"检查中..."}},checkUpdate:{t:0,b:{t:2,i:[{t:3}],s:"检查更新"}},releaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"更新说明"}},availableDownloads:{t:0,b:{t:2,i:[{t:3,v:"可用下载文件 (当前浏览器: "},{t:4,k:"browser"},{t:3,v:")"}]}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"推荐"}},downloading:{t:0,b:{t:2,i:[{t:3}],s:"下载中..."}},downloadFile:{t:0,b:{t:2,i:[{t:3}],s:"下载文件"}},viewDetails:{t:0,b:{t:2,i:[{t:3}],s:"查看详情"}},dismissVersion:{t:0,b:{t:2,i:[{t:3}],s:"忽略此版本"}},supportAndFeedback:{t:0,b:{t:2,i:[{t:3}],s:"支持与反馈"}},supportDescription:{t:0,b:{t:2,i:[{t:3}],s:"您的支持是我们不断改进的动力！如果觉得这个扩展有用，欢迎在 GitHub 上给我们一颗星，或参与到开发中来。"}},starOnGitHub:{t:0,b:{t:2,i:[{t:3}],s:"Star on GitHub"}},reportIssue:{t:0,b:{t:2,i:[{t:3}],s:"报告问题"}},contribute:{t:0,b:{t:2,i:[{t:3}],s:"参与贡献"}},noReleaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"暂无更新说明"}}},dataManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"数据管理"}},exportSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"导出设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"将您当前的所有设置导出为一个JSON文件，包括用户配置、API设置和网站管理规则。您可以保存此文件作为备份，或在其他设备上导入。"}},button:{t:0,b:{t:2,i:[{t:3}],s:"导出设置"}},success:{t:0,b:{t:2,i:[{t:3,v:"设置已成功导出！包含 "},{t:4,k:"count"},{t:3,v:" 个网站规则。"}]}},error:{t:0,b:{t:2,i:[{t:3}],s:"导出失败，请查看控制台获取详情。"}}},importSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"导入设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"从JSON文件导入设置，包括用户配置和网站管理规则。请注意：这将覆盖您当前的所有设置。支持新旧格式，旧格式只导入用户设置。"}},button:{t:0,b:{t:2,i:[{t:3}],s:"确认导入"}},selectFile:{t:0,b:{t:2,i:[{t:3}],s:"请先选择一个文件。"}},success:{t:0,b:{t:2,i:[{t:3}],s:"导入完成！"}},userSettingsSuccess:{t:0,b:{t:2,i:[{t:3}],s:"用户设置已成功导入！"}},error:{t:0,b:{t:2,i:[{t:3}],s:"导入失败，文件格式可能不正确。"}},readError:{t:0,b:{t:2,i:[{t:3}],s:"读取文件时发生错误。"}},unrecognizedFormat:{t:0,b:{t:2,i:[{t:3}],s:"无法识别的文件格式"}}},errors:{cannotReadFile:{t:0,b:{t:2,i:[{t:3}],s:"无法读取文件内容。"}}}},appearanceSettings:{floatingBall:{title:{t:0,b:{t:2,i:[{t:3}],s:"悬浮球设置"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"启用悬浮球"}},position:{t:0,b:{t:2,i:[{t:3}],s:"位置"}},opacity:{t:0,b:{t:2,i:[{t:3}],s:"透明度"}}},pronunciationTooltip:{title:{t:0,b:{t:2,i:[{t:3}],s:"悬浮词义框设置"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"启用悬浮词义框"}},description:{t:0,b:{t:2,i:[{t:3}],s:"鼠标悬停在翻译文本上时显示单词含义和发音"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl+鼠标悬停"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"按住Ctrl键并悬停时才显示词义框"}}}},options:{title:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}},toggleTheme:{t:0,b:{t:2,i:[{t:3}],s:"切换主题"}},basic:{t:0,b:{t:2,i:[{t:3}],s:"基本设置"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"翻译服务"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"网站管理"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"悬浮球"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"快捷键"}},data:{t:0,b:{t:2,i:[{t:3}],s:"导入/导出"}},about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"设置"}},basicFunctions:{t:0,b:{t:2,i:[{t:3}],s:"基础功能"}},advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"高级功能"}},managementTools:{t:0,b:{t:2,i:[{t:3}],s:"管理工具"}},navigation:{basic:{t:0,b:{t:2,i:[{t:3}],s:"基本设置"}},basicDescription:{t:0,b:{t:2,i:[{t:3}],s:"基础配置和用户偏好"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"悬浮球"}},floatingDescription:{t:0,b:{t:2,i:[{t:3}],s:"悬浮工具球配置"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"快捷键"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"翻译快捷键设置"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"翻译服务"}},translationDescription:{t:0,b:{t:2,i:[{t:3}],s:"API配置和翻译策略"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"网站管理"}},websiteManagementDescription:{t:0,b:{t:2,i:[{t:3}],s:"黑名单和白名单管理"}},data:{t:0,b:{t:2,i:[{t:3}],s:"导入/导出"}},dataDescription:{t:0,b:{t:2,i:[{t:3}],s:"配置备份和恢复"}},about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},aboutDescription:{t:0,b:{t:2,i:[{t:3}],s:"版本信息和帮助"}},tts:{t:0,b:{t:2,i:[{t:3}],s:"TTS服务"}},ttsDescription:{t:0,b:{t:2,i:[{t:3}],s:"全文朗读TTS配置"}},read:{t:0,b:{t:2,i:[{t:3}],s:"阅读助手"}},readDescription:{t:0,b:{t:2,i:[{t:3}],s:"词典卡片和阅读辅助"}},extension:{t:0,b:{t:2,i:[{t:3}],s:"扩展"}},extensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"翻译服务和扩展功能配置"}},listen:{t:0,b:{t:2,i:[{t:3}],s:"听"}},listenDescription:{t:0,b:{t:2,i:[{t:3}],s:"TTS语音朗读和听力配置"}},speak:{t:0,b:{t:2,i:[{t:3}],s:"说"}},speakDescription:{t:0,b:{t:2,i:[{t:3}],s:"口语练习和口语评测"}},write:{t:0,b:{t:2,i:[{t:3}],s:"写"}},writeDescription:{t:0,b:{t:2,i:[{t:3}],s:"写作辅助和语法检查"}}}},tts:{advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"高级功能"}},fullTextTTSBar:{t:0,b:{t:2,i:[{t:3}],s:"全文朗读底栏"}},fullTextTTSBarNote:{t:0,b:{t:2,i:[{t:3}],s:"需要您自己的 Google Cloud TTS API 密钥"}},configureTTSAPI:{t:0,b:{t:2,i:[{t:3}],s:"配置 TTS API"}}},ttsSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS服务设置"}},barToggle:{title:{t:0,b:{t:2,i:[{t:3}],s:"全文朗读TTS底栏"}},description:{t:0,b:{t:2,i:[{t:3}],s:"启用底部工具栏，使用Google Cloud TTS进行全文朗读"}}},apiConfig:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS API配置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"配置您的Google Cloud TTS API密钥"}},manage:{t:0,b:{t:2,i:[{t:3}],s:"管理"}}},currentConfig:{title:{t:0,b:{t:2,i:[{t:3}],s:"当前配置"}},name:{t:0,b:{t:2,i:[{t:3}],s:"名称"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"端点"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API密钥"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"未配置"}}},noConfig:{message:{t:0,b:{t:2,i:[{t:3}],s:"暂无TTS配置"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"添加配置"}}},configManager:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS配置管理"}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"编辑配置"}},currentActive:{t:0,b:{t:2,i:[{t:3}],s:"当前激活配置"}},selectConfig:{t:0,b:{t:2,i:[{t:3}],s:"选择配置"}},manageConfigs:{t:0,b:{t:2,i:[{t:3}],s:"管理配置"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"添加配置"}},newConfigName:{t:0,b:{t:2,i:[{t:3}],s:"新TTS配置"}},noConfigs:{t:0,b:{t:2,i:[{t:3}],s:"暂无配置"}}},configEditor:{configName:{t:0,b:{t:2,i:[{t:3}],s:"配置名称"}},configNamePlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"输入配置名称"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"API端点"}},endpointHint:{t:0,b:{t:2,i:[{t:3}],s:"默认Google Cloud TTS端点，支持自定义代理"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API密钥"}},customParams:{t:0,b:{t:2,i:[{t:3}],s:"自定义参数（可选）"}},customParamsHint:{t:0,b:{t:2,i:[{t:3}],s:"可选添加额外JSON参数，用于语音、音频配置等"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"测试连接"}},testSuccess:{t:0,b:{t:2,i:[{t:3}],s:"连接成功！"}},testFailed:{t:0,b:{t:2,i:[{t:3}],s:"连接失败"}}}},readSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"阅读助手"}},description:{t:0,b:{t:2,i:[{t:3}],s:"配置词典卡片和阅读辅助功能"}},wordCard:{title:{t:0,b:{t:2,i:[{t:3}],s:"词典卡片设置"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"启用词典卡片"}},enableDescription:{t:0,b:{t:2,i:[{t:3}],s:"选中单词时显示词典释义卡片"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"词典服务地址"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"http://148.135.95.44:9001"}},apiEndpointHint:{t:0,b:{t:2,i:[{t:3}],s:"词典API服务器地址，默认使用内置服务。"}},captureMode:{t:0,b:{t:2,i:[{t:3}],s:"取词方式"}},selectCapture:{t:0,b:{t:2,i:[{t:3}],s:"划选取词"}},selectCaptureHint:{t:0,b:{t:2,i:[{t:3}],s:"选中文本后自动查词"}},doubleClickCapture:{t:0,b:{t:2,i:[{t:3}],s:"双击取词"}},doubleClickCaptureHint:{t:0,b:{t:2,i:[{t:3}],s:"双击单词自动查词"}},showIcon:{t:0,b:{t:2,i:[{t:3}],s:"显示查词图标"}},showIconHint:{t:0,b:{t:2,i:[{t:3}],s:"选中文本后显示查词图标，点击后查词"}},cardSettings:{t:0,b:{t:2,i:[{t:3}],s:"卡片设置"}},autoSpeak:{t:0,b:{t:2,i:[{t:3}],s:"自动发音"}},autoSpeakHint:{t:0,b:{t:2,i:[{t:3}],s:"打开卡片时自动朗读单词"}},showEnglish:{t:0,b:{t:2,i:[{t:3}],s:"显示英文释义"}},showEnglishHint:{t:0,b:{t:2,i:[{t:3}],s:"在中文翻译下方显示英文释义"}}}},wordCardUI:{title:{t:0,b:{t:2,i:[{t:3}],s:"词典"}},enZh:{t:0,b:{t:2,i:[{t:3}],s:"英汉词典"}},enEn:{t:0,b:{t:2,i:[{t:3}],s:"英英词典"}},detail:{t:0,b:{t:2,i:[{t:3}],s:"详细释义"}},grammar:{past:{t:0,b:{t:2,i:[{t:3}],s:"过去式"}},pastParticiple:{t:0,b:{t:2,i:[{t:3}],s:"过去分词"}},presentParticiple:{t:0,b:{t:2,i:[{t:3}],s:"现在分词"}},thirdPerson:{t:0,b:{t:2,i:[{t:3}],s:"第三人称"}},plural:{t:0,b:{t:2,i:[{t:3}],s:"复数"}},comparative:{t:0,b:{t:2,i:[{t:3}],s:"比较级"}},superlative:{t:0,b:{t:2,i:[{t:3}],s:"最高级"}}}},extensionSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"扩展设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"配置翻译服务和通用扩展行为"}},translationService:{title:{t:0,b:{t:2,i:[{t:3}],s:"翻译服务"}},description:{t:0,b:{t:2,i:[{t:3}],s:"配置API提供商和翻译策略"}}}},listenSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"听力设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"配置语音朗读(TTS)和听力练习工具"}},paragraphTTS:{title:{t:0,b:{t:2,i:[{t:3}],s:"段落朗读"}},description:{t:0,b:{t:2,i:[{t:3}],s:"点击段落播放音频"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"启用段落朗读"}},enableDescription:{t:0,b:{t:2,i:[{t:3}],s:"点击任意段落即可朗读该段落内容"}},tipTitle:{t:0,b:{t:2,i:[{t:3}],s:"使用方法"}},tipContent:{t:0,b:{t:2,i:[{t:3}],s:"点击页面中的任意段落即可播放其音频，再次点击可停止播放。"}}},ttsService:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS服务"}},description:{t:0,b:{t:2,i:[{t:3}],s:"全文朗读和发音设置"}}}},speakSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"口语设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"口语练习和口语评测工具（即将推出）"}}},writeSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"写作设置"}},description:{t:0,b:{t:2,i:[{t:3}],s:"写作辅助和语法检查工具（即将推出）"}}},auth:{register:{t:0,b:{t:2,i:[{t:3}],s:"注册"}},login:{t:0,b:{t:2,i:[{t:3}],s:"登录"}},logout:{t:0,b:{t:2,i:[{t:3}],s:"退出登录"}},username:{t:0,b:{t:2,i:[{t:3}],s:"用户名"}},email:{t:0,b:{t:2,i:[{t:3}],s:"邮箱"}},password:{t:0,b:{t:2,i:[{t:3}],s:"密码"}},confirmPassword:{t:0,b:{t:2,i:[{t:3}],s:"确认密码"}},usernameOrEmail:{t:0,b:{t:2,i:[{t:3}],s:"用户名或邮箱"}},notLoggedIn:{t:0,b:{t:2,i:[{t:3}],s:"未登录"}},registerAccount:{t:0,b:{t:2,i:[{t:3}],s:"注册账号"}},registering:{t:0,b:{t:2,i:[{t:3}],s:"注册中..."}},loggingIn:{t:0,b:{t:2,i:[{t:3}],s:"登录中..."}},usernameMinLength:{t:0,b:{t:2,i:[{t:3}],s:"用户名至少需要3个字符"}},usernamePlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"至少3个字符"}},emailPlaceholder:{t:0,b:{t:2,i:[{t:3},{t:9},{t:3}],s:"example@email.com"}},passwordMinLength:{t:0,b:{t:2,i:[{t:3}],s:"密码至少需要8个字符"}},passwordPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"至少8个字符"}},confirmPasswordPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"再次输入密码"}},usernameOrEmailPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"输入用户名或邮箱"}},passwordInputPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"输入密码"}},invalidEmail:{t:0,b:{t:2,i:[{t:3}],s:"请输入有效的邮箱地址"}},passwordMismatch:{t:0,b:{t:2,i:[{t:3}],s:"两次输入的密码不一致"}},registerFailed:{t:0,b:{t:2,i:[{t:3}],s:"注册失败,请重试"}},loginFailed:{t:0,b:{t:2,i:[{t:3}],s:"登录失败,请检查用户名和密码"}},fillComplete:{t:0,b:{t:2,i:[{t:3}],s:"请填写完整信息"}}}},Xd={app:{title:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}}},common:{tip:{t:0,b:{t:2,i:[{t:3}],s:"💡"}},new:{t:0,b:{t:2,i:[{t:3}],s:"NEW"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Save"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}},saved:{t:0,b:{t:2,i:[{t:3}],s:"Saved successfully"}}},errors:{getExtensionVersion:{t:0,b:{t:2,i:[{t:3}],s:"Failed to get extension version"}},apiTestFailed:{t:0,b:{t:2,i:[{t:3}],s:"API test failed"}},manualTranslateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Manual translation failed"}},checkUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to check for updates"}},getUpdateInfoFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to get update information"}},dismissUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to dismiss update"}},noDownloadFile:{t:0,b:{t:2,i:[{t:3}],s:"No downloadable file found"}},downloadFailed:{t:0,b:{t:2,i:[{t:3}],s:"Download failed"}},loadRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to load rules"}},saveRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to save rule"}},deleteRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to delete rule"}},batchDeleteRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to batch delete rules"}},toggleRuleStatusFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to toggle rule status"}},copyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Copy failed"}},updateActiveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to update active configuration"}},deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to delete configuration"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to save configuration"}},loadSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to load settings"}},notifyConfigChangeFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to notify configuration change"}},saveSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to save settings"}},getHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to get current hotkey"}},checkHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to check hotkey status"}},actionFeedback:{network:{t:0,b:{t:2,i:[{t:3}],s:"Network error. Please check your connection and try again."}},business:{t:0,b:{t:2,i:[{t:3}],s:"Service request failed. Please try again later."}},businessWithStatus:{t:0,b:{t:2,i:[{t:3,v:"Service error (HTTP "},{t:4,k:"statusCode"},{t:3,v:"). Please try again later."}]}},system:{t:0,b:{t:2,i:[{t:3}],s:"System error. Please refresh the page and try again."}}}},settings:{selectLanguageFirst:{t:0,b:{t:2,i:[{t:3}],s:"Please select a language first"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Settings saved"}},saveFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to save"}},switchConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to switch configuration"}}},actions:{translate:{t:0,b:{t:2,i:[{t:3}],s:"Translate"}}},language:{nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Native Language"}},targetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Target Language"}},languageLevel:{t:0,b:{t:2,i:[{t:3}],s:"Language Level"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Please select native language"}},selectTargetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Please select target language"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Popular Languages"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Other Languages"}}},languageLevel:{a1:{t:0,b:{t:2,i:[{t:3}],s:"A1 Beginner"}},a2:{t:0,b:{t:2,i:[{t:3}],s:"A2 Elementary"}},b1:{t:0,b:{t:2,i:[{t:3}],s:"B1 Intermediate"}},b2:{t:0,b:{t:2,i:[{t:3}],s:"B2 Upper-Intermediate"}},c1:{t:0,b:{t:2,i:[{t:3}],s:"C1 Advanced"}},c2:{t:0,b:{t:2,i:[{t:3}],s:"C2 Proficient"}}},translation:{style:{t:0,b:{t:2,i:[{t:3}],s:"Translation Style"}},default:{t:0,b:{t:2,i:[{t:3}],s:"Default"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"Subtle"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"Bold"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"Italic"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"Underlined"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"Highlighted"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"Dotted"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Learning Mode"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Custom"}},setCSS:{t:0,b:{t:2,i:[{t:3}],s:"Set CSS Style"}}},trigger:{mode:{t:0,b:{t:2,i:[{t:3}],s:"Trigger Mode"}},automatic:{t:0,b:{t:2,i:[{t:3}],s:"Automatic"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"Manual"}}},display:{originalWord:{t:0,b:{t:2,i:[{t:3}],s:"Original Word Display"}},visible:{t:0,b:{t:2,i:[{t:3}],s:"Visible"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"Hidden"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Learning Mode"}}},replacement:{rate:{t:0,b:{t:2,i:[{t:3}],s:"Replacement Rate"}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"Max Length"}}},pronunciation:{},floatingBall:{},lazyLoading:{title:{t:0,b:{t:2,i:[{t:3}],s:"Lazy Loading Translation"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Enable Lazy Loading"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Translate paragraphs only when they are scrolled into view, reducing resource consumption and improving performance."}},preloadDistance:{t:0,b:{t:2,i:[{t:3}],s:"Preload Distance"}},preloadDistanceHint:{t:0,b:{t:2,i:[{t:3}],s:"Higher values can capture more paragraphs but will increase resource consumption. Recommended range: 50%-100%"}},performanceHintTitle:{t:0,b:{t:2,i:[{t:3}],s:"Performance Tip"}},performanceHintEnabled:{t:0,b:{t:2,i:[{t:3}],s:"Lazy loading is enabled. Content will be translated on-demand as you scroll, effectively reducing memory usage and improving page load speed."}},performanceHintDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Lazy loading is disabled. The entire page will be translated at once. It's recommended to enable lazy loading on content-heavy pages."}},note:{t:0,b:{t:2,i:[{t:3}],s:"Higher values capture more paragraphs but increase resource consumption"}}},api:{title:{t:0,b:{t:2,i:[{t:3}],s:"Model API Settings"}},openSettings:{t:0,b:{t:2,i:[{t:3}],s:"Open Detailed Settings"}},currentConfig:{t:0,b:{t:2,i:[{t:3}],s:"Current Configuration"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"Config Name"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"Provider"}},model:{t:0,b:{t:2,i:[{t:3}],s:"Model"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"Configured"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"API key not configured"}},test:{t:0,b:{t:2,i:[{t:3}],s:"Test"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"Testing"}},note:{t:0,b:{t:2,i:[{t:3}],s:"Note: API keys are saved locally and never sent anywhere else."}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"To manage configurations, please open the settings center."}},unknownError:{t:0,b:{t:2,i:[{t:3}],s:"Unknown error"}}},footer:{slogan:{t:0,b:{t:2,i:[{t:3}],s:'💖 Based on the "i+1" theory, let learning happen naturally'}},clickForUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Click to view update details"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"Settings"}}},websiteManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"Website Management"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Manage website rules for the translation feature. Blacklist disables translation, Whitelist forces automatic translation."}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search website patterns..."}},filterAll:{t:0,b:{t:2,i:[{t:3}],s:"All"}},filterBlacklist:{t:0,b:{t:2,i:[{t:3}],s:"Blacklist"}},filterWhitelist:{t:0,b:{t:2,i:[{t:3}],s:"Whitelist"}},addRule:{t:0,b:{t:2,i:[{t:3}],s:"Add Rule"}},deleteSelected:{t:0,b:{t:2,i:[{t:3}],s:"Delete Selected"}},tableType:{t:0,b:{t:2,i:[{t:3}],s:"Type"}},tablePattern:{t:0,b:{t:2,i:[{t:3}],s:"Website Pattern"}},tableDescription:{t:0,b:{t:2,i:[{t:3}],s:"Description"}},tableStatus:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},tableActions:{t:0,b:{t:2,i:[{t:3}],s:"Actions"}},blacklist:{t:0,b:{t:2,i:[{t:3}],s:"Blacklist"}},whitelist:{t:0,b:{t:2,i:[{t:3}],s:"Whitelist"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Enabled"}},disabled:{t:0,b:{t:2,i:[{t:3}],s:"Disabled"}},copy:{t:0,b:{t:2,i:[{t:3}],s:"Copy"}},openMenu:{t:0,b:{t:2,i:[{t:3}],s:"Open Menu"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"Delete"}},noMatchingRules:{t:0,b:{t:2,i:[{t:3}],s:"No matching rules found"}},noRules:{t:0,b:{t:2,i:[{t:3}],s:"No website rules yet"}},tryOtherKeywords:{t:0,b:{t:2,i:[{t:3}],s:"Try using other search keywords"}},startAddingRules:{t:0,b:{t:2,i:[{t:3}],s:"Start adding website rules to manage translation behavior"}},addFirstRule:{t:0,b:{t:2,i:[{t:3}],s:"Add your first rule"}},totalRules:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" total website rules"}]}},showingResults:{t:0,b:{t:2,i:[{t:3,v:", showing "},{t:4,k:"count"},{t:3,v:" matching results"}]}},blacklistCount:{t:0,b:{t:2,i:[{t:3,v:"Blacklist: "},{t:4,k:"count"}]}},whitelistCount:{t:0,b:{t:2,i:[{t:3,v:"Whitelist: "},{t:4,k:"count"}]}},confirmDeleteRule:{t:0,b:{t:2,i:[{t:3}],s:"Are you sure you want to delete this rule?"}},confirmDeleteSelected:{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to delete the selected "},{t:4,k:"count"},{t:3,v:" rules?"}]}}},websiteRuleDialog:{editTitle:{t:0,b:{t:2,i:[{t:3}],s:"Edit Website Rule"}},addTitle:{t:0,b:{t:2,i:[{t:3}],s:"Add Website Rule"}},pattern:{t:0,b:{t:2,i:[{t:3}],s:"Website Pattern"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Description (optional)"}},descriptionPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Add a note for this rule..."}},patternPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"e.g., *://github.com/*"}},supportedPatterns:{t:0,b:{t:2,i:[{t:3}],s:"Supported patterns:"}},entireDomain:{t:0,b:{t:2,i:[{t:3}],s:"Entire domain"}},specificPath:{t:0,b:{t:2,i:[{t:3}],s:"Specific path"}},includeSubdomain:{t:0,b:{t:2,i:[{t:3}],s:"Include subdomains"}},localFile:{t:0,b:{t:2,i:[{t:3}],s:"Local file"}},commonTemplates:{t:0,b:{t:2,i:[{t:3}],s:"Common templates:"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}},update:{t:0,b:{t:2,i:[{t:3}],s:"Update"}},add:{t:0,b:{t:2,i:[{t:3}],s:"Add"}},patternRequired:{t:0,b:{t:2,i:[{t:3}],s:"Please enter a website pattern"}},invalidPattern:{t:0,b:{t:2,i:[{t:3}],s:"Please enter a valid URL pattern"}}},ruleTypeSelector:{title:{t:0,b:{t:2,i:[{t:3}],s:"Rule Type"}},blacklist:{label:{t:0,b:{t:2,i:[{t:3}],s:"Blacklist"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Websites where translation is disabled"}}},whitelist:{label:{t:0,b:{t:2,i:[{t:3}],s:"Whitelist"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Websites where automatic translation is forced"}}}},basicSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Basic Settings"}},enableExtension:{t:0,b:{t:2,i:[{t:3}],s:"Enable Extension"}},enableExtensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"When turned off, all translation features will stop working."}},disableSystemSelectionBanner:{t:0,b:{t:2,i:[{t:3}],s:"Disable Android system text menu"}},disableSystemSelectionBannerDescription:{t:0,b:{t:2,i:[{t:3}],s:"If supported by the app, hide the long-press Copy/Search/... banner. Failure will not affect extension behavior."}},interfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Interface Language"}},interfaceLanguageDescription:{t:0,b:{t:2,i:[{t:3}],s:"Select the display language for the extension's interface."}},selectInterfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Please select an interface language"}},showParentheses:{t:0,b:{t:2,i:[{t:3}],s:"Show parentheses in translation"}},nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Native Language Setting"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Select your native language"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Popular Languages"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Other Languages"}},translationPosition:{t:0,b:{t:2,i:[{t:3}],s:"Translation Position"}},afterWord:{t:0,b:{t:2,i:[{t:3}],s:"After the word"}},beforeWord:{t:0,b:{t:2,i:[{t:3}],s:"Before the word"}},translationStyle:{t:0,b:{t:2,i:[{t:3}],s:"Translation Style"}},selectStyle:{t:0,b:{t:2,i:[{t:3}],s:"Select a style"}},styles:{default:{t:0,b:{t:2,i:[{t:3}],s:"Default"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"Subtle"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"Bold"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"Italic"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"Underlined"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"Highlighted"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"Dotted"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Learning Mode"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Custom"}}},customCSSPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"e.g., color: #ff0000; font-weight: bold; background-color: #f0f0f0;"}},customCSSHint:{t:0,b:{t:2,i:[{t:3}],s:"Tip: The CSS styles here will be applied to the translated text. Please write the style properties directly without selectors."}},maxLengthPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"e.g., 400"}},previewText:{t:0,b:{t:2,i:[{t:3}],s:"This is a sample text containing the "}},originalText:{t:0,b:{t:2,i:[{t:3}],s:"original text"}},advancedSettings:{t:0,b:{t:2,i:[{t:3}],s:"Advanced Settings"}},triggerMode:{t:0,b:{t:2,i:[{t:3}],s:"Trigger Mode"}},triggerModes:{automatic:{t:0,b:{t:2,i:[{t:3}],s:"Automatic Translation"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"Manual Trigger"}}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"Maximum Processing Length"}},userLevel:{t:0,b:{t:2,i:[{t:3}],s:"Word Familiarity"}},selectUserLevel:{t:0,b:{t:2,i:[{t:3}],s:"Please select your language level"}},replacementRate:{t:0,b:{t:2,i:[{t:3}],s:"Replacement Rate"}},translationMode:{t:0,b:{t:2,i:[{t:3}],s:"Translation Mode"}},translationModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Choose translation method: word mode (partial replacement) or paragraph mode (full translation)"}},translationModes:{word:{t:0,b:{t:2,i:[{t:3}],s:"Word Translation Mode"}},wordDescription:{t:0,b:{t:2,i:[{t:3}],s:"Intelligently select partial words for translation, maintaining original text structure, suitable for language learning"}},paragraph:{t:0,b:{t:2,i:[{t:3}],s:"Paragraph Translation Mode"}},paragraphDescription:{t:0,b:{t:2,i:[{t:3}],s:"Translate entire paragraphs, displaying complete translations, suitable for content comprehension"}}},lazyLoading:{}},hotkeySettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey Settings"}},translatePageHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Translate Page Hotkey"}},currentHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Current Hotkey"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"Global Setting"}},translatePageDescription:{t:0,b:{t:2,i:[{t:3}],s:"Press the hotkey to translate all text content on the current page."}},translateEntirePage:{t:0,b:{t:2,i:[{t:3}],s:"Translate Entire Page"}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"Recommended"}},quickTranslateDescription:{t:0,b:{t:2,i:[{t:3}],s:"Quickly translate all text on the current page."}},notSet:{t:0,b:{t:2,i:[{t:3}],s:"Not Set"}},manageHotkeys:{t:0,b:{t:2,i:[{t:3}],s:"Manage Hotkeys"}},howToModify:{t:0,b:{t:2,i:[{t:3}],s:"💡 How to modify hotkeys:"}},modifyInstructions:{t:0,b:{t:2,i:[{t:3}],s:'Click the "Manage Hotkeys" button above, or visit chrome://extensions/shortcuts to customize key combinations.'}},currentSetting:{t:0,b:{t:2,i:[{t:3,v:"Current setting: "},{t:4,k:"shortcut"}]}},suggestedSetting:{t:0,b:{t:2,i:[{t:3}],s:"Suggested: Ctrl+Shift+T (Mac: Command+Shift+T)"}},statusCheck:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey Status Check"}},checking:{t:0,b:{t:2,i:[{t:3}],s:"Checking..."}},checkStatus:{t:0,b:{t:2,i:[{t:3}],s:"Check Status"}},hotkeySet:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey is set"}},hotkeyNotSet:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey is not set"}},shortcut:{t:0,b:{t:2,i:[{t:3}],s:"Shortcut"}},command:{t:0,b:{t:2,i:[{t:3}],s:"Command"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},pleaseSetHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Please set a hotkey to enable this feature."}},clickManageButton:{t:0,b:{t:2,i:[{t:3}],s:'💡 Click the "Manage Hotkeys" button above to set it, or visit'}},clickCheckButton:{t:0,b:{t:2,i:[{t:3}],s:'Click the "Check Status" button to verify the hotkey settings.'}},checkFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to check hotkey status"}}},translationSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Translation Service Configuration"}},apiRequestSettings:{t:0,b:{t:2,i:[{t:3}],s:"API Request Settings"}},timeoutSeconds:{t:0,b:{t:2,i:[{t:3}],s:"Timeout (seconds)"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"Global Setting"}},timeoutDescription:{t:0,b:{t:2,i:[{t:3}],s:"Set the maximum waiting time for all API requests. Enter"}},noTimeoutLimit:{t:0,b:{t:2,i:[{t:3}],s:"for no timeout limit."}},timeoutPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Enter timeout in seconds, 0 for unlimited"}},seconds:{t:0,b:{t:2,i:[{t:3}],s:"seconds"}},unlimited:{t:0,b:{t:2,i:[{t:3}],s:"Unlimited"}},secondsValue:{t:0,b:{t:2,i:[{t:4,k:"value"},{t:3,v:" seconds"}]}},currentActiveConfig:{t:0,b:{t:2,i:[{t:3}],s:"Current Active Configuration"}},selectApiConfig:{t:0,b:{t:2,i:[{t:3}],s:"Select API Configuration"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"Provider"}},model:{t:0,b:{t:2,i:[{t:3}],s:"Model"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"Endpoint"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"Configured"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"API key not configured"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"Manage Configurations"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"Add Configuration"}},connectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"Connection successful"}},connectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"Connection failed"}},noConfigMessage:{t:0,b:{t:2,i:[{t:3}],s:'No configurations yet. Click the "Add Configuration" button above to create one.'}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"Edit Configuration"}},addNewConfig:{t:0,b:{t:2,i:[{t:3}],s:"Add New Configuration"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"Configuration Name"}},inputConfigName:{t:0,b:{t:2,i:[{t:3}],s:"Enter configuration name"}},serviceProvider:{t:0,b:{t:2,i:[{t:3}],s:"Service Provider"}},selectServiceProvider:{t:0,b:{t:2,i:[{t:3}],s:"Select a service provider"}},openai:{t:0,b:{t:2,i:[{t:3}],s:"OpenAI"}},deepseek:{t:0,b:{t:2,i:[{t:3}],s:"DeepSeek"}},siliconFlow:{t:0,b:{t:2,i:[{t:3}],s:"Silicon Flow"}},googleGemini:{t:0,b:{t:2,i:[{t:3}],s:"Google Gemini"}},proxyGemini:{t:0,b:{t:2,i:[{t:3}],s:"Proxy-Gemini"}},anthropic:{t:0,b:{t:2,i:[{t:3}],s:"Anthropic"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Custom"}},customProviderName:{t:0,b:{t:2,i:[{t:3}],s:"Custom Provider Name"}},inputCustomProviderName:{t:0,b:{t:2,i:[{t:3}],s:"Enter custom provider name"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"API Endpoint"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"https://xxxxx/v1/chat/completions"}},proxyApiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"Proxy API Endpoint"}},inputProxyEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"Enter your proxy endpoint URL"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API Key"}},inputApiKey:{t:0,b:{t:2,i:[{t:3}],s:"Enter API Key"}},modelName:{t:0,b:{t:2,i:[{t:3}],s:"Model Name"}},inputModelName:{t:0,b:{t:2,i:[{t:3}],s:"gpt-4o-mini"}},temperatureParam:{t:0,b:{t:2,i:[{t:3,v:"Temperature ("},{t:4,k:"value"},{t:3,v:")"}]}},requestsPerSecond:{t:0,b:{t:2,i:[{t:3,v:"Requests per Second Limit ("},{t:4,k:"value"},{t:3,v:")"}]}},noLimit:{t:0,b:{t:2,i:[{t:3}],s:"No Limit"}},requestsPerSecondUnit:{t:0,b:{t:2,i:[{t:3}],s:"req/s"}},requestsPerSecondDescription:{t:0,b:{t:2,i:[{t:3}],s:"Set the maximum number of API requests per second. 0 means no limit. It is recommended to set an appropriate limit to avoid API 429 errors."}},inputRequestsPerSecond:{t:0,b:{t:2,i:[{t:3}],s:"0 = unlimited"}},enableThinkingMode:{t:0,b:{t:2,i:[{t:3}],s:"Enable Thinking Mode"}},enableThinkingModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Controls whether to enable the AI's thinking process output."}},includeThinkingParam:{t:0,b:{t:2,i:[{t:3}],s:"Send thinking parameter in request"}},includeThinkingParamDescription:{t:0,b:{t:2,i:[{t:3}],s:"Controls whether the enable_thinking parameter is sent to the API (some models do not support this parameter)."}},sendRequestThroughBackground:{t:0,b:{t:2,i:[{t:3}],s:"Send requests via extension background"}},sendRequestThroughBackgroundDescription:{t:0,b:{t:2,i:[{t:3}],s:"Enable this option to bypass CORS restrictions, suitable for inaccessible API services. It is recommended to enable this if you encounter cross-domain errors."}},customApiParams:{t:0,b:{t:2,i:[{t:3}],s:"Custom API Parameters"}},customApiParamsDescription:{t:0,b:{t:2,i:[{t:3}],s:"Supports adding extra API parameters like top_p, presence_penalty, etc. (in JSON format)."}},formatJson:{t:0,b:{t:2,i:[{t:3}],s:"Format JSON"}},clear:{t:0,b:{t:2,i:[{t:3}],s:"Clear"}},showExample:{t:0,b:{t:2,i:[{t:3}],s:"Show Example"}},hideExample:{t:0,b:{t:2,i:[{t:3}],s:"Hide Example"}},jsonValid:{t:0,b:{t:2,i:[{t:3}],s:"Valid JSON format"}},jsonInvalid:{t:0,b:{t:2,i:[{t:3}],s:"Invalid JSON format"}},commonParamsExample:{t:0,b:{t:2,i:[{t:3}],s:"Common Parameters Example:"}},note:{t:0,b:{t:2,i:[{t:3}],s:"Note:"}},systemParamsNote:{t:0,b:{t:2,i:[{t:3}],s:"System parameters such as model, messages, apiKey, etc., will be protected by the system and will not be overwritten."}},apiConnectionTest:{t:0,b:{t:2,i:[{t:3}],s:"API Connection Test"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"Test Connection"}},apiConnectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"API connection successful"}},apiConnectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"API connection failed"}},detectedModel:{t:0,b:{t:2,i:[{t:3}],s:"Detected Model"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Save"}},add:{t:0,b:{t:2,i:[{t:3}],s:"Add"}},activate:{t:0,b:{t:2,i:[{t:3}],s:"Activate"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"Testing"}},test:{t:0,b:{t:2,i:[{t:3}],s:"Test"}},errors:{deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to delete configuration"}},fillRequiredFields:{t:0,b:{t:2,i:[{t:3}],s:"Please fill in the configuration name and API key"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Failed to save configuration"}}}},time:{justNow:{t:0,b:{t:2,i:[{t:3}],s:"Just now"}},minutesAgo:{t:0,b:{t:2,i:[{t:4,k:"minutes"},{t:3,v:" minutes ago"}]}},hoursAgo:{t:0,b:{t:2,i:[{t:4,k:"hours"},{t:3,v:" hours ago"}]}},daysAgo:{t:0,b:{t:2,i:[{t:4,k:"days"},{t:3,v:" days ago"}]}}},about:{title:{t:0,b:{t:2,i:[{t:3}],s:"About Side Translation"}},logoAlt:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation Logo"}},appName:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}},version:{t:0,b:{t:2,i:[{t:3,v:"Version "},{t:4,k:"version"}]}},description:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation is a browser extension based on the 'i+1' comprehensible input theory, designed to help you learn foreign languages easily and efficiently during your daily browsing through an immersive translation and pronunciation learning ecosystem."}},coreFeatures:{t:0,b:{t:2,i:[{t:3}],s:"Core Features"}},features:{smartTranslation:{title:{t:0,b:{t:2,i:[{t:3}],s:"Smart Translation & Vocabulary Replacement"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Supports over 20 languages and intelligently selects vocabulary based on your level."}}},pronunciation:{title:{t:0,b:{t:2,i:[{t:3}],s:"Pronunciation Learning Ecosystem"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Integrates phonetics, AI word definitions, and dual TTS voice reading for a one-stop pronunciation learning experience."}}},learningStyles:{title:{t:0,b:{t:2,i:[{t:3}],s:"Multiple Learning Styles"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Offers 7 different translation styles (e.g., underline, highlight, blur) to meet personalized learning needs."}}},interactive:{title:{t:0,b:{t:2,i:[{t:3}],s:"Interactive Floating Box"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Hover to view detailed pronunciation and definitions of words and phrases, with support for nested lookups."}}}},versionUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Version Update"}},currentVersion:{t:0,b:{t:2,i:[{t:3,v:"Current Version: v"},{t:4,k:"version"}]}},newVersionFound:{t:0,b:{t:2,i:[{t:3,v:"New version found: v"},{t:4,k:"version"}]}},latestVersion:{t:0,b:{t:2,i:[{t:3}],s:"You are on the latest version"}},lastCheck:{t:0,b:{t:2,i:[{t:3,v:"Last check: "},{t:4,k:"time"}]}},checking:{t:0,b:{t:2,i:[{t:3}],s:"Checking..."}},checkUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Check for Updates"}},releaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"Release Notes"}},availableDownloads:{t:0,b:{t:2,i:[{t:3,v:"Available downloads (Current browser: "},{t:4,k:"browser"},{t:3,v:")"}]}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"Recommended"}},downloading:{t:0,b:{t:2,i:[{t:3}],s:"Downloading..."}},downloadFile:{t:0,b:{t:2,i:[{t:3}],s:"Download File"}},viewDetails:{t:0,b:{t:2,i:[{t:3}],s:"View Details"}},dismissVersion:{t:0,b:{t:2,i:[{t:3}],s:"Dismiss this version"}},supportAndFeedback:{t:0,b:{t:2,i:[{t:3}],s:"Support & Feedback"}},supportDescription:{t:0,b:{t:2,i:[{t:3}],s:"Your support is our motivation to keep improving! If you find this extension useful, feel free to give us a star on GitHub or contribute to the development."}},starOnGitHub:{t:0,b:{t:2,i:[{t:3}],s:"Star on GitHub"}},reportIssue:{t:0,b:{t:2,i:[{t:3}],s:"Report an Issue"}},contribute:{t:0,b:{t:2,i:[{t:3}],s:"Contribute"}},noReleaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"No release notes available"}}},dataManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"Data Management"}},exportSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Export Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Export all your current settings to a JSON file, including user configurations, API settings, and website management rules. You can save this file as a backup or import it on other devices."}},button:{t:0,b:{t:2,i:[{t:3}],s:"Export Settings"}},success:{t:0,b:{t:2,i:[{t:3,v:"Settings exported successfully! Included "},{t:4,k:"count"},{t:3,v:" website rules."}]}},error:{t:0,b:{t:2,i:[{t:3}],s:"Export failed. Please check the console for details."}}},importSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Import Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Import settings from a JSON file, including user configurations and website management rules. Please note: This will overwrite all your current settings. Both new and old formats are supported; old formats will only import user settings."}},button:{t:0,b:{t:2,i:[{t:3}],s:"Confirm Import"}},selectFile:{t:0,b:{t:2,i:[{t:3}],s:"Please select a file first."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Import complete!"}},userSettingsSuccess:{t:0,b:{t:2,i:[{t:3}],s:"User settings imported successfully!"}},error:{t:0,b:{t:2,i:[{t:3}],s:"Import failed. The file format may be incorrect."}},readError:{t:0,b:{t:2,i:[{t:3}],s:"An error occurred while reading the file."}},unrecognizedFormat:{t:0,b:{t:2,i:[{t:3}],s:"Unrecognized file format"}}},errors:{cannotReadFile:{t:0,b:{t:2,i:[{t:3}],s:"Cannot read file content."}}}},appearanceSettings:{floatingBall:{title:{t:0,b:{t:2,i:[{t:3}],s:"Floating Ball Settings"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Enable Floating Ball"}},position:{t:0,b:{t:2,i:[{t:3}],s:"Position"}},opacity:{t:0,b:{t:2,i:[{t:3}],s:"Opacity"}}},pronunciationTooltip:{title:{t:0,b:{t:2,i:[{t:3}],s:"Floating Definition Box Settings"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Enable Floating Definition Box"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Show word meaning and pronunciation when hovering over translated text."}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl+Mouse Hover"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Show definition box only when holding Ctrl and hovering."}}}},options:{title:{t:0,b:{t:2,i:[{t:3}],s:"Side Translation"}},toggleTheme:{t:0,b:{t:2,i:[{t:3}],s:"Toggle Theme"}},basic:{t:0,b:{t:2,i:[{t:3}],s:"Basic"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"Translation"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"Websites"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"Floating Ball"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey"}},data:{t:0,b:{t:2,i:[{t:3}],s:"Import/Export"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"Settings"}},basicFunctions:{t:0,b:{t:2,i:[{t:3}],s:"Basic Functions"}},advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"Advanced Functions"}},managementTools:{t:0,b:{t:2,i:[{t:3}],s:"Management Tools"}},navigation:{basic:{t:0,b:{t:2,i:[{t:3}],s:"Basic Settings"}},basicDescription:{t:0,b:{t:2,i:[{t:3}],s:"Basic configurations and user preferences"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"Floating Ball"}},floatingDescription:{t:0,b:{t:2,i:[{t:3}],s:"Floating tool ball configuration"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Hotkey"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Translation hotkey settings"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"Translation Service"}},translationDescription:{t:0,b:{t:2,i:[{t:3}],s:"API configuration and translation strategy"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"Website Management"}},websiteManagementDescription:{t:0,b:{t:2,i:[{t:3}],s:"Blacklist and whitelist management"}},data:{t:0,b:{t:2,i:[{t:3}],s:"Import/Export"}},dataDescription:{t:0,b:{t:2,i:[{t:3}],s:"Configuration backup and recovery"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},aboutDescription:{t:0,b:{t:2,i:[{t:3}],s:"Version information and help"}},tts:{t:0,b:{t:2,i:[{t:3}],s:"TTS Service"}},ttsDescription:{t:0,b:{t:2,i:[{t:3}],s:"Full-text TTS reading configuration"}},read:{t:0,b:{t:2,i:[{t:3}],s:"Reading Helper"}},readDescription:{t:0,b:{t:2,i:[{t:3}],s:"Word card and reading assistance"}},extension:{t:0,b:{t:2,i:[{t:3}],s:"Extension"}},extensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"Translation services and extension configuration"}},listen:{t:0,b:{t:2,i:[{t:3}],s:"Listen"}},listenDescription:{t:0,b:{t:2,i:[{t:3}],s:"TTS and listening settings"}},speak:{t:0,b:{t:2,i:[{t:3}],s:"Speak"}},speakDescription:{t:0,b:{t:2,i:[{t:3}],s:"Speaking practice and evaluation"}},write:{t:0,b:{t:2,i:[{t:3}],s:"Write"}},writeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Writing assistance and grammar check"}}}},tts:{advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"Advanced Functions"}},fullTextTTSBar:{t:0,b:{t:2,i:[{t:3}],s:"Full-Text TTS Bar"}},fullTextTTSBarNote:{t:0,b:{t:2,i:[{t:3}],s:"Requires your own Google Cloud TTS API key"}},configureTTSAPI:{t:0,b:{t:2,i:[{t:3}],s:"Configure TTS API"}}},ttsSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS Service Settings"}},barToggle:{title:{t:0,b:{t:2,i:[{t:3}],s:"Full-Text TTS Bar"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Enable bottom toolbar for full-text reading with Google Cloud TTS"}}},apiConfig:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS API Configuration"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Configure your Google Cloud TTS API key"}},manage:{t:0,b:{t:2,i:[{t:3}],s:"Manage"}}},currentConfig:{title:{t:0,b:{t:2,i:[{t:3}],s:"Current Configuration"}},name:{t:0,b:{t:2,i:[{t:3}],s:"Name"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"Endpoint"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API Key"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"Not configured"}}},noConfig:{message:{t:0,b:{t:2,i:[{t:3}],s:"No TTS configuration yet"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"Add Configuration"}}},configManager:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS Configuration Manager"}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"Edit Configuration"}},currentActive:{t:0,b:{t:2,i:[{t:3}],s:"Current Active Configuration"}},selectConfig:{t:0,b:{t:2,i:[{t:3}],s:"Select a configuration"}},manageConfigs:{t:0,b:{t:2,i:[{t:3}],s:"Manage Configurations"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"Add Configuration"}},newConfigName:{t:0,b:{t:2,i:[{t:3}],s:"New TTS Config"}},noConfigs:{t:0,b:{t:2,i:[{t:3}],s:"No configurations yet"}}},configEditor:{configName:{t:0,b:{t:2,i:[{t:3}],s:"Configuration Name"}},configNamePlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Enter configuration name"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"API Endpoint"}},endpointHint:{t:0,b:{t:2,i:[{t:3}],s:"Default Google Cloud TTS endpoint, supports custom proxy"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API Key"}},customParams:{t:0,b:{t:2,i:[{t:3}],s:"Custom Parameters (Optional)"}},customParamsHint:{t:0,b:{t:2,i:[{t:3}],s:"Optional additional JSON parameters for voice, audio config, etc."}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"Test Connection"}},testSuccess:{t:0,b:{t:2,i:[{t:3}],s:"Connection successful!"}},testFailed:{t:0,b:{t:2,i:[{t:3}],s:"Connection failed"}}}},readSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Reading Helper"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Configure word card and reading assistance"}},wordCard:{title:{t:0,b:{t:2,i:[{t:3}],s:"Word Card Settings"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"Enable Word Card"}},enableDescription:{t:0,b:{t:2,i:[{t:3}],s:"Show dictionary card when selecting words"}},selectCapture:{t:0,b:{t:2,i:[{t:3}],s:"Select text to capture"}},doubleClickCapture:{t:0,b:{t:2,i:[{t:3}],s:"Double click to capture"}},autoSpeak:{t:0,b:{t:2,i:[{t:3}],s:"Auto Pronunciation"}},autoSpeakHint:{t:0,b:{t:2,i:[{t:3}],s:"Automatically play pronunciation when opening card"}},showEnglish:{t:0,b:{t:2,i:[{t:3}],s:"Show English Definition"}},showEnglishHint:{t:0,b:{t:2,i:[{t:3}],s:"Show English definition below the translation"}}}},wordCardUI:{title:{t:0,b:{t:2,i:[{t:3}],s:"Dictionary"}},enZh:{t:0,b:{t:2,i:[{t:3}],s:"English-Chinese Dictionary"}},enEn:{t:0,b:{t:2,i:[{t:3}],s:"English-English Dictionary"}},detail:{t:0,b:{t:2,i:[{t:3}],s:"Detailed Definition"}},grammar:{past:{t:0,b:{t:2,i:[{t:3}],s:"Past"}},pastParticiple:{t:0,b:{t:2,i:[{t:3}],s:"Past Participle"}},presentParticiple:{t:0,b:{t:2,i:[{t:3}],s:"Present Participle"}},thirdPerson:{t:0,b:{t:2,i:[{t:3}],s:"Third Person"}},plural:{t:0,b:{t:2,i:[{t:3}],s:"Plural"}},comparative:{t:0,b:{t:2,i:[{t:3}],s:"Comparative"}},superlative:{t:0,b:{t:2,i:[{t:3}],s:"Superlative"}}}},extensionSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Extension Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Configure translation services and general extension behavior"}},translationService:{title:{t:0,b:{t:2,i:[{t:3}],s:"Translation Service"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Configure API providers and translation strategies"}}}},listenSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Listen Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Configure Text-to-Speech (TTS) and listening practice tools"}},paragraphTTS:{title:{t:0,b:{t:2,i:[{t:3}],s:"Paragraph TTS"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Click paragraph to play audio"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"Enable Paragraph TTS"}},enableDescription:{t:0,b:{t:2,i:[{t:3}],s:"Click on any paragraph to hear it read aloud"}},tipTitle:{t:0,b:{t:2,i:[{t:3}],s:"How to use"}},tipContent:{t:0,b:{t:2,i:[{t:3}],s:"Click on any paragraph in the page to play its audio. Click again to stop."}}},ttsService:{title:{t:0,b:{t:2,i:[{t:3}],s:"TTS Service"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Full-text reading and pronunciation settings"}}}},speakSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Speak Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Speaking practice and evaluation tools (Coming Soon)"}}},writeSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Write Settings"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Writing assistance and grammar check (Coming Soon)"}}},auth:{register:{t:0,b:{t:2,i:[{t:3}],s:"Register"}},login:{t:0,b:{t:2,i:[{t:3}],s:"Login"}},logout:{t:0,b:{t:2,i:[{t:3}],s:"Logout"}},username:{t:0,b:{t:2,i:[{t:3}],s:"Username"}},email:{t:0,b:{t:2,i:[{t:3}],s:"Email"}},password:{t:0,b:{t:2,i:[{t:3}],s:"Password"}},confirmPassword:{t:0,b:{t:2,i:[{t:3}],s:"Confirm Password"}},usernameOrEmail:{t:0,b:{t:2,i:[{t:3}],s:"Username or Email"}},notLoggedIn:{t:0,b:{t:2,i:[{t:3}],s:"Not Logged In"}},registerAccount:{t:0,b:{t:2,i:[{t:3}],s:"Register Account"}},registering:{t:0,b:{t:2,i:[{t:3}],s:"Registering..."}},loggingIn:{t:0,b:{t:2,i:[{t:3}],s:"Logging in..."}},usernameMinLength:{t:0,b:{t:2,i:[{t:3}],s:"Username must be at least 3 characters"}},usernamePlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"At least 3 characters"}},emailPlaceholder:{t:0,b:{t:2,i:[{t:3},{t:9},{t:3}],s:"example@email.com"}},passwordMinLength:{t:0,b:{t:2,i:[{t:3}],s:"Password must be at least 8 characters"}},passwordPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"At least 8 characters"}},confirmPasswordPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Re-enter password"}},usernameOrEmailPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Enter username or email"}},passwordInputPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Enter password"}},invalidEmail:{t:0,b:{t:2,i:[{t:3}],s:"Please enter a valid email address"}},passwordMismatch:{t:0,b:{t:2,i:[{t:3}],s:"Passwords do not match"}},registerFailed:{t:0,b:{t:2,i:[{t:3}],s:"Registration failed, please try again"}},loginFailed:{t:0,b:{t:2,i:[{t:3}],s:"Login failed, please check your username and password"}},fillComplete:{t:0,b:{t:2,i:[{t:3}],s:"Please fill in all fields"}}}},Qd={app:{title:{t:0,b:{t:2,i:[{t:3}],s:"illa-helper"}}},common:{tip:{t:0,b:{t:2,i:[{t:3}],s:"💡"}},new:{t:0,b:{t:2,i:[{t:3}],s:"NEW"}}},errors:{getExtensionVersion:{t:0,b:{t:2,i:[{t:3}],s:"拡張機能のバージョン取得に失敗しました"}},apiTestFailed:{t:0,b:{t:2,i:[{t:3}],s:"APIテストに失敗しました"}},manualTranslateFailed:{t:0,b:{t:2,i:[{t:3}],s:"手動翻訳に失敗しました"}},checkUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"更新の確認に失敗しました"}},getUpdateInfoFailed:{t:0,b:{t:2,i:[{t:3}],s:"更新情報の取得に失敗しました"}},dismissUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"更新の無視に失敗しました"}},noDownloadFile:{t:0,b:{t:2,i:[{t:3}],s:"ダウンロード可能なファイルが見つかりません"}},downloadFailed:{t:0,b:{t:2,i:[{t:3}],s:"ダウンロードに失敗しました"}},loadRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"ルールの読み込みに失敗しました"}},saveRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"ルールの保存に失敗しました"}},deleteRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"ルールの削除に失敗しました"}},batchDeleteRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"ルールの一括削除に失敗しました"}},toggleRuleStatusFailed:{t:0,b:{t:2,i:[{t:3}],s:"ルールの状態切り替えに失敗しました"}},copyFailed:{t:0,b:{t:2,i:[{t:3}],s:"コピーに失敗しました"}},updateActiveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"アクティブな設定の更新に失敗しました"}},deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の削除に失敗しました"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の保存に失敗しました"}},loadSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の読み込みに失敗しました"}},notifyConfigChangeFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定変更の通知に失敗しました"}},saveSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の保存に失敗しました"}},getHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"現在のホットキーの取得に失敗しました"}},checkHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーの状態確認に失敗しました"}}},settings:{selectLanguageFirst:{t:0,b:{t:2,i:[{t:3}],s:"まず言語を選択してください"}},save:{t:0,b:{t:2,i:[{t:3}],s:"設定が保存されました"}},saveFailed:{t:0,b:{t:2,i:[{t:3}],s:"保存に失敗しました"}},switchConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の切り替えに失敗しました"}}},actions:{translate:{t:0,b:{t:2,i:[{t:3}],s:"翻訳"}}},language:{nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"母国語"}},targetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"目標言語"}},languageLevel:{t:0,b:{t:2,i:[{t:3}],s:"言語レベル"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"母国語を選択してください"}},selectTargetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"目標言語を選択してください"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"よく使われる言語"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"その他の言語"}}},languageLevel:{a1:{t:0,b:{t:2,i:[{t:3}],s:"A1 入門"}},a2:{t:0,b:{t:2,i:[{t:3}],s:"A2 初級"}},b1:{t:0,b:{t:2,i:[{t:3}],s:"B1 中級"}},b2:{t:0,b:{t:2,i:[{t:3}],s:"B2 中上級"}},c1:{t:0,b:{t:2,i:[{t:3}],s:"C1 上級"}},c2:{t:0,b:{t:2,i:[{t:3}],s:"C2 マスター"}}},translation:{style:{t:0,b:{t:2,i:[{t:3}],s:"翻訳スタイル"}},default:{t:0,b:{t:2,i:[{t:3}],s:"デフォルト"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"控えめ"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"太字"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"斜体"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"下線"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"ハイライト"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"点線"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学習モード"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"カスタム"}},setCSS:{t:0,b:{t:2,i:[{t:3}],s:"CSSスタイルを設定"}}},trigger:{mode:{t:0,b:{t:2,i:[{t:3}],s:"トリガーモード"}},automatic:{t:0,b:{t:2,i:[{t:3}],s:"自動"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"手動"}}},display:{originalWord:{t:0,b:{t:2,i:[{t:3}],s:"原文表示"}},visible:{t:0,b:{t:2,i:[{t:3}],s:"表示"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"非表示"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学習モード"}}},replacement:{rate:{t:0,b:{t:2,i:[{t:3}],s:"置換率"}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"最大長"}}},pronunciation:{},floatingBall:{},lazyLoading:{title:{t:0,b:{t:2,i:[{t:3}],s:"遅延読み込み翻訳"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"遅延読み込み翻訳を有効にする"}},description:{t:0,b:{t:2,i:[{t:3}],s:"段落までスクロールした時に翻訳を行い、リソース消費を削減しパフォーマンスを向上させます"}},preloadDistance:{t:0,b:{t:2,i:[{t:3}],s:"事前読み込み距離"}},preloadDistanceHint:{t:0,b:{t:2,i:[{t:3}],s:"値を大きくするとより多くの段落をキャプチャできますが、リソース消費が増加します。推奨範囲：50%-100%"}},performanceHintTitle:{t:0,b:{t:2,i:[{t:3}],s:"パフォーマンスヒント"}},performanceHintEnabled:{t:0,b:{t:2,i:[{t:3}],s:"遅延読み込みが有効です。スクロールに応じてコンテンツを翻訳し、メモリ使用量を効果的に削減し、ページの読み込み速度を向上させます。"}},performanceHintDisabled:{t:0,b:{t:2,i:[{t:3}],s:"遅延読み込みが無効です。ページ全体を一度に翻訳します。コンテンツの多いページでは遅延読み込みを有効にすることをお勧めします。"}},note:{t:0,b:{t:2,i:[{t:3}],s:"値を大きくするとより多くの段落をキャプチャできますが、リソース消費が増加します"}}},api:{title:{t:0,b:{t:2,i:[{t:3}],s:"モデルAPI設定"}},openSettings:{t:0,b:{t:2,i:[{t:3}],s:"詳細設定を開く"}},currentConfig:{t:0,b:{t:2,i:[{t:3}],s:"現在の設定"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"設定名"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"プロバイダー"}},model:{t:0,b:{t:2,i:[{t:3}],s:"モデル"}},status:{t:0,b:{t:2,i:[{t:3}],s:"ステータス"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"設定済み"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"APIキーが未設定"}},test:{t:0,b:{t:2,i:[{t:3}],s:"テスト"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"テスト中"}},note:{t:0,b:{t:2,i:[{t:3}],s:"注意：APIキーはローカルにのみ保存され、他の場所には送信されません。"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"設定を管理するには、設定センターを開いてください。"}},unknownError:{t:0,b:{t:2,i:[{t:3}],s:"不明なエラー"}}},footer:{slogan:{t:0,b:{t:2,i:[{t:3}],s:"💖「i+1」理論に基づき、学習を自然に発生させる"}},clickForUpdate:{t:0,b:{t:2,i:[{t:3}],s:"クリックして更新詳細を表示"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"設定"}}},websiteManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイト管理"}},description:{t:0,b:{t:2,i:[{t:3}],s:"翻訳機能のウェブサイトルールを管理します。ブラックリストは翻訳を無効にし、ホワイトリストは自動翻訳を強制します。"}},search:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトパターンを検索..."}},filterAll:{t:0,b:{t:2,i:[{t:3}],s:"すべて"}},filterBlacklist:{t:0,b:{t:2,i:[{t:3}],s:"ブラックリスト"}},filterWhitelist:{t:0,b:{t:2,i:[{t:3}],s:"ホワイトリスト"}},addRule:{t:0,b:{t:2,i:[{t:3}],s:"ルールを追加"}},deleteSelected:{t:0,b:{t:2,i:[{t:3}],s:"選択項目を削除"}},tableType:{t:0,b:{t:2,i:[{t:3}],s:"タイプ"}},tablePattern:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトパターン"}},tableDescription:{t:0,b:{t:2,i:[{t:3}],s:"説明"}},tableStatus:{t:0,b:{t:2,i:[{t:3}],s:"ステータス"}},tableActions:{t:0,b:{t:2,i:[{t:3}],s:"操作"}},blacklist:{t:0,b:{t:2,i:[{t:3}],s:"ブラックリスト"}},whitelist:{t:0,b:{t:2,i:[{t:3}],s:"ホワイトリスト"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"有効"}},disabled:{t:0,b:{t:2,i:[{t:3}],s:"無効"}},copy:{t:0,b:{t:2,i:[{t:3}],s:"コピー"}},openMenu:{t:0,b:{t:2,i:[{t:3}],s:"メニューを開く"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"編集"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"削除"}},noMatchingRules:{t:0,b:{t:2,i:[{t:3}],s:"一致するルールが見つかりません"}},noRules:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトルールがありません"}},tryOtherKeywords:{t:0,b:{t:2,i:[{t:3}],s:"他の検索キーワードを試してください"}},startAddingRules:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトルールを追加して翻訳の動作を管理しましょう"}},addFirstRule:{t:0,b:{t:2,i:[{t:3}],s:"最初のルールを追加"}},totalRules:{t:0,b:{t:2,i:[{t:3,v:"合計 "},{t:4,k:"count"},{t:3,v:" 件のウェブサイトルール"}]}},showingResults:{t:0,b:{t:2,i:[{t:3,v:"、"},{t:4,k:"count"},{t:3,v:" 件の一致結果を表示中"}]}},blacklistCount:{t:0,b:{t:2,i:[{t:3,v:"ブラックリスト: "},{t:4,k:"count"}]}},whitelistCount:{t:0,b:{t:2,i:[{t:3,v:"ホワイトリスト: "},{t:4,k:"count"}]}},confirmDeleteRule:{t:0,b:{t:2,i:[{t:3}],s:"このルールを削除してもよろしいですか？"}},confirmDeleteSelected:{t:0,b:{t:2,i:[{t:3,v:"選択した "},{t:4,k:"count"},{t:3,v:" 件のルールを削除してもよろしいですか？"}]}}},websiteRuleDialog:{editTitle:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトルールを編集"}},addTitle:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトルールを追加"}},pattern:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトパターン"}},description:{t:0,b:{t:2,i:[{t:3}],s:"説明（任意）"}},descriptionPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"このルールの説明を追加..."}},patternPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例: *://github.com/*"}},supportedPatterns:{t:0,b:{t:2,i:[{t:3}],s:"サポートされているパターン："}},entireDomain:{t:0,b:{t:2,i:[{t:3}],s:"ドメイン全体"}},specificPath:{t:0,b:{t:2,i:[{t:3}],s:"特定のパス"}},includeSubdomain:{t:0,b:{t:2,i:[{t:3}],s:"サブドメインを含む"}},localFile:{t:0,b:{t:2,i:[{t:3}],s:"ローカルファイル"}},commonTemplates:{t:0,b:{t:2,i:[{t:3}],s:"よく使われるテンプレート："}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"キャンセル"}},update:{t:0,b:{t:2,i:[{t:3}],s:"更新"}},add:{t:0,b:{t:2,i:[{t:3}],s:"追加"}},patternRequired:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイトパターンを入力してください"}},invalidPattern:{t:0,b:{t:2,i:[{t:3}],s:"有効なURLパターンを入力してください"}}},ruleTypeSelector:{title:{t:0,b:{t:2,i:[{t:3}],s:"ルールタイプ"}},blacklist:{label:{t:0,b:{t:2,i:[{t:3}],s:"ブラックリスト"}},description:{t:0,b:{t:2,i:[{t:3}],s:"翻訳機能を無効にするウェブサイト"}}},whitelist:{label:{t:0,b:{t:2,i:[{t:3}],s:"ホワイトリスト"}},description:{t:0,b:{t:2,i:[{t:3}],s:"自動翻訳を強制するウェブサイト"}}}},basicSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"基本設定"}},enableExtension:{t:0,b:{t:2,i:[{t:3}],s:"拡張機能の総合スイッチを有効にする"}},enableExtensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"オフにすると、すべての翻訳機能が停止します。"}},interfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"インターフェース言語"}},interfaceLanguageDescription:{t:0,b:{t:2,i:[{t:3}],s:"拡張機能インターフェースの表示言語を選択します"}},selectInterfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"インターフェース言語を選択してください"}},showParentheses:{t:0,b:{t:2,i:[{t:3}],s:"翻訳に括弧を表示するか"}},nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"母国語設定"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"あなたの母国語を選択してください"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"よく使われる言語"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"その他の言語"}},translationPosition:{t:0,b:{t:2,i:[{t:3}],s:"翻訳の位置"}},afterWord:{t:0,b:{t:2,i:[{t:3}],s:"単語の後"}},beforeWord:{t:0,b:{t:2,i:[{t:3}],s:"単語の前"}},translationStyle:{t:0,b:{t:2,i:[{t:3}],s:"翻訳スタイル"}},selectStyle:{t:0,b:{t:2,i:[{t:3}],s:"スタイルを選択"}},styles:{default:{t:0,b:{t:2,i:[{t:3}],s:"デフォルト"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"控えめ"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"太字"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"斜体"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"下線"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"ハイライト"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"点線"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"学習モード"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"カスタム"}}},customCSSPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例: color: #ff0000; font-weight: bold; background-color: #f0f0f0;"}},customCSSHint:{t:0,b:{t:2,i:[{t:3}],s:"ヒント：ここのCSSスタイルは翻訳テキストに適用されます。セレクタは含めず、スタイルプロパティのみを記述してください。"}},maxLengthPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"例: 400"}},previewText:{t:0,b:{t:2,i:[{t:3}],s:"これはサンプルテキストで、"}},originalText:{t:0,b:{t:2,i:[{t:3}],s:"原文"}},advancedSettings:{t:0,b:{t:2,i:[{t:3}],s:"詳細設定"}},triggerMode:{t:0,b:{t:2,i:[{t:3}],s:"トリガーモード"}},triggerModes:{automatic:{t:0,b:{t:2,i:[{t:3}],s:"自動翻訳"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"手動トリガー"}}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"最大処理長"}},userLevel:{t:0,b:{t:2,i:[{t:3}],s:"単語の習熟度"}},selectUserLevel:{t:0,b:{t:2,i:[{t:3}],s:"言語レベルを選択してください"}},replacementRate:{t:0,b:{t:2,i:[{t:3}],s:"置換率"}},translationMode:{t:0,b:{t:2,i:[{t:3}],s:"翻訳モード"}},translationModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"翻訳方法を選択：単語モード（部分置換）または段落モード（全文翻訳）"}},translationModes:{word:{t:0,b:{t:2,i:[{t:3}],s:"単語翻訳モード"}},wordDescription:{t:0,b:{t:2,i:[{t:3}],s:"部分的な単語を知的に選択して翻訳し、原文の構造を維持、言語学習に適している"}},paragraph:{t:0,b:{t:2,i:[{t:3}],s:"段落翻訳モード"}},paragraphDescription:{t:0,b:{t:2,i:[{t:3}],s:"全文を翻訳し、完全な訳文を表示して、内容を理解しやすくしてください。"}}},lazyLoading:{}},hotkeySettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"ホットキー設定"}},translatePageHotkey:{t:0,b:{t:2,i:[{t:3}],s:"ページ全体を翻訳するホットキー"}},currentHotkey:{t:0,b:{t:2,i:[{t:3}],s:"現在のホットキー"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"グローバル設定"}},translatePageDescription:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーを押して現在のページのすべてのテキストコンテンツを翻訳します"}},translateEntirePage:{t:0,b:{t:2,i:[{t:3}],s:"ページ全体を翻訳"}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"推奨"}},quickTranslateDescription:{t:0,b:{t:2,i:[{t:3}],s:"現在のページのすべてのテキストを素早く翻訳します"}},notSet:{t:0,b:{t:2,i:[{t:3}],s:"未設定"}},manageHotkeys:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーを管理"}},howToModify:{t:0,b:{t:2,i:[{t:3}],s:"💡 ホットキーの変更方法："}},modifyInstructions:{t:0,b:{t:2,i:[{t:3}],s:"上の「ホットキーを管理」ボタンをクリックするか、chrome://extensions/shortcuts にアクセスしてホットキーの組み合わせをカスタマイズしてください"}},currentSetting:{t:0,b:{t:2,i:[{t:3,v:"現在の設定："},{t:4,k:"shortcut"}]}},suggestedSetting:{t:0,b:{t:2,i:[{t:3}],s:"推奨設定：Ctrl+Shift+T (Mac: Command+Shift+T)"}},statusCheck:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーの状態確認"}},checking:{t:0,b:{t:2,i:[{t:3}],s:"確認中..."}},checkStatus:{t:0,b:{t:2,i:[{t:3}],s:"状態を確認"}},hotkeySet:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーが設定されています"}},hotkeyNotSet:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーが設定されていません"}},shortcut:{t:0,b:{t:2,i:[{t:3}],s:"ショートカット"}},command:{t:0,b:{t:2,i:[{t:3}],s:"コマンド"}},status:{t:0,b:{t:2,i:[{t:3}],s:"ステータス"}},pleaseSetHotkey:{t:0,b:{t:2,i:[{t:3}],s:"この機能を有効にするにはホットキーを設定してください"}},clickManageButton:{t:0,b:{t:2,i:[{t:3}],s:"💡 上の「ホットキーを管理」ボタンをクリックして設定するか、"}},clickCheckButton:{t:0,b:{t:2,i:[{t:3}],s:"「状態を確認」ボタンをクリックしてホットキー設定を検証してください"}},checkFailed:{t:0,b:{t:2,i:[{t:3}],s:"ホットキーの状態確認に失敗しました"}}},translationSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"翻訳サービス設定"}},apiRequestSettings:{t:0,b:{t:2,i:[{t:3}],s:"APIリクエスト設定"}},timeoutSeconds:{t:0,b:{t:2,i:[{t:3}],s:"タイムアウト時間（秒）"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"グローバル設定"}},timeoutDescription:{t:0,b:{t:2,i:[{t:3}],s:"すべてのAPIリクエストの最大待機時間を設定します。入力"}},noTimeoutLimit:{t:0,b:{t:2,i:[{t:3}],s:"はタイムアウト制限なしを意味します。"}},timeoutPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"タイムアウト時間を入力（秒）、0は無制限"}},seconds:{t:0,b:{t:2,i:[{t:3}],s:"秒"}},unlimited:{t:0,b:{t:2,i:[{t:3}],s:"無制限"}},secondsValue:{t:0,b:{t:2,i:[{t:4,k:"value"},{t:3,v:"秒"}]}},currentActiveConfig:{t:0,b:{t:2,i:[{t:3}],s:"現在アクティブな設定"}},selectApiConfig:{t:0,b:{t:2,i:[{t:3}],s:"API設定を選択"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"プロバイダー"}},model:{t:0,b:{t:2,i:[{t:3}],s:"モデル"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"エンドポイント"}},status:{t:0,b:{t:2,i:[{t:3}],s:"ステータス"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"設定済み"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"APIキーが未設定"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"設定を管理"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"設定を追加"}},connectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"接続に成功しました"}},connectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"接続に失敗しました"}},noConfigMessage:{t:0,b:{t:2,i:[{t:3}],s:"設定がありません。上の「設定を追加」ボタンをクリックして作成してください"}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"設定を編集"}},addNewConfig:{t:0,b:{t:2,i:[{t:3}],s:"新しい設定を追加"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"設定名"}},inputConfigName:{t:0,b:{t:2,i:[{t:3}],s:"設定名を入力"}},serviceProvider:{t:0,b:{t:2,i:[{t:3}],s:"サービスプロバイダー"}},selectServiceProvider:{t:0,b:{t:2,i:[{t:3}],s:"サービスプロバイダーを選択"}},openai:{t:0,b:{t:2,i:[{t:3}],s:"OpenAI"}},deepseek:{t:0,b:{t:2,i:[{t:3}],s:"DeepSeek"}},siliconFlow:{t:0,b:{t:2,i:[{t:3}],s:"Silicon Flow"}},googleGemini:{t:0,b:{t:2,i:[{t:3}],s:"Google Gemini"}},proxyGemini:{t:0,b:{t:2,i:[{t:3}],s:"Proxy-Gemini"}},anthropic:{t:0,b:{t:2,i:[{t:3}],s:"Anthropic"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"カスタム"}},customProviderName:{t:0,b:{t:2,i:[{t:3}],s:"カスタムプロバイダー名"}},inputCustomProviderName:{t:0,b:{t:2,i:[{t:3}],s:"カスタムプロバイダー名を入力"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"APIエンドポイント"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"https:/xxxxx/v1/chat/completions"}},proxyApiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"プロキシAPIエンドポイント"}},inputProxyEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"プロキシエンドポイントのURLを入力"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"APIキー"}},inputApiKey:{t:0,b:{t:2,i:[{t:3}],s:"APIキーを入力"}},modelName:{t:0,b:{t:2,i:[{t:3}],s:"モデル名"}},inputModelName:{t:0,b:{t:2,i:[{t:3}],s:"gpt-4o-mini"}},temperatureParam:{t:0,b:{t:2,i:[{t:3,v:"温度パラメータ ("},{t:4,k:"value"},{t:3,v:")"}]}},requestsPerSecond:{t:0,b:{t:2,i:[{t:3,v:"1秒あたりのリクエスト制限 ("},{t:4,k:"value"},{t:3,v:")"}]}},noLimit:{t:0,b:{t:2,i:[{t:3}],s:"無制限"}},requestsPerSecondUnit:{t:0,b:{t:2,i:[{t:3}],s:"回/秒"}},requestsPerSecondDescription:{t:0,b:{t:2,i:[{t:3}],s:"1秒あたりの最大APIリクエスト数を設定します。0は無制限を意味します。API 429エラーを避けるために適切な制限を設定することをお勧めします。"}},inputRequestsPerSecond:{t:0,b:{t:2,i:[{t:3}],s:"0 = 無制限"}},enableThinkingMode:{t:0,b:{t:2,i:[{t:3}],s:"思考モードを有効にする"}},enableThinkingModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"AIの思考プロセスの出力を有効にするかどうかを制御します"}},includeThinkingParam:{t:0,b:{t:2,i:[{t:3}],s:"リクエストに思考パラメータを含める"}},includeThinkingParamDescription:{t:0,b:{t:2,i:[{t:3}],s:"enable_thinkingパラメータをAPIに送信するかどうかを制御します（一部のモデルはこのパラメータをサポートしていません）"}},sendRequestThroughBackground:{t:0,b:{t:2,i:[{t:3}],s:"拡張機能のバックグラウンド経由でリクエストを送信"}},sendRequestThroughBackgroundDescription:{t:0,b:{t:2,i:[{t:3}],s:"このオプションを有効にするとCORS制限を回避でき、アクセスできないAPIサービスに適用されます。クロスオリジンエラーが発生した場合は、このオプションを有効にすることをお勧めします"}},customApiParams:{t:0,b:{t:2,i:[{t:3}],s:"カスタムAPIパラメータ"}},customApiParamsDescription:{t:0,b:{t:2,i:[{t:3}],s:"top_p、presence_penaltyなどの追加APIパラメータをサポートします（JSON形式）"}},formatJson:{t:0,b:{t:2,i:[{t:3}],s:"JSONをフォーマット"}},clear:{t:0,b:{t:2,i:[{t:3}],s:"クリア"}},showExample:{t:0,b:{t:2,i:[{t:3}],s:"例を表示"}},hideExample:{t:0,b:{t:2,i:[{t:3}],s:"例を非表示"}},jsonValid:{t:0,b:{t:2,i:[{t:3}],s:"JSON形式が正しいです"}},jsonInvalid:{t:0,b:{t:2,i:[{t:3}],s:"JSON形式が間違っています"}},commonParamsExample:{t:0,b:{t:2,i:[{t:3}],s:"よく使われるパラメータの例："}},note:{t:0,b:{t:2,i:[{t:3}],s:"注意："}},systemParamsNote:{t:0,b:{t:2,i:[{t:3}],s:"model、messages、apiKeyなどのシステムパラメータは保護され、上書きされません。"}},apiConnectionTest:{t:0,b:{t:2,i:[{t:3}],s:"API接続テスト"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"接続をテスト"}},apiConnectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"API接続に成功しました"}},apiConnectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"API接続に失敗しました"}},detectedModel:{t:0,b:{t:2,i:[{t:3}],s:"検出されたモデル"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"キャンセル"}},save:{t:0,b:{t:2,i:[{t:3}],s:"保存"}},add:{t:0,b:{t:2,i:[{t:3}],s:"追加"}},activate:{t:0,b:{t:2,i:[{t:3}],s:"有効化"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"テスト中"}},test:{t:0,b:{t:2,i:[{t:3}],s:"テスト"}},errors:{deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の削除に失敗しました"}},fillRequiredFields:{t:0,b:{t:2,i:[{t:3}],s:"設定名とAPIキーを入力してください"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"設定の保存に失敗しました"}}}},time:{justNow:{t:0,b:{t:2,i:[{t:3}],s:"今"}},minutesAgo:{t:0,b:{t:2,i:[{t:4,k:"minutes"},{t:3,v:"分前"}]}},hoursAgo:{t:0,b:{t:2,i:[{t:4,k:"hours"},{t:3,v:"時間前"}]}},daysAgo:{t:0,b:{t:2,i:[{t:4,k:"days"},{t:3,v:"日前"}]}}},about:{title:{t:0,b:{t:2,i:[{t:3}],s:"イマージョン言語学習アシスタント (illa-helper) について"}},logoAlt:{t:0,b:{t:2,i:[{t:3}],s:"イマージョン言語学習アシスタント illa-helper ロゴ"}},appName:{t:0,b:{t:2,i:[{t:3}],s:"イマージョン言語学習アシスタント (illa-helper)"}},version:{t:0,b:{t:2,i:[{t:3,v:"バージョン "},{t:4,k:"version"}]}},description:{t:0,b:{t:2,i:[{t:3}],s:"イマージョン言語学習アシスタント (illa-helper) は、「i+1」可解インプット理論に基づくブラウザ拡張機能です。没入型翻訳と発音学習エコシステムを通じて、日常のブラウジング中に簡単かつ効率的に外国語を学ぶお手伝いをします。"}},coreFeatures:{t:0,b:{t:2,i:[{t:3}],s:"主な機能"}},features:{smartTranslation:{title:{t:0,b:{t:2,i:[{t:3}],s:"スマート翻訳と単語置換"}},description:{t:0,b:{t:2,i:[{t:3}],s:"20以上の言語をサポートし、あなたのレベルに応じて単語をスマートに選択します。"}}},pronunciation:{title:{t:0,b:{t:2,i:[{t:3}],s:"発音学習エコシステム"}},description:{t:0,b:{t:2,i:[{t:3}],s:"発音記号、AIによる単語の意味解説、デュアルTTS音声読み上げを統合し、ワンストップの発音学習体験を提供します。"}}},learningStyles:{title:{t:0,b:{t:2,i:[{t:3}],s:"多様な学習スタイル"}},description:{t:0,b:{t:2,i:[{t:3}],s:"下線、ハイライト、ぼかしなど7種類の異なる翻訳スタイルを提供し、個別化された学習ニーズに応えます。"}}},interactive:{title:{t:0,b:{t:2,i:[{t:3}],s:"インタラクティブなフローティングボックス"}},description:{t:0,b:{t:2,i:[{t:3}],s:"マウスをホバーするだけで単語やフレーズの詳細な発音と意味を確認でき、ネストされた検索もサポートします。"}}}},versionUpdate:{t:0,b:{t:2,i:[{t:3}],s:"バージョン更新"}},currentVersion:{t:0,b:{t:2,i:[{t:3,v:"現在のバージョン：v"},{t:4,k:"version"}]}},newVersionFound:{t:0,b:{t:2,i:[{t:3,v:"新しいバージョンが見つかりました：v"},{t:4,k:"version"}]}},latestVersion:{t:0,b:{t:2,i:[{t:3}],s:"最新バージョンです"}},lastCheck:{t:0,b:{t:2,i:[{t:3,v:"最終確認："},{t:4,k:"time"}]}},checking:{t:0,b:{t:2,i:[{t:3}],s:"確認中..."}},checkUpdate:{t:0,b:{t:2,i:[{t:3}],s:"更新を確認"}},releaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"リリースノート"}},availableDownloads:{t:0,b:{t:2,i:[{t:3,v:"利用可能なダウンロードファイル (現在のブラウザ: "},{t:4,k:"browser"},{t:3,v:")"}]}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"推奨"}},downloading:{t:0,b:{t:2,i:[{t:3}],s:"ダウンロード中..."}},downloadFile:{t:0,b:{t:2,i:[{t:3}],s:"ファイルをダウンロード"}},viewDetails:{t:0,b:{t:2,i:[{t:3}],s:"詳細を表示"}},dismissVersion:{t:0,b:{t:2,i:[{t:3}],s:"このバージョンを無視"}},supportAndFeedback:{t:0,b:{t:2,i:[{t:3}],s:"サポートとフィードバック"}},supportDescription:{t:0,b:{t:2,i:[{t:3}],s:"皆様のサポートが私たちの継続的な改善の原動力です！この拡張機能が役に立ったと思われましたら、ぜひGitHubでスターを付けていただくか、開発にご参加ください。"}},starOnGitHub:{t:0,b:{t:2,i:[{t:3}],s:"GitHubでスターを付ける"}},reportIssue:{t:0,b:{t:2,i:[{t:3}],s:"問題を報告"}},contribute:{t:0,b:{t:2,i:[{t:3}],s:"貢献する"}},noReleaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"リリースノートがありません"}}},dataManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"データ管理"}},exportSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"設定をエクスポート"}},description:{t:0,b:{t:2,i:[{t:3}],s:"現在のすべての設定（ユーザー設定、API設定、ウェブサイト管理ルールを含む）をJSONファイルとしてエクスポートします。このファイルをバックアップとして保存したり、他のデバイスでインポートしたりできます。"}},button:{t:0,b:{t:2,i:[{t:3}],s:"設定をエクスポート"}},success:{t:0,b:{t:2,i:[{t:3,v:"設定が正常にエクスポートされました！"},{t:4,k:"count"},{t:3,v:" 件のウェブサイトルールが含まれています。"}]}},error:{t:0,b:{t:2,i:[{t:3}],s:"エクスポートに失敗しました。詳細はコンソールを確認してください。"}}},importSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"設定をインポート"}},description:{t:0,b:{t:2,i:[{t:3}],s:"JSONファイルから設定（ユーザー設定、ウェブサイト管理ルールを含む）をインポートします。注意：これにより現在のすべての設定が上書きされます。新旧両方のフォーマットをサポートしており、旧フォーマットはユーザー設定のみをインポートします。"}},button:{t:0,b:{t:2,i:[{t:3}],s:"インポートを確認"}},selectFile:{t:0,b:{t:2,i:[{t:3}],s:"まずファイルを選択してください。"}},success:{t:0,b:{t:2,i:[{t:3}],s:"インポートが完了しました！"}},userSettingsSuccess:{t:0,b:{t:2,i:[{t:3}],s:"ユーザー設定が正常にインポートされました！"}},error:{t:0,b:{t:2,i:[{t:3}],s:"インポートに失敗しました。ファイル形式が正しくない可能性があります。"}},readError:{t:0,b:{t:2,i:[{t:3}],s:"ファイルの読み込み中にエラーが発生しました。"}},unrecognizedFormat:{t:0,b:{t:2,i:[{t:3}],s:"認識できないファイル形式です"}}},errors:{cannotReadFile:{t:0,b:{t:2,i:[{t:3}],s:"ファイルの内容を読み取れません。"}}}},appearanceSettings:{floatingBall:{title:{t:0,b:{t:2,i:[{t:3}],s:"フローティングボール設定"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"フローティングボールを有効にする"}},position:{t:0,b:{t:2,i:[{t:3}],s:"位置"}},opacity:{t:0,b:{t:2,i:[{t:3}],s:"透明度"}}},pronunciationTooltip:{title:{t:0,b:{t:2,i:[{t:3}],s:"フローティング単語意味ボックス設定"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"フローティング単語意味ボックスを有効にする"}},description:{t:0,b:{t:2,i:[{t:3}],s:"翻訳テキストにマウスをホバーすると単語の意味と発音を表示します"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl+マウスホバー"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Ctrlキーを押しながらホバーした時のみ単語意味ボックスを表示します"}}}},options:{title:{t:0,b:{t:2,i:[{t:3}],s:"イマージョン言語学習アシスタント illa-helper"}},toggleTheme:{t:0,b:{t:2,i:[{t:3}],s:"テーマを切り替え"}},basic:{t:0,b:{t:2,i:[{t:3}],s:"基本設定"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"翻訳サービス"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイト管理"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"フローティングボール"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"ホットキー"}},data:{t:0,b:{t:2,i:[{t:3}],s:"インポート/エクスポート"}},about:{t:0,b:{t:2,i:[{t:3}],s:"情報"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"設定"}},basicFunctions:{t:0,b:{t:2,i:[{t:3}],s:"基本機能"}},advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"高度な機能"}},managementTools:{t:0,b:{t:2,i:[{t:3}],s:"管理ツール"}},navigation:{basic:{t:0,b:{t:2,i:[{t:3}],s:"基本設定"}},basicDescription:{t:0,b:{t:2,i:[{t:3}],s:"基本設定とユーザー設定"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"フローティングボール"}},floatingDescription:{t:0,b:{t:2,i:[{t:3}],s:"フローティングツールボールの設定"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"ホットキー"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"翻訳ホットキーの設定"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"翻訳サービス"}},translationDescription:{t:0,b:{t:2,i:[{t:3}],s:"API設定と翻訳戦略"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"ウェブサイト管理"}},websiteManagementDescription:{t:0,b:{t:2,i:[{t:3}],s:"ブラックリストとホワイトリストの管理"}},data:{t:0,b:{t:2,i:[{t:3}],s:"インポート/エクスポート"}},dataDescription:{t:0,b:{t:2,i:[{t:3}],s:"設定のバックアップと復元"}},about:{t:0,b:{t:2,i:[{t:3}],s:"情報"}},aboutDescription:{t:0,b:{t:2,i:[{t:3}],s:"バージョン情報とヘルプ"}}}}},Zd={app:{title:{t:0,b:{t:2,i:[{t:3}],s:"illa-helper"}}},common:{tip:{t:0,b:{t:2,i:[{t:3}],s:"💡"}},new:{t:0,b:{t:2,i:[{t:3}],s:"NEW"}}},errors:{getExtensionVersion:{t:0,b:{t:2,i:[{t:3}],s:"확장 프로그램 버전 가져오기 실패"}},apiTestFailed:{t:0,b:{t:2,i:[{t:3}],s:"API 테스트 실패"}},manualTranslateFailed:{t:0,b:{t:2,i:[{t:3}],s:"수동 번역 실패"}},checkUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"업데이트 확인 실패"}},getUpdateInfoFailed:{t:0,b:{t:2,i:[{t:3}],s:"업데이트 정보 가져오기 실패"}},dismissUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"업데이트 무시 실패"}},noDownloadFile:{t:0,b:{t:2,i:[{t:3}],s:"다운로드할 파일을 찾을 수 없습니다"}},downloadFailed:{t:0,b:{t:2,i:[{t:3}],s:"다운로드 실패"}},loadRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"규칙 로드 실패"}},saveRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"규칙 저장 실패"}},deleteRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"규칙 삭제 실패"}},batchDeleteRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"규칙 일괄 삭제 실패"}},toggleRuleStatusFailed:{t:0,b:{t:2,i:[{t:3}],s:"규칙 상태 전환 실패"}},copyFailed:{t:0,b:{t:2,i:[{t:3}],s:"복사 실패"}},updateActiveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"활성 구성 업데이트 실패"}},deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 삭제 실패"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 저장 실패"}},loadSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"설정 로드 실패"}},notifyConfigChangeFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 변경 알림 실패"}},saveSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"설정 저장 실패"}},getHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"현재 단축키 가져오기 실패"}},checkHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"단축키 상태 확인 실패"}}},settings:{selectLanguageFirst:{t:0,b:{t:2,i:[{t:3}],s:"먼저 언어를 선택하세요"}},save:{t:0,b:{t:2,i:[{t:3}],s:"설정이 저장되었습니다"}},saveFailed:{t:0,b:{t:2,i:[{t:3}],s:"저장 실패"}},switchConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 전환 실패"}}},actions:{translate:{t:0,b:{t:2,i:[{t:3}],s:"번역"}}},language:{nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"모국어"}},targetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"목표 언어"}},languageLevel:{t:0,b:{t:2,i:[{t:3}],s:"언어 수준"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"모국어를 선택하세요"}},selectTargetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"목표 언어를 선택하세요"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"주요 언어"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"기타 언어"}}},languageLevel:{a1:{t:0,b:{t:2,i:[{t:3}],s:"A1 입문"}},a2:{t:0,b:{t:2,i:[{t:3}],s:"A2 초급"}},b1:{t:0,b:{t:2,i:[{t:3}],s:"B1 중급"}},b2:{t:0,b:{t:2,i:[{t:3}],s:"B2 중고급"}},c1:{t:0,b:{t:2,i:[{t:3}],s:"C1 고급"}},c2:{t:0,b:{t:2,i:[{t:3}],s:"C2 능숙"}}},translation:{style:{t:0,b:{t:2,i:[{t:3}],s:"번역 스타일"}},default:{t:0,b:{t:2,i:[{t:3}],s:"기본값"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"은은하게"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"굵게"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"기울임꼴"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"밑줄"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"강조"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"점선"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"학습 모드"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의"}},setCSS:{t:0,b:{t:2,i:[{t:3}],s:"CSS 스타일 설정"}}},trigger:{mode:{t:0,b:{t:2,i:[{t:3}],s:"트리거 모드"}},automatic:{t:0,b:{t:2,i:[{t:3}],s:"자동"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"수동"}}},display:{originalWord:{t:0,b:{t:2,i:[{t:3}],s:"원본 표시"}},visible:{t:0,b:{t:2,i:[{t:3}],s:"표시"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"숨기기"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"학습 모드"}}},replacement:{rate:{t:0,b:{t:2,i:[{t:3}],s:"대체 비율"}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"최대 길이"}}},pronunciation:{},floatingBall:{},lazyLoading:{title:{t:0,b:{t:2,i:[{t:3}],s:"지연 로딩 번역"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"지연 로딩 번역 활성화"}},description:{t:0,b:{t:2,i:[{t:3}],s:"단락으로 스크롤할 때만 번역하여 리소스 소모를 줄이고 성능을 향상시킵니다."}},preloadDistance:{t:0,b:{t:2,i:[{t:3}],s:"미리 로드 거리"}},preloadDistanceHint:{t:0,b:{t:2,i:[{t:3}],s:"값이 높을수록 더 많은 단락을 처리하지만 리소스 소모가 증가합니다. 권장 범위: 50%-100%"}},performanceHintTitle:{t:0,b:{t:2,i:[{t:3}],s:"성능 팁"}},performanceHintEnabled:{t:0,b:{t:2,i:[{t:3}],s:"지연 로딩이 활성화되었습니다. 스크롤할 때 필요에 따라 콘텐츠를 번역하여 메모리 사용량을 효과적으로 줄이고 페이지 로딩 속도를 향상시킵니다."}},performanceHintDisabled:{t:0,b:{t:2,i:[{t:3}],s:"지연 로딩이 비활성화되었습니다. 전체 페이지를 한 번에 번역합니다. 콘텐츠가 많은 페이지에서는 지연 로딩을 활성화하는 것이 좋습니다."}},note:{t:0,b:{t:2,i:[{t:3}],s:"값이 높을수록 더 많은 단락을 처리하지만 리소스 소모가 증가합니다."}}},api:{title:{t:0,b:{t:2,i:[{t:3}],s:"모델 API 설정"}},openSettings:{t:0,b:{t:2,i:[{t:3}],s:"상세 설정 열기"}},currentConfig:{t:0,b:{t:2,i:[{t:3}],s:"현재 구성"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"구성 이름"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"서비스 제공업체"}},model:{t:0,b:{t:2,i:[{t:3}],s:"모델"}},status:{t:0,b:{t:2,i:[{t:3}],s:"상태"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"구성됨"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"API 키 미구성"}},test:{t:0,b:{t:2,i:[{t:3}],s:"테스트"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"테스트 중"}},note:{t:0,b:{t:2,i:[{t:3}],s:"참고: API 키는 로컬에만 저장되며 다른 곳으로 전송되지 않습니다."}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"구성을 관리하려면 설정 센터를 여세요."}},unknownError:{t:0,b:{t:2,i:[{t:3}],s:"알 수 없는 오류"}}},footer:{slogan:{t:0,b:{t:2,i:[{t:3}],s:"💖 'i+1' 이론에 기반하여 자연스러운 학습을 유도합니다"}},clickForUpdate:{t:0,b:{t:2,i:[{t:3}],s:"클릭하여 업데이트 상세 정보 보기"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"설정"}}},websiteManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 관리"}},description:{t:0,b:{t:2,i:[{t:3}],s:"번역 기능의 웹사이트 규칙을 관리합니다. 블랙리스트는 번역을 비활성화하고, 화이트리스트는 자동 번역을 강제합니다."}},search:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 패턴 검색..."}},filterAll:{t:0,b:{t:2,i:[{t:3}],s:"전체"}},filterBlacklist:{t:0,b:{t:2,i:[{t:3}],s:"블랙리스트"}},filterWhitelist:{t:0,b:{t:2,i:[{t:3}],s:"화이트리스트"}},addRule:{t:0,b:{t:2,i:[{t:3}],s:"규칙 추가"}},deleteSelected:{t:0,b:{t:2,i:[{t:3}],s:"선택 항목 삭제"}},tableType:{t:0,b:{t:2,i:[{t:3}],s:"유형"}},tablePattern:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 패턴"}},tableDescription:{t:0,b:{t:2,i:[{t:3}],s:"설명"}},tableStatus:{t:0,b:{t:2,i:[{t:3}],s:"상태"}},tableActions:{t:0,b:{t:2,i:[{t:3}],s:"작업"}},blacklist:{t:0,b:{t:2,i:[{t:3}],s:"블랙리스트"}},whitelist:{t:0,b:{t:2,i:[{t:3}],s:"화이트리스트"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"활성화됨"}},disabled:{t:0,b:{t:2,i:[{t:3}],s:"비활성화됨"}},copy:{t:0,b:{t:2,i:[{t:3}],s:"복사"}},openMenu:{t:0,b:{t:2,i:[{t:3}],s:"메뉴 열기"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"편집"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"삭제"}},noMatchingRules:{t:0,b:{t:2,i:[{t:3}],s:"일치하는 규칙을 찾을 수 없습니다"}},noRules:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 규칙이 없습니다"}},tryOtherKeywords:{t:0,b:{t:2,i:[{t:3}],s:"다른 검색 키워드를 시도해 보세요"}},startAddingRules:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 규칙을 추가하여 번역 동작을 관리하세요"}},addFirstRule:{t:0,b:{t:2,i:[{t:3}],s:"첫 규칙 추가"}},totalRules:{t:0,b:{t:2,i:[{t:3,v:"총 "},{t:4,k:"count"},{t:3,v:"개의 웹사이트 규칙"}]}},showingResults:{t:0,b:{t:2,i:[{t:3,v:", "},{t:4,k:"count"},{t:3,v:"개의 일치 결과 표시 중"}]}},blacklistCount:{t:0,b:{t:2,i:[{t:3,v:"블랙리스트: "},{t:4,k:"count"}]}},whitelistCount:{t:0,b:{t:2,i:[{t:3,v:"화이트리스트: "},{t:4,k:"count"}]}},confirmDeleteRule:{t:0,b:{t:2,i:[{t:3}],s:"이 규칙을 삭제하시겠습니까?"}},confirmDeleteSelected:{t:0,b:{t:2,i:[{t:3,v:"선택한 "},{t:4,k:"count"},{t:3,v:"개의 규칙을 삭제하시겠습니까?"}]}}},websiteRuleDialog:{editTitle:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 규칙 편집"}},addTitle:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 규칙 추가"}},pattern:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 패턴"}},description:{t:0,b:{t:2,i:[{t:3}],s:"설명 (선택 사항)"}},descriptionPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"이 규칙에 대한 설명을 추가하세요..."}},patternPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"예: *://github.com/*"}},supportedPatterns:{t:0,b:{t:2,i:[{t:3}],s:"지원되는 패턴:"}},entireDomain:{t:0,b:{t:2,i:[{t:3}],s:"전체 도메인"}},specificPath:{t:0,b:{t:2,i:[{t:3}],s:"특정 경로"}},includeSubdomain:{t:0,b:{t:2,i:[{t:3}],s:"하위 도메인 포함"}},localFile:{t:0,b:{t:2,i:[{t:3}],s:"로컬 파일"}},commonTemplates:{t:0,b:{t:2,i:[{t:3}],s:"일반적인 템플릿:"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"취소"}},update:{t:0,b:{t:2,i:[{t:3}],s:"업데이트"}},add:{t:0,b:{t:2,i:[{t:3}],s:"추가"}},patternRequired:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 패턴을 입력하세요"}},invalidPattern:{t:0,b:{t:2,i:[{t:3}],s:"유효한 URL 패턴을 입력하세요"}}},ruleTypeSelector:{title:{t:0,b:{t:2,i:[{t:3}],s:"규칙 유형"}},blacklist:{label:{t:0,b:{t:2,i:[{t:3}],s:"블랙리스트"}},description:{t:0,b:{t:2,i:[{t:3}],s:"번역 기능을 비활성화할 웹사이트"}}},whitelist:{label:{t:0,b:{t:2,i:[{t:3}],s:"화이트리스트"}},description:{t:0,b:{t:2,i:[{t:3}],s:"자동 번역을 강제할 웹사이트"}}}},basicSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"기본 설정"}},enableExtension:{t:0,b:{t:2,i:[{t:3}],s:"확장 프로그램 전체 활성화"}},enableExtensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"끄면 모든 번역 기능이 중지됩니다."}},interfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"인터페이스 언어"}},interfaceLanguageDescription:{t:0,b:{t:2,i:[{t:3}],s:"확장 프로그램 인터페이스의 표시 언어를 선택합니다."}},selectInterfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"인터페이스 언어를 선택하세요"}},showParentheses:{t:0,b:{t:2,i:[{t:3}],s:"번역에 괄호 표시 여부"}},nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"모국어 설정"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"모국어를 선택하세요"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"주요 언어"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"기타 언어"}},translationPosition:{t:0,b:{t:2,i:[{t:3}],s:"번역 위치"}},afterWord:{t:0,b:{t:2,i:[{t:3}],s:"단어 뒤"}},beforeWord:{t:0,b:{t:2,i:[{t:3}],s:"단어 앞"}},translationStyle:{t:0,b:{t:2,i:[{t:3}],s:"번역 스타일"}},selectStyle:{t:0,b:{t:2,i:[{t:3}],s:"스타일 선택"}},styles:{default:{t:0,b:{t:2,i:[{t:3}],s:"기본값"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"은은하게"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"굵게"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"기울임꼴"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"밑줄"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"강조"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"점선"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"학습 모드"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의"}}},customCSSPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"예: color: #ff0000; font-weight: bold; background-color: #f0f0f0;"}},customCSSHint:{t:0,b:{t:2,i:[{t:3}],s:"팁: 여기의 CSS 스타일은 번역된 텍스트에 적용됩니다. 선택자는 포함하지 말고 스타일 속성만 작성하세요."}},maxLengthPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"예: 400"}},previewText:{t:0,b:{t:2,i:[{t:3}],s:"이것은 예시 텍스트이며, 다음을 포함합니다:"}},originalText:{t:0,b:{t:2,i:[{t:3}],s:"원본"}},advancedSettings:{t:0,b:{t:2,i:[{t:3}],s:"고급 설정"}},triggerMode:{t:0,b:{t:2,i:[{t:3}],s:"트리거 모드"}},triggerModes:{automatic:{t:0,b:{t:2,i:[{t:3}],s:"자동 번역"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"수동 트리거"}}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"최대 처리 길이"}},userLevel:{t:0,b:{t:2,i:[{t:3}],s:"단어 숙련도"}},selectUserLevel:{t:0,b:{t:2,i:[{t:3}],s:"언어 수준을 선택하세요"}},replacementRate:{t:0,b:{t:2,i:[{t:3}],s:"대체율"}},translationMode:{t:0,b:{t:2,i:[{t:3}],s:"번역 모드"}},translationModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"번역 방법 선택: 단어 모드 (부분 대체) 또는 단락 모드 (전체 번역)"}},translationModes:{word:{t:0,b:{t:2,i:[{t:3}],s:"단어 번역 모드"}},wordDescription:{t:0,b:{t:2,i:[{t:3}],s:"지능적으로 부분 단어를 선택하여 번역하고 원문 구조를 유지하며, 언어 학습에 적합"}},paragraph:{t:0,b:{t:2,i:[{t:3}],s:"단락 번역 모드"}},paragraphDescription:{t:0,b:{t:2,i:[{t:3}],s:"전체 문단을 번역하고, 전체 번역문을 표시하여 내용을 이해하기 쉽게 해 주세요."}}},lazyLoading:{}},hotkeySettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"단축키 설정"}},translatePageHotkey:{t:0,b:{t:2,i:[{t:3}],s:"전체 페이지 번역 단축키"}},currentHotkey:{t:0,b:{t:2,i:[{t:3}],s:"현재 단축키"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"전역 설정"}},translatePageDescription:{t:0,b:{t:2,i:[{t:3}],s:"단축키를 눌러 현재 페이지의 모든 텍스트 콘텐츠를 번역합니다."}},translateEntirePage:{t:0,b:{t:2,i:[{t:3}],s:"전체 페이지 번역"}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"권장"}},quickTranslateDescription:{t:0,b:{t:2,i:[{t:3}],s:"현재 페이지의 모든 텍스트를 빠르게 번역합니다."}},notSet:{t:0,b:{t:2,i:[{t:3}],s:"설정되지 않음"}},manageHotkeys:{t:0,b:{t:2,i:[{t:3}],s:"단축키 관리"}},howToModify:{t:0,b:{t:2,i:[{t:3}],s:"💡 단축키 수정 방법:"}},modifyInstructions:{t:0,b:{t:2,i:[{t:3}],s:"위의 '단축키 관리' 버튼을 클릭하거나 chrome://extensions/shortcuts를 방문하여 단축키 조합을 사용자 정의하세요."}},currentSetting:{t:0,b:{t:2,i:[{t:3,v:"현재 설정: "},{t:4,k:"shortcut"}]}},suggestedSetting:{t:0,b:{t:2,i:[{t:3}],s:"권장 설정: Ctrl+Shift+T (Mac: Command+Shift+T)"}},statusCheck:{t:0,b:{t:2,i:[{t:3}],s:"단축키 상태 확인"}},checking:{t:0,b:{t:2,i:[{t:3}],s:"확인 중..."}},checkStatus:{t:0,b:{t:2,i:[{t:3}],s:"상태 확인"}},hotkeySet:{t:0,b:{t:2,i:[{t:3}],s:"단축키가 설정되었습니다"}},hotkeyNotSet:{t:0,b:{t:2,i:[{t:3}],s:"단축키가 설정되지 않았습니다"}},shortcut:{t:0,b:{t:2,i:[{t:3}],s:"단축키"}},command:{t:0,b:{t:2,i:[{t:3}],s:"명령"}},status:{t:0,b:{t:2,i:[{t:3}],s:"상태"}},pleaseSetHotkey:{t:0,b:{t:2,i:[{t:3}],s:"이 기능을 사용하려면 단축키를 설정하세요."}},clickManageButton:{t:0,b:{t:2,i:[{t:3}],s:"💡 위의 '단축키 관리' 버튼을 클릭하여 설정하거나"}},clickCheckButton:{t:0,b:{t:2,i:[{t:3}],s:"'상태 확인' 버튼을 클릭하여 단축키 설정을 확인하세요."}},checkFailed:{t:0,b:{t:2,i:[{t:3}],s:"단축키 상태 확인 실패"}}},translationSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"번역 서비스 구성"}},apiRequestSettings:{t:0,b:{t:2,i:[{t:3}],s:"API 요청 설정"}},timeoutSeconds:{t:0,b:{t:2,i:[{t:3}],s:"시간 초과 (초)"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"전역 설정"}},timeoutDescription:{t:0,b:{t:2,i:[{t:3}],s:"모든 API 요청의 최대 대기 시간을 설정합니다. 입력"}},noTimeoutLimit:{t:0,b:{t:2,i:[{t:3}],s:"은 시간 초과 제한 없음을 의미합니다."}},timeoutPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"시간 초과 입력 (초), 0은 무제한"}},seconds:{t:0,b:{t:2,i:[{t:3}],s:"초"}},unlimited:{t:0,b:{t:2,i:[{t:3}],s:"무제한"}},secondsValue:{t:0,b:{t:2,i:[{t:4,k:"value"},{t:3,v:"초"}]}},currentActiveConfig:{t:0,b:{t:2,i:[{t:3}],s:"현재 활성 구성"}},selectApiConfig:{t:0,b:{t:2,i:[{t:3}],s:"API 구성 선택"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"서비스 제공업체"}},model:{t:0,b:{t:2,i:[{t:3}],s:"모델"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"엔드포인트"}},status:{t:0,b:{t:2,i:[{t:3}],s:"상태"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"구성됨"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"API 키 미구성"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"구성 관리"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"구성 추가"}},connectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"연결 성공"}},connectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"연결 실패"}},noConfigMessage:{t:0,b:{t:2,i:[{t:3}],s:"구성이 없습니다. 위의 '구성 추가' 버튼을 클릭하여 생성하세요."}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"구성 편집"}},addNewConfig:{t:0,b:{t:2,i:[{t:3}],s:"새 구성 추가"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"구성 이름"}},inputConfigName:{t:0,b:{t:2,i:[{t:3}],s:"구성 이름 입력"}},serviceProvider:{t:0,b:{t:2,i:[{t:3}],s:"서비스 제공업체"}},selectServiceProvider:{t:0,b:{t:2,i:[{t:3}],s:"서비스 제공업체 선택"}},openai:{t:0,b:{t:2,i:[{t:3}],s:"OpenAI"}},deepseek:{t:0,b:{t:2,i:[{t:3}],s:"DeepSeek"}},siliconFlow:{t:0,b:{t:2,i:[{t:3}],s:"Silicon Flow"}},googleGemini:{t:0,b:{t:2,i:[{t:3}],s:"Google Gemini"}},proxyGemini:{t:0,b:{t:2,i:[{t:3}],s:"Proxy-Gemini"}},anthropic:{t:0,b:{t:2,i:[{t:3}],s:"Anthropic"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의"}},customProviderName:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의 제공업체 이름"}},inputCustomProviderName:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의 제공업체 이름 입력"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"API 엔드포인트"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"https:/xxxxx/v1/chat/completions"}},proxyApiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"프록시 API 엔드포인트"}},inputProxyEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"프록시 엔드포인트 URL 입력"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"API 키"}},inputApiKey:{t:0,b:{t:2,i:[{t:3}],s:"API 키 입력"}},modelName:{t:0,b:{t:2,i:[{t:3}],s:"모델 이름"}},inputModelName:{t:0,b:{t:2,i:[{t:3}],s:"gpt-4o-mini"}},temperatureParam:{t:0,b:{t:2,i:[{t:3,v:"온도 매개변수 ("},{t:4,k:"value"},{t:3,v:")"}]}},requestsPerSecond:{t:0,b:{t:2,i:[{t:3,v:"초당 요청 제한 ("},{t:4,k:"value"},{t:3,v:")"}]}},noLimit:{t:0,b:{t:2,i:[{t:3}],s:"무제한"}},requestsPerSecondUnit:{t:0,b:{t:2,i:[{t:3}],s:"회/초"}},requestsPerSecondDescription:{t:0,b:{t:2,i:[{t:3}],s:"초당 최대 API 요청 수를 설정합니다. 0은 무제한을 의미합니다. API 429 오류를 방지하기 위해 적절한 제한을 설정하는 것이 좋습니다."}},inputRequestsPerSecond:{t:0,b:{t:2,i:[{t:3}],s:"0 = 무제한"}},enableThinkingMode:{t:0,b:{t:2,i:[{t:3}],s:"사고 모드 활성화"}},enableThinkingModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"AI의 사고 과정 출력 활성화 여부를 제어합니다."}},includeThinkingParam:{t:0,b:{t:2,i:[{t:3}],s:"요청에 사고 매개변수 포함"}},includeThinkingParamDescription:{t:0,b:{t:2,i:[{t:3}],s:"enable_thinking 매개변수를 API로 보낼지 여부를 제어합니다 (일부 모델은 이 매개변수를 지원하지 않음)."}},sendRequestThroughBackground:{t:0,b:{t:2,i:[{t:3}],s:"확장 프로그램 백그라운드를 통해 요청 보내기"}},sendRequestThroughBackgroundDescription:{t:0,b:{t:2,i:[{t:3}],s:"이 옵션을 활성화하면 CORS 제한을 우회할 수 있어 접근할 수 없는 API 서비스에 유용합니다. 교차 출처 오류가 발생하면 이 옵션을 활성화하는 것이 좋습니다."}},customApiParams:{t:0,b:{t:2,i:[{t:3}],s:"사용자 정의 API 매개변수"}},customApiParamsDescription:{t:0,b:{t:2,i:[{t:3}],s:"top_p, presence_penalty 등 추가 API 매개변수 추가를 지원합니다 (JSON 형식)."}},formatJson:{t:0,b:{t:2,i:[{t:3}],s:"JSON 서식 지정"}},clear:{t:0,b:{t:2,i:[{t:3}],s:"지우기"}},showExample:{t:0,b:{t:2,i:[{t:3}],s:"예시 보기"}},hideExample:{t:0,b:{t:2,i:[{t:3}],s:"예시 숨기기"}},jsonValid:{t:0,b:{t:2,i:[{t:3}],s:"JSON 형식이 올바릅니다"}},jsonInvalid:{t:0,b:{t:2,i:[{t:3}],s:"JSON 형식이 잘못되었습니다"}},commonParamsExample:{t:0,b:{t:2,i:[{t:3}],s:"일반적인 매개변수 예시:"}},note:{t:0,b:{t:2,i:[{t:3}],s:"참고:"}},systemParamsNote:{t:0,b:{t:2,i:[{t:3}],s:"model, messages, apiKey와 같은 시스템 매개변수는 시스템에 의해 보호되며 덮어쓸 수 없습니다."}},apiConnectionTest:{t:0,b:{t:2,i:[{t:3}],s:"API 연결 테스트"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"연결 테스트"}},apiConnectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"API 연결 성공"}},apiConnectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"API 연결 실패"}},detectedModel:{t:0,b:{t:2,i:[{t:3}],s:"감지된 모델"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"취소"}},save:{t:0,b:{t:2,i:[{t:3}],s:"저장"}},add:{t:0,b:{t:2,i:[{t:3}],s:"추가"}},activate:{t:0,b:{t:2,i:[{t:3}],s:"활성화"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"테스트 중"}},test:{t:0,b:{t:2,i:[{t:3}],s:"테스트"}},errors:{deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 삭제 실패"}},fillRequiredFields:{t:0,b:{t:2,i:[{t:3}],s:"구성 이름과 API 키를 입력하세요"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"구성 저장 실패"}}}},time:{justNow:{t:0,b:{t:2,i:[{t:3}],s:"방금"}},minutesAgo:{t:0,b:{t:2,i:[{t:4,k:"minutes"},{t:3,v:"분 전"}]}},hoursAgo:{t:0,b:{t:2,i:[{t:4,k:"hours"},{t:3,v:"시간 전"}]}},daysAgo:{t:0,b:{t:2,i:[{t:4,k:"days"},{t:3,v:"일 전"}]}}},about:{title:{t:0,b:{t:2,i:[{t:3}],s:"몰입형 언어 학습 도우미 (illa-helper) 정보"}},logoAlt:{t:0,b:{t:2,i:[{t:3}],s:"몰입형 언어 학습 도우미 illa-helper 로고"}},appName:{t:0,b:{t:2,i:[{t:3}],s:"몰입형 언어 학습 도우미 (illa-helper)"}},version:{t:0,b:{t:2,i:[{t:3,v:"버전 "},{t:4,k:"version"}]}},description:{t:0,b:{t:2,i:[{t:3}],s:"몰입형 언어 학습 도우미 (illa-helper)는 'i+1' 이해 가능 입력 이론에 기반한 브라우저 확장 프로그램으로, 몰입형 번역 및 발음 학습 생태계를 통해 일상적인 웹 서핑 중에 쉽고 효율적으로 외국어를 학습할 수 있도록 돕습니다."}},coreFeatures:{t:0,b:{t:2,i:[{t:3}],s:"핵심 기능"}},features:{smartTranslation:{title:{t:0,b:{t:2,i:[{t:3}],s:"스마트 번역 및 어휘 대체"}},description:{t:0,b:{t:2,i:[{t:3}],s:"20개 이상의 언어를 지원하며 사용자의 수준에 맞춰 지능적으로 어휘를 선택합니다."}}},pronunciation:{title:{t:0,b:{t:2,i:[{t:3}],s:"발음 학습 생태계"}},description:{t:0,b:{t:2,i:[{t:3}],s:"발음 기호, AI 단어 의미 설명 및 듀얼 TTS 음성 읽기를 통합하여 원스톱 발음 학습 경험을 제공합니다."}}},learningStyles:{title:{t:0,b:{t:2,i:[{t:3}],s:"다양한 학습 스타일"}},description:{t:0,b:{t:2,i:[{t:3}],s:"밑줄, 강조, 흐림 등 7가지 다양한 번역 스타일을 제공하여 개인화된 학습 요구를 충족시킵니다."}}},interactive:{title:{t:0,b:{t:2,i:[{t:3}],s:"인터랙티브 플로팅 박스"}},description:{t:0,b:{t:2,i:[{t:3}],s:"마우스를 올리면 단어와 구문의 상세한 발음과 의미를 확인할 수 있으며 중첩 조회도 지원합니다."}}}},versionUpdate:{t:0,b:{t:2,i:[{t:3}],s:"버전 업데이트"}},currentVersion:{t:0,b:{t:2,i:[{t:3,v:"현재 버전: v"},{t:4,k:"version"}]}},newVersionFound:{t:0,b:{t:2,i:[{t:3,v:"새 버전 발견: v"},{t:4,k:"version"}]}},latestVersion:{t:0,b:{t:2,i:[{t:3}],s:"최신 버전입니다"}},lastCheck:{t:0,b:{t:2,i:[{t:3,v:"마지막 확인: "},{t:4,k:"time"}]}},checking:{t:0,b:{t:2,i:[{t:3}],s:"확인 중..."}},checkUpdate:{t:0,b:{t:2,i:[{t:3}],s:"업데이트 확인"}},releaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"릴리스 노트"}},availableDownloads:{t:0,b:{t:2,i:[{t:3,v:"사용 가능한 다운로드 파일 (현재 브라우저: "},{t:4,k:"browser"},{t:3,v:")"}]}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"권장"}},downloading:{t:0,b:{t:2,i:[{t:3}],s:"다운로드 중..."}},downloadFile:{t:0,b:{t:2,i:[{t:3}],s:"파일 다운로드"}},viewDetails:{t:0,b:{t:2,i:[{t:3}],s:"상세 정보 보기"}},dismissVersion:{t:0,b:{t:2,i:[{t:3}],s:"이 버전 무시"}},supportAndFeedback:{t:0,b:{t:2,i:[{t:3}],s:"지원 및 피드백"}},supportDescription:{t:0,b:{t:2,i:[{t:3}],s:"여러분의 지원은 저희가 계속해서 개선해 나가는 원동력입니다! 이 확장 프로그램이 유용하다고 생각되시면 GitHub에서 별을 주시거나 개발에 참여해 주세요."}},starOnGitHub:{t:0,b:{t:2,i:[{t:3}],s:"GitHub에서 별 주기"}},reportIssue:{t:0,b:{t:2,i:[{t:3}],s:"문제 보고"}},contribute:{t:0,b:{t:2,i:[{t:3}],s:"기여하기"}},noReleaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"릴리스 노트가 없습니다"}}},dataManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"데이터 관리"}},exportSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"설정 내보내기"}},description:{t:0,b:{t:2,i:[{t:3}],s:"현재 모든 설정(사용자 구성, API 설정 및 웹사이트 관리 규칙 포함)을 JSON 파일로 내보냅니다. 이 파일을 백업으로 저장하거나 다른 기기에서 가져올 수 있습니다."}},button:{t:0,b:{t:2,i:[{t:3}],s:"설정 내보내기"}},success:{t:0,b:{t:2,i:[{t:3,v:"설정을 성공적으로 내보냈습니다! "},{t:4,k:"count"},{t:3,v:"개의 웹사이트 규칙이 포함되어 있습니다."}]}},error:{t:0,b:{t:2,i:[{t:3}],s:"내보내기 실패, 자세한 내용은 콘솔을 확인하세요."}}},importSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"설정 가져오기"}},description:{t:0,b:{t:2,i:[{t:3}],s:"JSON 파일에서 설정(사용자 구성 및 웹사이트 관리 규칙 포함)을 가져옵니다. 주의: 현재 모든 설정이 덮어쓰기됩니다. 신구 형식을 모두 지원하며, 구 형식은 사용자 설정만 가져옵니다."}},button:{t:0,b:{t:2,i:[{t:3}],s:"가져오기 확인"}},selectFile:{t:0,b:{t:2,i:[{t:3}],s:"먼저 파일을 선택하세요."}},success:{t:0,b:{t:2,i:[{t:3}],s:"가져오기 완료!"}},userSettingsSuccess:{t:0,b:{t:2,i:[{t:3}],s:"사용자 설정을 성공적으로 가져왔습니다!"}},error:{t:0,b:{t:2,i:[{t:3}],s:"가져오기 실패, 파일 형식이 올바르지 않을 수 있습니다."}},readError:{t:0,b:{t:2,i:[{t:3}],s:"파일 읽기 중 오류가 발생했습니다."}},unrecognizedFormat:{t:0,b:{t:2,i:[{t:3}],s:"인식할 수 없는 파일 형식"}}},errors:{cannotReadFile:{t:0,b:{t:2,i:[{t:3}],s:"파일 내용을 읽을 수 없습니다."}}}},appearanceSettings:{floatingBall:{title:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 볼 설정"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 볼 활성화"}},position:{t:0,b:{t:2,i:[{t:3}],s:"위치"}},opacity:{t:0,b:{t:2,i:[{t:3}],s:"투명도"}}},pronunciationTooltip:{title:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 단어 의미 상자 설정"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 단어 의미 상자 활성화"}},description:{t:0,b:{t:2,i:[{t:3}],s:"번역된 텍스트에 마우스를 올리면 단어 의미와 발음을 표시합니다."}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl+마우스 오버"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl 키를 누른 상태에서 마우스를 올려야만 단어 의미 상자를 표시합니다."}}}},options:{title:{t:0,b:{t:2,i:[{t:3}],s:"몰입형 언어 학습 도우미 illa-helper"}},toggleTheme:{t:0,b:{t:2,i:[{t:3}],s:"테마 전환"}},basic:{t:0,b:{t:2,i:[{t:3}],s:"기본 설정"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"번역 서비스"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 관리"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 볼"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"단축키"}},data:{t:0,b:{t:2,i:[{t:3}],s:"가져오기/내보내기"}},about:{t:0,b:{t:2,i:[{t:3}],s:"정보"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"설정"}},basicFunctions:{t:0,b:{t:2,i:[{t:3}],s:"기본 기능"}},advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"고급 기능"}},managementTools:{t:0,b:{t:2,i:[{t:3}],s:"관리 도구"}},navigation:{basic:{t:0,b:{t:2,i:[{t:3}],s:"기본 설정"}},basicDescription:{t:0,b:{t:2,i:[{t:3}],s:"기본 구성 및 사용자 환경 설정"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 볼"}},floatingDescription:{t:0,b:{t:2,i:[{t:3}],s:"플로팅 도구 볼 구성"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"단축키"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"번역 단축키 설정"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"번역 서비스"}},translationDescription:{t:0,b:{t:2,i:[{t:3}],s:"API 구성 및 번역 전략"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"웹사이트 관리"}},websiteManagementDescription:{t:0,b:{t:2,i:[{t:3}],s:"블랙리스트 및 화이트리스트 관리"}},data:{t:0,b:{t:2,i:[{t:3}],s:"가져오기/내보내기"}},dataDescription:{t:0,b:{t:2,i:[{t:3}],s:"구성 백업 및 복원"}},about:{t:0,b:{t:2,i:[{t:3}],s:"정보"}},aboutDescription:{t:0,b:{t:2,i:[{t:3}],s:"버전 정보 및 도움말"}}}}},th={app:{title:{t:0,b:{t:2,i:[{t:3}],s:"illa-helper"}}},common:{tip:{t:0,b:{t:2,i:[{t:3}],s:"💡"}},new:{t:0,b:{t:2,i:[{t:3}],s:"NUEVO"}}},errors:{getExtensionVersion:{t:0,b:{t:2,i:[{t:3}],s:"Error al obtener la versión de la extensión"}},apiTestFailed:{t:0,b:{t:2,i:[{t:3}],s:"La prueba de la API ha fallado"}},manualTranslateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error en la traducción manual"}},checkUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al buscar actualizaciones"}},getUpdateInfoFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al obtener la información de la actualización"}},dismissUpdateFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al descartar la actualización"}},noDownloadFile:{t:0,b:{t:2,i:[{t:3}],s:"No se encontraron archivos para descargar"}},downloadFailed:{t:0,b:{t:2,i:[{t:3}],s:"La descarga ha fallado"}},loadRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al cargar las reglas"}},saveRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al guardar la regla"}},deleteRuleFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al eliminar la regla"}},batchDeleteRulesFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al eliminar reglas en lote"}},toggleRuleStatusFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al cambiar el estado de la regla"}},copyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al copiar"}},updateActiveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al actualizar la configuración activa"}},deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al eliminar la configuración"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al guardar la configuración"}},loadSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al cargar los ajustes"}},notifyConfigChangeFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al notificar el cambio de configuración"}},saveSettingsFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al guardar los ajustes"}},getHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al obtener el atajo de teclado actual"}},checkHotkeyFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al comprobar el estado del atajo de teclado"}}},settings:{selectLanguageFirst:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona un idioma primero"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes guardados"}},saveFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al guardar"}},switchConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al cambiar de configuración"}}},actions:{translate:{t:0,b:{t:2,i:[{t:3}],s:"Traducir"}}},language:{nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Idioma Nativo"}},targetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Idioma Objetivo"}},languageLevel:{t:0,b:{t:2,i:[{t:3}],s:"Nivel de Idioma"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona tu idioma nativo"}},selectTargetLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona el idioma objetivo"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Idiomas Populares"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Otros Idiomas"}}},languageLevel:{a1:{t:0,b:{t:2,i:[{t:3}],s:"A1 Principiante"}},a2:{t:0,b:{t:2,i:[{t:3}],s:"A2 Elemental"}},b1:{t:0,b:{t:2,i:[{t:3}],s:"B1 Intermedio"}},b2:{t:0,b:{t:2,i:[{t:3}],s:"B2 Intermedio-alto"}},c1:{t:0,b:{t:2,i:[{t:3}],s:"C1 Avanzado"}},c2:{t:0,b:{t:2,i:[{t:3}],s:"C2 Competente"}}},translation:{style:{t:0,b:{t:2,i:[{t:3}],s:"Estilo de Traducción"}},default:{t:0,b:{t:2,i:[{t:3}],s:"Por defecto"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"Sutil"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"Negrita"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"Cursiva"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"Subrayado"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"Resaltado"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"Punteado"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Modo Aprendizaje"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Personalizado"}},setCSS:{t:0,b:{t:2,i:[{t:3}],s:"Establecer Estilo CSS"}}},trigger:{mode:{t:0,b:{t:2,i:[{t:3}],s:"Modo de Activación"}},automatic:{t:0,b:{t:2,i:[{t:3}],s:"Automático"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"Manual"}}},display:{originalWord:{t:0,b:{t:2,i:[{t:3}],s:"Visualización del Texto Original"}},visible:{t:0,b:{t:2,i:[{t:3}],s:"Visible"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"Oculto"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Modo Aprendizaje"}}},replacement:{rate:{t:0,b:{t:2,i:[{t:3}],s:"Tasa de Reemplazo"}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"Longitud Máxima"}}},pronunciation:{},floatingBall:{},lazyLoading:{title:{t:0,b:{t:2,i:[{t:3}],s:"Traducción con Carga Diferida (Lazy Loading)"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Activar Carga Diferida"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Traduce los párrafos solo cuando se desplazan a la vista, reduciendo el consumo de recursos y mejorando el rendimiento."}},preloadDistance:{t:0,b:{t:2,i:[{t:3}],s:"Distancia de Precarga"}},preloadDistanceHint:{t:0,b:{t:2,i:[{t:3}],s:"Valores más altos pueden capturar más párrafos pero aumentarán el consumo de recursos. Rango recomendado: 50%-100%"}},performanceHintTitle:{t:0,b:{t:2,i:[{t:3}],s:"Consejo de Rendimiento"}},performanceHintEnabled:{t:0,b:{t:2,i:[{t:3}],s:"La carga diferida está activada. El contenido se traducirá bajo demanda a medida que te desplaces, reduciendo eficazmente el uso de memoria y mejorando la velocidad de carga de la página."}},performanceHintDisabled:{t:0,b:{t:2,i:[{t:3}],s:"La carga diferida está desactivada. Se traducirá toda la página de una vez. Se recomienda activar la carga diferida en páginas con mucho contenido."}},note:{t:0,b:{t:2,i:[{t:3}],s:"Valores más altos capturan más párrafos pero aumentan el consumo de recursos"}}},api:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de la API del Modelo"}},openSettings:{t:0,b:{t:2,i:[{t:3}],s:"Abrir Ajustes Detallados"}},currentConfig:{t:0,b:{t:2,i:[{t:3}],s:"Configuración Actual"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"Nombre de la Configuración"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"Proveedor"}},model:{t:0,b:{t:2,i:[{t:3}],s:"Modelo"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"Configurado"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"Clave de API no configurada"}},test:{t:0,b:{t:2,i:[{t:3}],s:"Probar"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"Probando"}},note:{t:0,b:{t:2,i:[{t:3}],s:"Nota: Las claves de API se guardan localmente y nunca se envían a ningún otro lugar."}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"Para gestionar las configuraciones, por favor abre el centro de ajustes."}},unknownError:{t:0,b:{t:2,i:[{t:3}],s:"Error desconocido"}}},footer:{slogan:{t:0,b:{t:2,i:[{t:3}],s:'💖 Basado en la teoría "i+1", deja que el aprendizaje ocurra de forma natural'}},clickForUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Haz clic para ver los detalles de la actualización"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes"}}},websiteManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"Gestión de Sitios Web"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Gestiona las reglas de sitios web para la función de traducción. La lista negra desactiva la traducción, la lista blanca fuerza la traducción automática."}},search:{t:0,b:{t:2,i:[{t:3}],s:"Buscar patrones de sitios web..."}},filterAll:{t:0,b:{t:2,i:[{t:3}],s:"Todos"}},filterBlacklist:{t:0,b:{t:2,i:[{t:3}],s:"Lista Negra"}},filterWhitelist:{t:0,b:{t:2,i:[{t:3}],s:"Lista Blanca"}},addRule:{t:0,b:{t:2,i:[{t:3}],s:"Añadir Regla"}},deleteSelected:{t:0,b:{t:2,i:[{t:3}],s:"Eliminar Seleccionados"}},tableType:{t:0,b:{t:2,i:[{t:3}],s:"Tipo"}},tablePattern:{t:0,b:{t:2,i:[{t:3}],s:"Patrón del Sitio Web"}},tableDescription:{t:0,b:{t:2,i:[{t:3}],s:"Descripción"}},tableStatus:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}},tableActions:{t:0,b:{t:2,i:[{t:3}],s:"Acciones"}},blacklist:{t:0,b:{t:2,i:[{t:3}],s:"Lista Negra"}},whitelist:{t:0,b:{t:2,i:[{t:3}],s:"Lista Blanca"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Activado"}},disabled:{t:0,b:{t:2,i:[{t:3}],s:"Desactivado"}},copy:{t:0,b:{t:2,i:[{t:3}],s:"Copiar"}},openMenu:{t:0,b:{t:2,i:[{t:3}],s:"Abrir Menú"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Editar"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"Eliminar"}},noMatchingRules:{t:0,b:{t:2,i:[{t:3}],s:"No se encontraron reglas que coincidan"}},noRules:{t:0,b:{t:2,i:[{t:3}],s:"Aún no hay reglas de sitios web"}},tryOtherKeywords:{t:0,b:{t:2,i:[{t:3}],s:"Intenta usar otras palabras clave de búsqueda"}},startAddingRules:{t:0,b:{t:2,i:[{t:3}],s:"Empieza a añadir reglas de sitios web para gestionar el comportamiento de la traducción"}},addFirstRule:{t:0,b:{t:2,i:[{t:3}],s:"Añade tu primera regla"}},totalRules:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" reglas de sitios web en total"}]}},showingResults:{t:0,b:{t:2,i:[{t:3,v:", mostrando "},{t:4,k:"count"},{t:3,v:" resultados coincidentes"}]}},blacklistCount:{t:0,b:{t:2,i:[{t:3,v:"Lista Negra: "},{t:4,k:"count"}]}},whitelistCount:{t:0,b:{t:2,i:[{t:3,v:"Lista Blanca: "},{t:4,k:"count"}]}},confirmDeleteRule:{t:0,b:{t:2,i:[{t:3}],s:"¿Estás seguro de que quieres eliminar esta regla?"}},confirmDeleteSelected:{t:0,b:{t:2,i:[{t:3,v:"¿Estás seguro de que quieres eliminar las "},{t:4,k:"count"},{t:3,v:" reglas seleccionadas?"}]}}},websiteRuleDialog:{editTitle:{t:0,b:{t:2,i:[{t:3}],s:"Editar Regla de Sitio Web"}},addTitle:{t:0,b:{t:2,i:[{t:3}],s:"Añadir Regla de Sitio Web"}},pattern:{t:0,b:{t:2,i:[{t:3}],s:"Patrón del Sitio Web"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Descripción (opcional)"}},descriptionPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Añade una nota para esta regla..."}},patternPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Ej: *://github.com/*"}},supportedPatterns:{t:0,b:{t:2,i:[{t:3}],s:"Patrones soportados:"}},entireDomain:{t:0,b:{t:2,i:[{t:3}],s:"Dominio completo"}},specificPath:{t:0,b:{t:2,i:[{t:3}],s:"Ruta específica"}},includeSubdomain:{t:0,b:{t:2,i:[{t:3}],s:"Incluir subdominios"}},localFile:{t:0,b:{t:2,i:[{t:3}],s:"Archivo local"}},commonTemplates:{t:0,b:{t:2,i:[{t:3}],s:"Plantillas comunes:"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancelar"}},update:{t:0,b:{t:2,i:[{t:3}],s:"Actualizar"}},add:{t:0,b:{t:2,i:[{t:3}],s:"Añadir"}},patternRequired:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, introduce un patrón de sitio web"}},invalidPattern:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, introduce un patrón de URL válido"}}},ruleTypeSelector:{title:{t:0,b:{t:2,i:[{t:3}],s:"Tipo de Regla"}},blacklist:{label:{t:0,b:{t:2,i:[{t:3}],s:"Lista Negra"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Sitios web donde la traducción está desactivada"}}},whitelist:{label:{t:0,b:{t:2,i:[{t:3}],s:"Lista Blanca"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Sitios web donde se fuerza la traducción automática"}}}},basicSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes Básicos"}},enableExtension:{t:0,b:{t:2,i:[{t:3}],s:"Activar Extensión"}},enableExtensionDescription:{t:0,b:{t:2,i:[{t:3}],s:"Cuando esté desactivado, todas las funciones de traducción dejarán de funcionar."}},interfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Idioma de la Interfaz"}},interfaceLanguageDescription:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona el idioma de visualización para la interfaz de la extensión."}},selectInterfaceLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona un idioma para la interfaz"}},showParentheses:{t:0,b:{t:2,i:[{t:3}],s:"Mostrar paréntesis en la traducción"}},nativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Ajuste de Idioma Nativo"}},selectNativeLanguage:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona tu idioma nativo"}},popularLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Idiomas Populares"}},otherLanguages:{t:0,b:{t:2,i:[{t:3}],s:"Otros Idiomas"}},translationPosition:{t:0,b:{t:2,i:[{t:3}],s:"Posición de la Traducción"}},afterWord:{t:0,b:{t:2,i:[{t:3}],s:"Después de la palabra"}},beforeWord:{t:0,b:{t:2,i:[{t:3}],s:"Antes de la palabra"}},translationStyle:{t:0,b:{t:2,i:[{t:3}],s:"Estilo de Traducción"}},selectStyle:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona un estilo"}},styles:{default:{t:0,b:{t:2,i:[{t:3}],s:"Por defecto"}},subtle:{t:0,b:{t:2,i:[{t:3}],s:"Sutil"}},bold:{t:0,b:{t:2,i:[{t:3}],s:"Negrita"}},italic:{t:0,b:{t:2,i:[{t:3}],s:"Cursiva"}},underlined:{t:0,b:{t:2,i:[{t:3}],s:"Subrayado"}},highlighted:{t:0,b:{t:2,i:[{t:3}],s:"Resaltado"}},dotted:{t:0,b:{t:2,i:[{t:3}],s:"Punteado"}},learning:{t:0,b:{t:2,i:[{t:3}],s:"Modo Aprendizaje"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Personalizado"}}},customCSSPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Ej: color: #ff0000; font-weight: bold; background-color: #f0f0f0;"}},customCSSHint:{t:0,b:{t:2,i:[{t:3}],s:"Consejo: Los estilos CSS aquí se aplicarán al texto traducido. Por favor, escribe las propiedades de estilo directamente sin selectores."}},maxLengthPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Ej: 400"}},previewText:{t:0,b:{t:2,i:[{t:3}],s:"Este es un texto de ejemplo que contiene el "}},originalText:{t:0,b:{t:2,i:[{t:3}],s:"texto original"}},advancedSettings:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes Avanzados"}},triggerMode:{t:0,b:{t:2,i:[{t:3}],s:"Modo de Activación"}},triggerModes:{automatic:{t:0,b:{t:2,i:[{t:3}],s:"Traducción Automática"}},manual:{t:0,b:{t:2,i:[{t:3}],s:"Activación Manual"}}},maxLength:{t:0,b:{t:2,i:[{t:3}],s:"Longitud Máxima de Procesamiento"}},userLevel:{t:0,b:{t:2,i:[{t:3}],s:"Familiaridad con Palabras"}},selectUserLevel:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona tu nivel de idioma"}},replacementRate:{t:0,b:{t:2,i:[{t:3}],s:"Tasa de Reemplazo"}},translationMode:{t:0,b:{t:2,i:[{t:3}],s:"Modo de Traducción"}},translationModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona el método de traducción: modo palabra (reemplazo parcial) o modo párrafo (traducción completa)"}},translationModes:{word:{t:0,b:{t:2,i:[{t:3}],s:"Modo de Traducción de Palabras"}},wordDescription:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona inteligentemente palabras parciales para traducir, manteniendo la estructura del texto original, adecuado para el aprendizaje de idiomas"}},paragraph:{t:0,b:{t:2,i:[{t:3}],s:"Modo de Traducción de Párrafos"}},paragraphDescription:{t:0,b:{t:2,i:[{t:3}],s:"Traduce párrafos completos, mostrando traducciones completas, adecuado para la comprensión de contenido"}}},lazyLoading:{}},hotkeySettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de Atajos de Teclado"}},translatePageHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Atajo para Traducir Página"}},currentHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Atajo Actual"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"Ajuste Global"}},translatePageDescription:{t:0,b:{t:2,i:[{t:3}],s:"Pulsa el atajo para traducir todo el texto de la página actual."}},translateEntirePage:{t:0,b:{t:2,i:[{t:3}],s:"Traducir Página Completa"}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"Recomendado"}},quickTranslateDescription:{t:0,b:{t:2,i:[{t:3}],s:"Traduce rápidamente todo el texto de la página actual."}},notSet:{t:0,b:{t:2,i:[{t:3}],s:"No establecido"}},manageHotkeys:{t:0,b:{t:2,i:[{t:3}],s:"Gestionar Atajos"}},howToModify:{t:0,b:{t:2,i:[{t:3}],s:"💡 Cómo modificar los atajos:"}},modifyInstructions:{t:0,b:{t:2,i:[{t:3}],s:'Haz clic en el botón "Gestionar Atajos" de arriba, o visita chrome://extensions/shortcuts para personalizar las combinaciones de teclas.'}},currentSetting:{t:0,b:{t:2,i:[{t:3,v:"Ajuste actual: "},{t:4,k:"shortcut"}]}},suggestedSetting:{t:0,b:{t:2,i:[{t:3}],s:"Sugerido: Ctrl+Shift+T (Mac: Command+Shift+T)"}},statusCheck:{t:0,b:{t:2,i:[{t:3}],s:"Comprobación del Estado del Atajo"}},checking:{t:0,b:{t:2,i:[{t:3}],s:"Comprobando..."}},checkStatus:{t:0,b:{t:2,i:[{t:3}],s:"Comprobar Estado"}},hotkeySet:{t:0,b:{t:2,i:[{t:3}],s:"El atajo está establecido"}},hotkeyNotSet:{t:0,b:{t:2,i:[{t:3}],s:"El atajo no está establecido"}},shortcut:{t:0,b:{t:2,i:[{t:3}],s:"Atajo"}},command:{t:0,b:{t:2,i:[{t:3}],s:"Comando"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}},pleaseSetHotkey:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, establece un atajo para activar esta función."}},clickManageButton:{t:0,b:{t:2,i:[{t:3}],s:'💡 Haz clic en el botón "Gestionar Atajos" de arriba para configurarlo, o visita'}},clickCheckButton:{t:0,b:{t:2,i:[{t:3}],s:'Haz clic en el botón "Comprobar Estado" para verificar la configuración del atajo.'}},checkFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al comprobar el estado del atajo"}}},translationSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Configuración del Servicio de Traducción"}},apiRequestSettings:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de Solicitud de API"}},timeoutSeconds:{t:0,b:{t:2,i:[{t:3}],s:"Tiempo de espera (segundos)"}},globalSetting:{t:0,b:{t:2,i:[{t:3}],s:"Ajuste Global"}},timeoutDescription:{t:0,b:{t:2,i:[{t:3}],s:"Establece el tiempo máximo de espera para todas las solicitudes de API. Introduce"}},noTimeoutLimit:{t:0,b:{t:2,i:[{t:3}],s:"para no tener límite de tiempo de espera."}},timeoutPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Introduce el tiempo de espera en segundos, 0 para ilimitado"}},seconds:{t:0,b:{t:2,i:[{t:3}],s:"segundos"}},unlimited:{t:0,b:{t:2,i:[{t:3}],s:"Ilimitado"}},secondsValue:{t:0,b:{t:2,i:[{t:4,k:"value"},{t:3,v:" segundos"}]}},currentActiveConfig:{t:0,b:{t:2,i:[{t:3}],s:"Configuración Activa Actual"}},selectApiConfig:{t:0,b:{t:2,i:[{t:3}],s:"Seleccionar Configuración de API"}},provider:{t:0,b:{t:2,i:[{t:3}],s:"Proveedor"}},model:{t:0,b:{t:2,i:[{t:3}],s:"Modelo"}},endpoint:{t:0,b:{t:2,i:[{t:3}],s:"Endpoint"}},status:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}},configured:{t:0,b:{t:2,i:[{t:3}],s:"Configurado"}},notConfigured:{t:0,b:{t:2,i:[{t:3}],s:"Clave de API no configurada"}},manageConfig:{t:0,b:{t:2,i:[{t:3}],s:"Gestionar Configuraciones"}},addConfig:{t:0,b:{t:2,i:[{t:3}],s:"Añadir Configuración"}},connectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"Conexión exitosa"}},connectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error de conexión"}},noConfigMessage:{t:0,b:{t:2,i:[{t:3}],s:'Aún no hay configuraciones. Haz clic en el botón "Añadir Configuración" de arriba para crear una.'}},editConfig:{t:0,b:{t:2,i:[{t:3}],s:"Editar Configuración"}},addNewConfig:{t:0,b:{t:2,i:[{t:3}],s:"Añadir Nueva Configuración"}},configName:{t:0,b:{t:2,i:[{t:3}],s:"Nombre de la Configuración"}},inputConfigName:{t:0,b:{t:2,i:[{t:3}],s:"Introduce el nombre de la configuración"}},serviceProvider:{t:0,b:{t:2,i:[{t:3}],s:"Proveedor de Servicios"}},selectServiceProvider:{t:0,b:{t:2,i:[{t:3}],s:"Selecciona un proveedor de servicios"}},openai:{t:0,b:{t:2,i:[{t:3}],s:"OpenAI"}},deepseek:{t:0,b:{t:2,i:[{t:3}],s:"DeepSeek"}},siliconFlow:{t:0,b:{t:2,i:[{t:3}],s:"Silicon Flow"}},googleGemini:{t:0,b:{t:2,i:[{t:3}],s:"Google Gemini"}},proxyGemini:{t:0,b:{t:2,i:[{t:3}],s:"Proxy-Gemini"}},anthropic:{t:0,b:{t:2,i:[{t:3}],s:"Anthropic"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Personalizado"}},customProviderName:{t:0,b:{t:2,i:[{t:3}],s:"Nombre del Proveedor Personalizado"}},inputCustomProviderName:{t:0,b:{t:2,i:[{t:3}],s:"Introduce el nombre del proveedor personalizado"}},apiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"Endpoint de la API"}},apiEndpointPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"https://xxxxx/v1/chat/completions"}},proxyApiEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"Endpoint de la API Proxy"}},inputProxyEndpoint:{t:0,b:{t:2,i:[{t:3}],s:"Introduce la URL de tu endpoint proxy"}},apiKey:{t:0,b:{t:2,i:[{t:3}],s:"Clave de API"}},inputApiKey:{t:0,b:{t:2,i:[{t:3}],s:"Introduce la Clave de API"}},modelName:{t:0,b:{t:2,i:[{t:3}],s:"Nombre del Modelo"}},inputModelName:{t:0,b:{t:2,i:[{t:3}],s:"gpt-4o-mini"}},temperatureParam:{t:0,b:{t:2,i:[{t:3,v:"Temperatura ("},{t:4,k:"value"},{t:3,v:")"}]}},requestsPerSecond:{t:0,b:{t:2,i:[{t:3,v:"Límite de Solicitudes por Segundo ("},{t:4,k:"value"},{t:3,v:")"}]}},noLimit:{t:0,b:{t:2,i:[{t:3}],s:"Sin Límite"}},requestsPerSecondUnit:{t:0,b:{t:2,i:[{t:3}],s:"sol/s"}},requestsPerSecondDescription:{t:0,b:{t:2,i:[{t:3}],s:"Establece el número máximo de solicitudes de API por segundo. 0 significa sin límite. Se recomienda establecer un límite apropiado para evitar errores 429 de la API."}},inputRequestsPerSecond:{t:0,b:{t:2,i:[{t:3}],s:"0 = sin límite"}},enableThinkingMode:{t:0,b:{t:2,i:[{t:3}],s:"Activar Modo de Pensamiento"}},enableThinkingModeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Controla si se activa la salida del proceso de pensamiento de la IA."}},includeThinkingParam:{t:0,b:{t:2,i:[{t:3}],s:"Enviar parámetro de pensamiento en la solicitud"}},includeThinkingParamDescription:{t:0,b:{t:2,i:[{t:3}],s:"Controla si el parámetro enable_thinking se envía a la API (algunos modelos no soportan este parámetro)."}},sendRequestThroughBackground:{t:0,b:{t:2,i:[{t:3}],s:"Enviar solicitudes a través del segundo plano de la extensión"}},sendRequestThroughBackgroundDescription:{t:0,b:{t:2,i:[{t:3}],s:"Activa esta opción para evitar restricciones de CORS, adecuada para servicios de API inaccesibles. Se recomienda activarla si encuentras errores de dominio cruzado."}},customApiParams:{t:0,b:{t:2,i:[{t:3}],s:"Parámetros de API Personalizados"}},customApiParamsDescription:{t:0,b:{t:2,i:[{t:3}],s:"Soporta la adición de parámetros de API extra como top_p, presence_penalty, etc. (en formato JSON)."}},formatJson:{t:0,b:{t:2,i:[{t:3}],s:"Formatear JSON"}},clear:{t:0,b:{t:2,i:[{t:3}],s:"Limpiar"}},showExample:{t:0,b:{t:2,i:[{t:3}],s:"Mostrar Ejemplo"}},hideExample:{t:0,b:{t:2,i:[{t:3}],s:"Ocultar Ejemplo"}},jsonValid:{t:0,b:{t:2,i:[{t:3}],s:"Formato JSON válido"}},jsonInvalid:{t:0,b:{t:2,i:[{t:3}],s:"Formato JSON inválido"}},commonParamsExample:{t:0,b:{t:2,i:[{t:3}],s:"Ejemplo de Parámetros Comunes:"}},note:{t:0,b:{t:2,i:[{t:3}],s:"Nota:"}},systemParamsNote:{t:0,b:{t:2,i:[{t:3}],s:"Los parámetros del sistema como model, messages, apiKey, etc., serán protegidos por el sistema y no serán sobrescritos."}},apiConnectionTest:{t:0,b:{t:2,i:[{t:3}],s:"Prueba de Conexión de API"}},testConnection:{t:0,b:{t:2,i:[{t:3}],s:"Probar Conexión"}},apiConnectionSuccess:{t:0,b:{t:2,i:[{t:3}],s:"Conexión de API exitosa"}},apiConnectionFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error en la conexión de la API"}},detectedModel:{t:0,b:{t:2,i:[{t:3}],s:"Modelo Detectado"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancelar"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Guardar"}},add:{t:0,b:{t:2,i:[{t:3}],s:"Añadir"}},activate:{t:0,b:{t:2,i:[{t:3}],s:"Activar"}},testing:{t:0,b:{t:2,i:[{t:3}],s:"Probando"}},test:{t:0,b:{t:2,i:[{t:3}],s:"Probar"}},errors:{deleteConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al eliminar la configuración"}},fillRequiredFields:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, completa el nombre de la configuración y la clave de API"}},saveConfigFailed:{t:0,b:{t:2,i:[{t:3}],s:"Error al guardar la configuración"}}}},time:{justNow:{t:0,b:{t:2,i:[{t:3}],s:"Ahora mismo"}},minutesAgo:{t:0,b:{t:2,i:[{t:3,v:"hace "},{t:4,k:"minutes"},{t:3,v:" minutos"}]}},hoursAgo:{t:0,b:{t:2,i:[{t:3,v:"hace "},{t:4,k:"hours"},{t:3,v:" horas"}]}},daysAgo:{t:0,b:{t:2,i:[{t:3,v:"hace "},{t:4,k:"days"},{t:3,v:" días"}]}}},about:{title:{t:0,b:{t:2,i:[{t:3}],s:"Acerca de Asistente de Aprendizaje Inmersivo (illa-helper)"}},logoAlt:{t:0,b:{t:2,i:[{t:3}],s:"Logo de Asistente de Aprendizaje Inmersivo illa-helper"}},appName:{t:0,b:{t:2,i:[{t:3}],s:"Asistente de Aprendizaje Inmersivo (illa-helper)"}},version:{t:0,b:{t:2,i:[{t:3,v:"Versión "},{t:4,k:"version"}]}},description:{t:0,b:{t:2,i:[{t:3}],s:"El Asistente de Aprendizaje Inmersivo (illa-helper) es una extensión de navegador basada en la teoría de entrada comprensible 'i+1', diseñada para ayudarte a aprender idiomas extranjeros de manera fácil y eficiente durante tu navegación diaria a través de un ecosistema inmersivo de traducción y aprendizaje de pronunciación."}},coreFeatures:{t:0,b:{t:2,i:[{t:3}],s:"Características Principales"}},features:{smartTranslation:{title:{t:0,b:{t:2,i:[{t:3}],s:"Traducción Inteligente y Reemplazo de Vocabulario"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Soporta más de 20 idiomas y selecciona inteligentemente el vocabulario según tu nivel."}}},pronunciation:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ecosistema de Aprendizaje de Pronunciación"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Integra fonética, definiciones de palabras por IA y lectura de voz dual TTS para una experiencia de aprendizaje de pronunciación todo en uno."}}},learningStyles:{title:{t:0,b:{t:2,i:[{t:3}],s:"Múltiples Estilos de Aprendizaje"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Ofrece 7 estilos de traducción diferentes (ej. subrayado, resaltado, difuminado) para satisfacer necesidades de aprendizaje personalizadas."}}},interactive:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ventana Flotante Interactiva"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Pasa el ratón para ver la pronunciación y definición detallada de palabras y frases, con soporte para búsquedas anidadas."}}}},versionUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Actualización de Versión"}},currentVersion:{t:0,b:{t:2,i:[{t:3,v:"Versión Actual: v"},{t:4,k:"version"}]}},newVersionFound:{t:0,b:{t:2,i:[{t:3,v:"New version found: v"},{t:4,k:"version"}]}},latestVersion:{t:0,b:{t:2,i:[{t:3}],s:"Ya estás en la última versión"}},lastCheck:{t:0,b:{t:2,i:[{t:3,v:"Última comprobación: "},{t:4,k:"time"}]}},checking:{t:0,b:{t:2,i:[{t:3}],s:"Comprobando..."}},checkUpdate:{t:0,b:{t:2,i:[{t:3}],s:"Buscar Actualizaciones"}},releaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"Notas de la Versión"}},availableDownloads:{t:0,b:{t:2,i:[{t:3,v:"Descargas disponibles (Navegador actual: "},{t:4,k:"browser"},{t:3,v:")"}]}},recommended:{t:0,b:{t:2,i:[{t:3}],s:"Recomendado"}},downloading:{t:0,b:{t:2,i:[{t:3}],s:"Descargando..."}},downloadFile:{t:0,b:{t:2,i:[{t:3}],s:"Descargar Archivo"}},viewDetails:{t:0,b:{t:2,i:[{t:3}],s:"Ver Detalles"}},dismissVersion:{t:0,b:{t:2,i:[{t:3}],s:"Ignorar esta versión"}},supportAndFeedback:{t:0,b:{t:2,i:[{t:3}],s:"Soporte y Comentarios"}},supportDescription:{t:0,b:{t:2,i:[{t:3}],s:"¡Tu apoyo es nuestra motivación para seguir mejorando! Si encuentras útil esta extensión, no dudes en darnos una estrella en GitHub o contribuir al desarrollo."}},starOnGitHub:{t:0,b:{t:2,i:[{t:3}],s:"Estrella en GitHub"}},reportIssue:{t:0,b:{t:2,i:[{t:3}],s:"Reportar un Problema"}},contribute:{t:0,b:{t:2,i:[{t:3}],s:"Contribuir"}},noReleaseNotes:{t:0,b:{t:2,i:[{t:3}],s:"No hay notas de la versión disponibles"}}},dataManagement:{title:{t:0,b:{t:2,i:[{t:3}],s:"Gestión de Datos"}},exportSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Exportar Ajustes"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Exporta todos tus ajustes actuales a un archivo JSON, incluyendo configuraciones de usuario, ajustes de API y reglas de gestión de sitios web. Puedes guardar este archivo como copia de seguridad o importarlo en otros dispositivos."}},button:{t:0,b:{t:2,i:[{t:3}],s:"Exportar Ajustes"}},success:{t:0,b:{t:2,i:[{t:3,v:"¡Ajustes exportados con éxito! Se incluyeron "},{t:4,k:"count"},{t:3,v:" reglas de sitios web."}]}},error:{t:0,b:{t:2,i:[{t:3}],s:"La exportación ha fallado. Por favor, revisa la consola para más detalles."}}},importSettings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Importar Ajustes"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Importa ajustes desde un archivo JSON, incluyendo configuraciones de usuario y reglas de gestión de sitios web. Ten en cuenta: Esto sobrescribirá todos tus ajustes actuales. Se admiten formatos nuevos y antiguos; los formatos antiguos solo importarán los ajustes de usuario."}},button:{t:0,b:{t:2,i:[{t:3}],s:"Confirmar Importación"}},selectFile:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, selecciona un archivo primero."}},success:{t:0,b:{t:2,i:[{t:3}],s:"¡Importación completada!"}},userSettingsSuccess:{t:0,b:{t:2,i:[{t:3}],s:"¡Ajustes de usuario importados con éxito!"}},error:{t:0,b:{t:2,i:[{t:3}],s:"La importación ha fallado. El formato del archivo puede ser incorrecto."}},readError:{t:0,b:{t:2,i:[{t:3}],s:"Ocurrió un error al leer el archivo."}},unrecognizedFormat:{t:0,b:{t:2,i:[{t:3}],s:"Formato de archivo no reconocido"}}},errors:{cannotReadFile:{t:0,b:{t:2,i:[{t:3}],s:"No se puede leer el contenido del archivo."}}}},appearanceSettings:{floatingBall:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de la Burbuja Flotante"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Activar Burbuja Flotante"}},position:{t:0,b:{t:2,i:[{t:3}],s:"Posición"}},opacity:{t:0,b:{t:2,i:[{t:3}],s:"Opacidad"}}},pronunciationTooltip:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de la Ventana de Definición Flotante"}},enabled:{t:0,b:{t:2,i:[{t:3}],s:"Activar Ventana de Definición Flotante"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Muestra el significado y la pronunciación de la palabra al pasar el ratón sobre el texto traducido."}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Ctrl+Pasar el ratón"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Muestra la ventana de definición solo al mantener pulsado Ctrl y pasar el ratón."}}}},options:{title:{t:0,b:{t:2,i:[{t:3}],s:"Asistente de Aprendizaje Inmersivo illa-helper"}},toggleTheme:{t:0,b:{t:2,i:[{t:3}],s:"Cambiar Tema"}},basic:{t:0,b:{t:2,i:[{t:3}],s:"Básico"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"Traducción"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"Sitios Web"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"Burbuja Flotante"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Atajos"}},data:{t:0,b:{t:2,i:[{t:3}],s:"Importar/Exportar"}},about:{t:0,b:{t:2,i:[{t:3}],s:"Acerca de"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes"}},basicFunctions:{t:0,b:{t:2,i:[{t:3}],s:"Funciones Básicas"}},advancedFunctions:{t:0,b:{t:2,i:[{t:3}],s:"Funciones Avanzadas"}},managementTools:{t:0,b:{t:2,i:[{t:3}],s:"Herramientas de Gestión"}},navigation:{basic:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes Básicos"}},basicDescription:{t:0,b:{t:2,i:[{t:3}],s:"Configuraciones básicas y preferencias de usuario"}},floating:{t:0,b:{t:2,i:[{t:3}],s:"Burbuja Flotante"}},floatingDescription:{t:0,b:{t:2,i:[{t:3}],s:"Configuración de la burbuja de herramientas flotante"}},hotkey:{t:0,b:{t:2,i:[{t:3}],s:"Atajos de Teclado"}},hotkeyDescription:{t:0,b:{t:2,i:[{t:3}],s:"Ajustes de los atajos de teclado para la traducción"}},translation:{t:0,b:{t:2,i:[{t:3}],s:"Servicio de Traducción"}},translationDescription:{t:0,b:{t:2,i:[{t:3}],s:"Configuración de API y estrategia de traducción"}},websiteManagement:{t:0,b:{t:2,i:[{t:3}],s:"Gestión de Sitios Web"}},websiteManagementDescription:{t:0,b:{t:2,i:[{t:3}],s:"Gestión de listas blancas y negras"}},data:{t:0,b:{t:2,i:[{t:3}],s:"Importar/Exportar"}},dataDescription:{t:0,b:{t:2,i:[{t:3}],s:"Copia de seguridad y restauración de la configuración"}},about:{t:0,b:{t:2,i:[{t:3}],s:"Acerca de"}},aboutDescription:{t:0,b:{t:2,i:[{t:3}],s:"Información de la versión y ayuda"}}}}},bo=["zh-CN","en-US","ja-JP","ko-KR","es-ES"],So="en-US",cs={zh:"zh-CN","zh-CN":"zh-CN","zh-TW":"zh-CN","zh-HK":"zh-CN",en:"en-US","en-US":"en-US","en-GB":"en-US",ja:"ja-JP","ja-JP":"ja-JP",ko:"ko-KR","ko-KR":"ko-KR",es:"es-ES","es-ES":"es-ES","es-MX":"es-ES","es-AR":"es-ES"};function eh(){var i;try{const t=navigator.language||((i=navigator.languages)==null?void 0:i[0]);if(!t)return null;if(cs[t])return cs[t];const e=t.split("-")[0];return cs[e]?cs[e]:null}catch{return null}}const Un=Hd({locale:So,fallbackLocale:"en-US",messages:{"zh-CN":Jd,"en-US":Xd,"ja-JP":Qd,"ko-KR":Zd,"es-ES":th},missingWarn:!1,fallbackWarn:!1,flatJson:!1});function $n(i){bo.includes(i)&&(Un.global.locale.value=i,localStorage.setItem("preferred-locale",i))}function ih(){const i=localStorage.getItem("preferred-locale");if(i&&bo.includes(i)){$n(i);return}const t=eh();if(t){$n(t);return}$n(So)}const sh=`
:root {
  --wxt-primary-color: #6a88e0;
  --wxt-accent-color: #ffafcc;
  --wxt-label-color: #546e7a;
}
`,nh=`
/* 基础样式 */
.wxt-word-container {
  display: inline;
  position: relative;
}

.wxt-chinese {
  display: inline;
}

.wxt-original-word {
  background: linear-gradient(to right, var(--wxt-primary-color) 0%, var(--wxt-primary-color) 50%, transparent 50%, transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.wxt-english {
  display: inline;
  margin-left: 4px;
  font-size: 0.9em;
  vertical-align: baseline;
}

/* 学习模式样式 */
.wxt-translation-term--learning {
  filter: blur(5px);
  cursor: pointer;
  color: var(--wxt-primary-color);
  transition: filter 0.2s ease-in-out;
}

.wxt-translation-term--learning:hover {
  filter: blur(0);
}

/* 学习模式原文样式 - 全面增强悬停支持 */
.wxt-original-word--learning {
  filter: blur(5px);
  cursor: pointer;
  transition: filter 0.2s ease-in-out;
}

.wxt-original-word--learning:hover {
  filter: blur(0) !important;
}

/* 增强a标签内学习模式的悬停支持 */
a .wxt-original-word--learning:hover,
a:hover .wxt-original-word--learning {
  filter: blur(0) !important;
}

/* 短语翻译双层交互样式 */
.wxt-has-word-overlay {
  position: relative !important;
}

.wxt-word-hover-area {
  position: absolute;
  pointer-events: auto;
  z-index: 1;
  background: transparent;
  cursor: pointer;
  transition: background-color 0.2s ease;
  border-radius: 2px;
}

.wxt-word-hover-area:hover {
  background-color: rgba(106, 136, 224, 0.1) !important;
}

.wxt-word-hover-area.wxt-pronunciation-enabled:hover {
  background-color: rgba(106, 136, 224, 0.15) !important;
}

/* 处理状态样式 */
.wxt-processing {
  pointer-events: none !important;
}

/* 确保链接元素在处理状态下仍然可以点击 */
a.wxt-processing,
a.wxt-processing *,
.wxt-processing a,
.wxt-processing a * {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* 确保按钮元素在处理状态下仍然可以点击 */
button.wxt-processing,
button.wxt-processing *,
.wxt-processing button,
.wxt-processing button * {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* 确保可点击元素在处理状态下仍然可以点击 */
[onclick].wxt-processing,
[onclick].wxt-processing *,
.wxt-processing [onclick],
.wxt-processing [onclick] * {
  pointer-events: auto !important;
  cursor: pointer !important;
}


/* 错误状态样式 */
.wxt-error {
  color: #ff6b6b !important;
  text-decoration: line-through;
}

/* 响应式适配 */
@media (max-width: 768px) {
  .wxt-word-container {
    font-size: 14px;
  }

  .wxt-english {
    font-size: 0.85em;
  }
}

/* 动画定义 */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ===== 翻译状态控制系统 ===== */

/**
 * 全局翻译状态控制
 *
 * 原理：通过在 body 上添加/移除 CSS 类来控制所有翻译内容的显示状态
 * 优势：
 * - 高性能：避免逐个元素操作
 * - 自动继承：新添加的翻译内容自动应用当前状态
 * - 统一管理：所有翻译内容状态保持一致
 */
.wxt-translation-hidden .wxt-translation-term {
  display: none !important;
}

/**
 * 状态切换过渡效果
 * 为翻译内容的显示/隐藏提供平滑的视觉过渡
 */
.wxt-translation-term {
  transition: opacity 0.2s ease-in-out;
}
`,rh=`
/* 默认样式 */
.wxt-style-default {
  color: var(--wxt-primary-color);
  font-weight: 500;
}

/* 微妙样式 */
.wxt-style-subtle {
  color: var(--wxt-label-color);
  opacity: 0.9;
}

/* 粗体样式 */
.wxt-style-bold {
  color: var(--wxt-primary-color);
  font-weight: bold;
}

/* 斜体样式 */
.wxt-style-italic {
  color: var(--wxt-primary-color);
  font-style: italic;
}

/* 下划线样式 */
.wxt-style-underlined {
  color: var(--wxt-primary-color);
  text-decoration: none;
  padding-bottom: 1px;
  border-bottom: 2px solid var(--wxt-accent-color);
}

/* 高亮样式 */
.wxt-style-highlighted {
  color: #212529;
  background-color: #ffeb3b;
  padding: 0 2px;
  border-radius: 2px;
}

/* 点画线样式 */
.wxt-style-dotted {
  background: linear-gradient(to right, #57bcb8 0%, #59c1bf 50%, transparent 50%, transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.wxt-style-dotted:hover {
  border-color: var(--wxt-primary-color);
}

/* 学习模式样式 */
.wxt-translation-term--learning {
  filter: blur(5px);
  cursor: pointer;
  color: var(--wxt-primary-color);
  transition: filter 0.2s ease-in-out;
}

.wxt-translation-term--learning:hover {
  filter: blur(0);
}

/* 学习模式原文样式 - 全面增强悬停支持 */
.wxt-original-word--learning {
  filter: blur(5px);
  cursor: pointer;
  transition: filter 0.2s ease-in-out;
}

.wxt-original-word--learning:hover {
  filter: blur(0) !important;
}

/* 增强a标签内学习模式的悬停支持 */
a .wxt-original-word--learning:hover,
a:hover .wxt-original-word--learning {
  filter: blur(0) !important;
}



/* 段落翻译兼容性样式 - 仅保留翻译状态控制 */
.wxt-translation-hidden .illa-paragraph-translation {
  display: none !important;
}
`,ah=`
/* 发音功能样式 */
.wxt-pronunciation-enabled {
  position: relative;
  transition: all 0.2s ease;
}

.wxt-pronunciation-enabled:hover {
  background-color: rgba(106, 136, 224, 0.1);
  border-radius: 3px;
}

.wxt-pronunciation-loading {
  opacity: 0.7;
  position: relative;
}

.wxt-pronunciation-loading::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  margin: auto;
  border: 2px solid transparent;
  border-top-color: #6a88e0;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  top: -2px;
  right: -16px;
}

/* 音频按钮样式 */
.wxt-audio-btn {
  background: linear-gradient(135deg, #64ffda 0%, #1de9b6 100%);
  border: none;
  border-radius: 8px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #000000;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  box-shadow:
    0 3px 8px rgba(100, 255, 218, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.wxt-audio-btn:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 5px 15px rgba(100, 255, 218, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.wxt-audio-btn:active {
  transform: translateY(-1px) scale(1.02);
  box-shadow:
    0 2px 6px rgba(100, 255, 218, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* 音标样式 */
.wxt-phonetic-text {
  font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
  font-size: 15px;
  color: #64ffda;
  font-style: normal;
  font-weight: 600;
  background: linear-gradient(135deg, rgba(100, 255, 218, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%);
  padding: 6px 12px;
  border-radius: 8px;
  display: inline-block;
  border: 1px solid rgba(100, 255, 218, 0.3);
  letter-spacing: 0.03em;
  box-shadow: 0 2px 8px rgba(100, 255, 218, 0.15);
}

/* 音标错误提示样式 */
.wxt-phonetic-error {
  font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
  font-size: 13px;
  color: #ff9999;
  font-style: italic;
  font-weight: 500;
  background: linear-gradient(135deg, rgba(255, 153, 153, 0.1) 0%, rgba(255, 153, 153, 0.05) 100%);
  padding: 4px 8px;
  border-radius: 6px;
  display: inline-block;
  border: 1px solid rgba(255, 153, 153, 0.3);
  letter-spacing: 0.02em;
  opacity: 0.8;
}

/* 注意：音标行样式已移至 tooltip.ts，因为主要在悬浮框中使用 */

/* 音标加载状态 */
.wxt-phonetic-loading {
  font-size: 12px;
  color: #a0a0a0;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  font-style: italic;
  margin-bottom: 4px;
  text-align: center;
}

.wxt-phonetic-loading::after {
  content: '';
  width: 10px;
  height: 10px;
  border: 2px solid transparent;
  border-top-color: #64ffda;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  flex-shrink: 0;
}

/* 注意：口音按钮样式已移至 tooltip.ts 避免重复 */
`,oh=`
/* 深色词典风格工具提示卡片 */
.wxt-pronunciation-tooltip {
  position: fixed;
  z-index: 10000;
  pointer-events: auto;
  animation: wxt-tooltip-appear 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  filter: drop-shadow(0 20px 25px rgba(0, 0, 0, 0.25)) drop-shadow(0 10px 10px rgba(0, 0, 0, 0.06));
}

@keyframes wxt-tooltip-appear {
  from {
    opacity: 0;
    transform: translateY(-12px) scale(0.94);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.wxt-tooltip-card {
  background: linear-gradient(145deg, #2c2c2e 0%, #1c1c1e 100%);
  border: 1px solid #48484a;
  border-radius: 14px;
  box-shadow:
    0 16px 32px -10px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  padding: 0;
  min-width: 220px;
  max-width: 300px;
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(20px);
}

.wxt-tooltip-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.12), transparent);
}

.wxt-tooltip-header {
  background: linear-gradient(135deg, rgba(58, 58, 60, 0.8) 0%, rgba(42, 42, 44, 0.9) 100%);
  padding: 16px 16px 12px 16px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  position: relative;
}

/* 短语悬浮框header特殊布局 */
.wxt-phrase-tooltip-header {
  align-items: flex-start;
  gap: 12px;
}

.wxt-tooltip-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 16px;
  right: 16px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
}

.wxt-tooltip-body {
  font-size: 12px;
}

/* 短语悬浮框的body样式 */
.wxt-phrase-tooltip-body {
  padding: 8px 16px 12px 16px;
}

.wxt-phrase-words {
  padding: 6px 8px;
  font-size: 12px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  margin: 0;
  position: relative;
  min-height: 32px;
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  align-content: flex-start;
}

.wxt-phrase-words::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
}

.wxt-word-info {
  flex: 1;
  min-width: 0;
}

.wxt-word-main {
  font-size: 14px;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 0;
  word-break: break-word;
  letter-spacing: -0.02em;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.wxt-phonetic-row {
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.wxt-phonetic-text {
  font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
  font-size: 13px;
  color: #64ffda;
  font-style: normal;
  font-weight: 600;
  background: linear-gradient(135deg, rgba(100, 255, 218, 0.15) 0%, rgba(52, 211, 153, 0.15) 100%);
  padding: 4px 8px;
  border-radius: 6px;
  display: inline-block;
  border: 1px solid rgba(100, 255, 218, 0.3);
  letter-spacing: 0.02em;
  box-shadow: 0 2px 6px rgba(100, 255, 218, 0.15);
}

/* 音标错误提示样式 */
.wxt-phonetic-error {
  font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
  font-size: 13px;
  color: #ff9999;
  font-style: italic;
  font-weight: 500;
  background: linear-gradient(135deg, rgba(255, 153, 153, 0.1) 0%, rgba(255, 153, 153, 0.05) 100%);
  padding: 4px 8px;
  border-radius: 6px;
  display: inline-block;
  border: 1px solid rgba(255, 153, 153, 0.3);
  letter-spacing: 0.02em;
  opacity: 0.8;
}

/* 嵌套单词悬浮框标题行布局 */
.wxt-word-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 6px;
}

.wxt-word-title-row .wxt-word-main {
  flex: 1;
}

.wxt-word-title-row .wxt-accent-buttons {
  flex-shrink: 0;
}

.wxt-audio-btn {
  background: linear-gradient(135deg, #64ffda 0%, #1de9b6 100%);
  border: none;
  border-radius: 10px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #000000;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  box-shadow:
    0 3px 10px rgba(100, 255, 218, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  position: relative;
  overflow: hidden;
}

.wxt-audio-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 50%);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.wxt-audio-btn:hover {
  transform: translateY(-2px) scale(1.08);
  box-shadow:
    0 8px 20px rgba(100, 255, 218, 0.5),
    0 0 0 1px rgba(255, 255, 255, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.wxt-audio-btn:hover::before {
  opacity: 1;
}

.wxt-audio-btn:active {
  transform: translateY(-1px) scale(1.02);
  box-shadow:
    0 4px 12px rgba(100, 255, 218, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.wxt-audio-btn svg {
  width: 14px;
  height: 14px;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

/* 工具提示箭头 */
.wxt-tooltip-arrow {
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 12px;
  height: 12px;
  background: #2a2a2c;
  border: 1px solid #48484a;
  border-top: none;
  border-left: none;
}

.wxt-tooltip-arrow-top {
  bottom: auto;
  top: -6px;
  transform: translateX(-50%) rotate(-135deg);
  border: 1px solid #48484a;
  border-bottom: none;
  border-right: none;
}

/* ===== 短语悬浮框专用样式 ===== */

/* 短语信息容器 - 简洁版 */
.wxt-phrase-info-card {
  flex: 1;
  min-width: 0;
}

/* 短语标题 */
.wxt-phrase-title {
  font-size: 15px;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 4px;
  line-height: 1.2;
  letter-spacing: -0.01em;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* 短语原文显示 */
.wxt-phrase-original {
  font-size: 10px;
  color: #64ffda;
  font-style: italic;
  opacity: 0.9;
  background: linear-gradient(135deg, rgba(100, 255, 218, 0.12) 0%, rgba(52, 211, 153, 0.08) 100%);
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid rgba(100, 255, 218, 0.2);
  display: inline-block;
  margin-top: 4px;
  letter-spacing: 0.02em;
  box-shadow: 0 1px 3px rgba(100, 255, 218, 0.1);
}

/* 短语音频按钮 */
.wxt-phrase-audio-btn {
  width: 32px !important;
  height: 32px !important;
  flex-shrink: 0;
  align-self: flex-start;
}

.wxt-pronunciation-tooltip button{
  min-width: 20px !important;
  padding: 0 !important;
  margin: 0 !important;
}

.wxt-word-tooltip button{
  min-width: 20px !important;
  padding: 0 !important;
  margin: 0 !important;
}




.wxt-word-list {
  line-height: 1.6;
  padding: 3px 0;
  font-size: 11px;
}

.wxt-interactive-word {
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 5px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: inline-block;
  margin: 2px 2px;
  color: #e5e5e7;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
  border: 1px solid rgba(255, 255, 255, 0.15);
  font-weight: 500;
  font-size: 11px;
  line-height: 1.2;
  position: relative;
  overflow: hidden;
}

.wxt-interactive-word::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(52, 211, 153, 0.1), transparent);
  transition: left 0.3s ease;
}

.wxt-interactive-word:hover {
  background: linear-gradient(135deg, rgba(52, 211, 153, 0.2) 0%, rgba(52, 211, 153, 0.1) 100%);
  color: #34d399;
  transform: translateY(-1px);
  border-color: rgba(52, 211, 153, 0.4);
  box-shadow: 0 3px 12px rgba(52, 211, 153, 0.25);
}

.wxt-interactive-word:hover::before {
  left: 100%;
}

/* 单词悬浮框样式(更小更简洁) */
.wxt-word-tooltip {
  position: fixed;
  z-index: 10001;
  visibility: hidden;
  opacity: 0;
  transition: all 0.2s ease;
  pointer-events: auto;
  animation: wxt-word-tooltip-appear 0.15s ease-out;
}

.wxt-word-tooltip[data-show="true"] {
  visibility: visible;
  opacity: 1;
}

@keyframes wxt-word-tooltip-appear {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.wxt-word-tooltip-card {
  background: linear-gradient(145deg, #2c2c2e 0%, #1c1c1e 100%);
  border: 1px solid #48484a;
  border-radius: 10px;
  padding: 12px 14px;
  color: white;
  font-size: 12px;
  box-shadow:
    0 10px 25px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  max-width: 200px;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(15px);
}

.wxt-word-tooltip-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
}

.wxt-word-tooltip-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

.wxt-word-tooltip-header .wxt-word-info {
  flex: 1;
  min-width: 0;
}

.wxt-word-tooltip-header .wxt-word-main {
  font-weight: 700;
  font-size: 13px;
  color: #ffffff;
  letter-spacing: -0.02em;
  margin-bottom: 0;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.wxt-word-tooltip-header .wxt-phonetic-row {
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

.wxt-phonetic-container {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wxt-word-tooltip-header .wxt-phonetic-text {
  font-size: 12px;
  color: #64ffda;
  font-style: normal;
  font-weight: 600;
  background: linear-gradient(135deg, rgba(100, 255, 218, 0.12) 0%, rgba(52, 211, 153, 0.12) 100%);
  padding: 4px 8px;
  border-radius: 5px;
  border: 1px solid rgba(100, 255, 218, 0.25);
  font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
  letter-spacing: 0.02em;
  box-shadow: 0 1px 3px rgba(100, 255, 218, 0.1);
  text-align: center;
  margin-bottom: 3px;
}

.wxt-accent-buttons {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.wxt-accent-group {
  display: flex;
  align-items: center;
  gap: 4px;
}

.wxt-accent-label {
  font-size: 10px;
  font-weight: 600;
  color: #a0a0a0;
  min-width: 14px;
  text-align: center;
  background: rgba(255, 255, 255, 0.08);
  padding: 1px 4px;
  border-radius: 3px;
  letter-spacing: 0.3px;
}

.wxt-accent-audio-btn {
  background: linear-gradient(135deg, #64ffda 0%, #1de9b6 100%);
  border: none;
  border-radius: 5px;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #000000;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  box-shadow:
    0 2px 5px rgba(100, 255, 218, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.wxt-accent-audio-btn:hover {
  transform: translateY(-1px) scale(1.1);
  box-shadow:
    0 3px 8px rgba(100, 255, 218, 0.35),
    0 0 0 1px rgba(255, 255, 255, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.wxt-accent-audio-btn:active {
  transform: translateY(0) scale(1.05);
  box-shadow:
    0 1px 4px rgba(100, 255, 218, 0.2),
    0 0 0 1px rgba(255, 255, 255, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* 原文显示样式 */
.wxt-original-text {
  font-size: 10px;
  color: #a0a0a0;
  font-style: italic;
  margin: 6px 0 0 0;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  opacity: 0.85;
  text-align: center;
  position: relative;
}

/* 单词悬浮框中的原文样式 */
.wxt-tooltip-header .wxt-original-text {
  margin: 6px 0 6px 0;
  font-size: 10px;
  background: linear-gradient(135deg, rgba(100, 255, 218, 0.08) 0%, rgba(52, 211, 153, 0.08) 100%);
  border-color: rgba(100, 255, 218, 0.15);
  color: #64ffda;
  opacity: 0.9;
}

/* 词义容器样式 */
.wxt-meaning-container {
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  min-height: 20px;
  display: flex;
  align-items: center;
}

.wxt-meaning-text {
  font-size: 11px;
  color: #e5e5e7;
  line-height: 1.4;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%);
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin: 0;
  font-style: italic;
  opacity: 0.95;
  flex: 1;
}

.wxt-meaning-loading {
  font-size: 11px;
  color: #a0a0a0;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 5px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  font-style: italic;
  flex: 1;
}

.wxt-meaning-loading::after {
  content: '';
  width: 12px;
  height: 12px;
  border: 2px solid transparent;
  border-top-color: #64ffda;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  flex-shrink: 0;
}

.wxt-phonetic-loading {
  font-size: 12px;
  color: #a0a0a0;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  font-style: italic;
  margin-bottom: 4px;
  text-align: center;
}

.wxt-phonetic-loading::after {
  content: '';
  width: 10px;
  height: 10px;
  border: 2px solid transparent;
  border-top-color: #64ffda;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  flex-shrink: 0;
}

/* 词义容器在单词悬浮框中的样式 */
.wxt-word-tooltip .wxt-meaning-container {
  margin-top: 6px;
  padding-top: 6px;
  min-height: 20px;
}

.wxt-word-tooltip .wxt-meaning-text {
  font-size: 12px;
  padding: 6px 10px;
}

.wxt-word-tooltip .wxt-meaning-loading {
  font-size: 11px;
  padding: 4px 8px;
}

.wxt-word-tooltip .wxt-meaning-loading::after {
  width: 10px;
  height: 10px;
}

/* 响应式适配 */
@media (max-width: 480px) {
  .wxt-tooltip-card {
    min-width: 200px;
    max-width: 280px;
  }

  .wxt-tooltip-header {
    padding: 14px 14px 10px 14px;
  }

  .wxt-word-main {
    font-size: 13px;
  }

  .wxt-phonetic-text {
    font-size: 12px;
  }

  .wxt-audio-btn {
    width: 32px;
    height: 32px;
  }

  .wxt-audio-btn svg {
    width: 12px;
    height: 12px;
  }
}
`;class Hn{constructor(){u(this,"currentStyle");u(this,"customCSS","");u(this,"customStyleElement",null);u(this,"mainStyleElement",null);this.currentStyle=Te.DEFAULT,this.initializeStyles()}setTranslationStyle(t){this.currentStyle=t}setCustomCSS(t){this.customCSS=t,this.updateCustomStyle()}getCurrentStyleClass(){return this.currentStyle===Te.LEARNING?"wxt-translation-term--learning":this.currentStyle===Te.CUSTOM?"wxt-style-custom":`wxt-style-${this.currentStyle}`}updateCustomStyle(){var e;this.customStyleElement||(this.customStyleElement=document.createElement("style"),this.customStyleElement.id="wxt-custom-translation-style",document.head.appendChild(this.customStyleElement));const t=(e=this.customCSS)!=null&&e.trim()?`.wxt-style-custom { ${this.customCSS} }`:".wxt-style-custom { /* 请在设置中添加自定义CSS */ }";this.customStyleElement.textContent=t}initializeStyles(){this.mainStyleElement||(this.mainStyleElement=document.createElement("style"),this.mainStyleElement.id="wxt-main-styles",this.mainStyleElement.textContent=lh,document.head.appendChild(this.mainStyleElement))}cleanup(){this.mainStyleElement&&this.mainStyleElement.parentNode&&(this.mainStyleElement.parentNode.removeChild(this.mainStyleElement),this.mainStyleElement=null),this.customStyleElement&&this.customStyleElement.parentNode&&(this.customStyleElement.parentNode.removeChild(this.customStyleElement),this.customStyleElement=null)}reinitialize(){this.cleanup(),this.initializeStyles(),this.customCSS&&this.updateCustomStyle()}}const lh=`
${sh}
${nh}
${rh}
${ah}
${oh}
`,ch={DEFAULT_TTL:86400},wo={TOOLTIP_Z_INDEX:1e4,WORD_TOOLTIP_Z_INDEX:10001,TOOLTIP_PADDING:12,TOOLTIP_ARROW_SIZE:8},Jt={SHOW_DELAY:300,HIDE_DELAY:600,WORD_SHOW_DELAY:100,YOUDAO_TIMEOUT:1e4},Pi={PRONUNCIATION_ENABLED:"wxt-pronunciation-enabled",PRONUNCIATION_LOADING:"wxt-pronunciation-loading",PHONETIC_INLINE:"wxt-phonetic-inline",PRONUNCIATION_TOOLTIP:"wxt-pronunciation-tooltip",WORD_TOOLTIP:"wxt-word-tooltip",INTERACTIVE_WORD:"wxt-interactive-word",MEANING_CONTAINER:"wxt-meaning-container",MEANING_TEXT:"wxt-meaning-text",MEANING_LOADING:"wxt-meaning-loading",PHONETIC_LOADING:"wxt-phonetic-loading"},us={SPEAKER:'<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>',SPEAKER_SMALL:'<svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>'},vo={DEFAULT_PHONETIC_PROVIDER:"dictionary-api",DEFAULT_TTS_PROVIDER:"youdao"},Ai={YOUDAO_TTS_BASE_URL:"https://dict.youdao.com/dictvoice",DICTIONARY_API_BASE_URL:"https://api.dictionaryapi.dev/api/v2/entries/en/",AI_TRANSLATION_CACHE_TTL:864e5},uh={provider:vo.DEFAULT_TTS_PROVIDER,lang:"en-US",rate:1,pitch:1,volume:1,accent:"us"},dh={showPhonetic:!0,showPlayButton:!0,tooltipEnabled:!0,inlineDisplay:!1,hotkey:Fr},Bn={provider:vo.DEFAULT_PHONETIC_PROVIDER,cacheEnabled:!0,cacheTTL:ch.DEFAULT_TTL,ttsConfig:uh,uiConfig:dh};class hh{constructor(){u(this,"name","dictionary-api");u(this,"baseUrl",Ai.DICTIONARY_API_BASE_URL);u(this,"cache",new Map);u(this,"cacheTTL",Ai.AI_TRANSLATION_CACHE_TTL)}async getPhonetic(t){try{if(!t||typeof t!="string")return{success:!1,error:"单词参数无效"};const e=t.toLowerCase().trim(),s=this.getFromCache(e);if(s)return{success:!0,data:s,cached:!0};const n=await fetch(`${this.baseUrl}${encodeURIComponent(e)}`,{method:"GET",headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36",Referer:location.href}});if(!n.ok){if(n.status===404)return{success:!1,error:"词库无该单词的音标"};throw new Error(`API请求失败: ${n.status} ${n.statusText}`)}const r=await n.json(),a=this.parseApiResponse(r,e);return this.setCache(e,a),{success:!0,data:a,cached:!1}}catch(e){return console.error("获取音标失败:",e),{success:!1,error:e instanceof Error?e.message:"未知错误"}}}async getBatchPhonetics(t){const e=t.map(s=>this.getPhonetic(s));return Promise.all(e)}async isAvailable(){try{const t=await fetch(`${this.baseUrl}hello`,{method:"HEAD",signal:AbortSignal.timeout(5e3)});return t.ok||t.status===404}catch{return!1}}getConfig(){return{endpoint:this.baseUrl,rateLimitPerMinute:450,supportsBatch:!1,supportsAudio:!0}}parseApiResponse(t,e){if(!Array.isArray(t)||t.length===0)throw new Error("API响应数据格式错误");const s=t[0],n=[],r=[];return s.phonetics&&Array.isArray(s.phonetics)&&s.phonetics.forEach(a=>{(a.text||a.audio)&&n.push({text:a.text,audio:a.audio,sourceUrl:a.sourceUrl})}),s.meanings&&Array.isArray(s.meanings)&&s.meanings.forEach(a=>{if(a.partOfSpeech&&a.definitions){const o=a.definitions.map(l=>({definition:l.definition||"",example:l.example,synonyms:l.synonyms}));r.push({partOfSpeech:a.partOfSpeech,definitions:o})}}),{word:e,phonetics:n,meanings:r}}getFromCache(t){const e=this.cache.get(t);return e&&Date.now()-e.timestamp<e.ttl?e.data:(e&&this.cache.delete(t),null)}setCache(t,e){if(this.cache.set(t,{data:e,timestamp:Date.now(),ttl:this.cacheTTL}),this.cache.size>1e3){const s=this.cache.keys().next().value;s&&this.cache.delete(s)}}}var yo;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(yo||(yo={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var To;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(To||(To={}));var Eo;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Eo||(Eo={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=["user","model","function","system"];var xo;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xo||(xo={}));var Po;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Po||(Po={}));var Ao;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Ao||(Ao={}));var Io;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(Io||(Io={}));var Ii;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(Ii||(Ii={}));var Lo;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(Lo||(Lo={}));var ko;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(ko||(ko={}));var _o;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(_o||(_o={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class qe extends nt{constructor(t,e){super(t),this.response=e}}class No extends nt{constructor(t,e,s,n){super(t),this.status=e,this.statusText=s,this.errorDetails=n}}class de extends nt{}class Ro extends nt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="https://generativelanguage.googleapis.com",ph="v1beta",fh="0.24.1",mh="genai-js";var Ae;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ae||(Ae={}));class bh{constructor(t,e,s,n,r){this.model=t,this.task=e,this.apiKey=s,this.stream=n,this.requestOptions=r}toString(){var t,e;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||ph;let r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||gh}/${s}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function Sh(i){const t=[];return i!=null&&i.apiClient&&t.push(i.apiClient),t.push(`${mh}/${fh}`),t.join(" ")}async function wh(i){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",Sh(i.requestOptions)),e.append("x-goog-api-key",i.apiKey);let s=(t=i.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(n){throw new de(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${n.message}`)}for(const[n,r]of s.entries()){if(n==="x-goog-api-key")throw new de(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new de(`Header name ${n} can only be set using the apiClient field`);e.append(n,r)}}return e}async function vh(i,t,e,s,n,r){const a=new bh(i,t,e,s,r);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},Ch(r)),{method:"POST",headers:await wh(a),body:n})}}async function Li(i,t,e,s,n,r={},a=fetch){const{url:o,fetchOptions:l}=await vh(i,t,e,s,n,r);return yh(o,l,a)}async function yh(i,t,e=fetch){let s;try{s=await e(i,t)}catch(n){Th(n,i)}return s.ok||await Eh(s,i),s}function Th(i,t){let e=i;throw e.name==="AbortError"?(e=new Ro(`Request aborted when fetching ${t.toString()}: ${i.message}`),e.stack=i.stack):i instanceof No||i instanceof de||(e=new nt(`Error fetching from ${t.toString()}: ${i.message}`),e.stack=i.stack),e}async function Eh(i,t){let e="",s;try{const n=await i.json();e=n.error.message,n.error.details&&(e+=` ${JSON.stringify(n.error.details)}`,s=n.error.details)}catch{}throw new No(`Error fetching from ${t.toString()}: [${i.status} ${i.statusText}] ${e}`,i.status,i.statusText,s)}function Ch(i){const t={};if((i==null?void 0:i.signal)!==void 0||(i==null?void 0:i.timeout)>=0){const e=new AbortController;(i==null?void 0:i.timeout)>=0&&setTimeout(()=>e.abort(),i.timeout),i!=null&&i.signal&&i.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ds(i.candidates[0]))throw new qe(`${he(i)}`,i);return xh(i)}else if(i.promptFeedback)throw new qe(`Text not available. ${he(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ds(i.candidates[0]))throw new qe(`${he(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Mo(i)[0]}else if(i.promptFeedback)throw new qe(`Function call not available. ${he(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ds(i.candidates[0]))throw new qe(`${he(i)}`,i);return Mo(i)}else if(i.promptFeedback)throw new qe(`Function call not available. ${he(i)}`,i)},i}function xh(i){var t,e,s,n;const r=[];if(!((e=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const a of(n=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||n===void 0?void 0:n.parts)a.text&&r.push(a.text),a.executableCode&&r.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&r.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function Mo(i){var t,e,s,n;const r=[];if(!((e=(t=i.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const a of(n=(s=i.candidates)===null||s===void 0?void 0:s[0].content)===null||n===void 0?void 0:n.parts)a.functionCall&&r.push(a.functionCall);if(r.length>0)return r}const Ph=[Ii.RECITATION,Ii.SAFETY,Ii.LANGUAGE];function ds(i){return!!i.finishReason&&Ph.includes(i.finishReason)}function he(i){var t,e,s;let n="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)n+="Response was blocked",!((t=i.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${i.promptFeedback.blockReason}`),!((e=i.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(n+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((s=i.candidates)===null||s===void 0)&&s[0]){const r=i.candidates[0];ds(r)&&(n+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(n+=`: ${r.finishMessage}`))}return n}function ki(i){return this instanceof ki?(this.v=i,this):new ki(i)}function Ah(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=e.apply(i,t||[]),n,r=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(g){s[g]&&(n[g]=function(m){return new Promise(function(y,C){r.push([g,m,y,C])>1||o(g,m)})})}function o(g,m){try{l(s[g](m))}catch(y){h(r[0][3],y)}}function l(g){g.value instanceof ki?Promise.resolve(g.value.v).then(c,d):h(r[0][2],g)}function c(g){o("next",g)}function d(g){o("throw",g)}function h(g,m){g(m),r.shift(),r.length&&o(r[0][0],r[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Ih(i){const t=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=_h(t),[s,n]=e.tee();return{stream:kh(s),response:Lh(n)}}async function Lh(i){const t=[],e=i.getReader();for(;;){const{done:s,value:n}=await e.read();if(s)return Wn(Nh(t));t.push(n)}}function kh(i){return Ah(this,arguments,function*(){const e=i.getReader();for(;;){const{value:s,done:n}=yield ki(e.read());if(n)break;yield yield ki(Wn(s))}})}function _h(i){const t=i.getReader();return new ReadableStream({start(s){let n="";return r();function r(){return t.read().then(({value:a,done:o})=>{if(o){if(n.trim()){s.error(new nt("Failed to parse stream"));return}s.close();return}n+=a;let l=n.match(Do),c;for(;l;){try{c=JSON.parse(l[1])}catch{s.error(new nt(`Error parsing JSON response: "${l[1]}"`));return}s.enqueue(c),n=n.substring(l[0].length),l=n.match(Do)}return r()}).catch(a=>{let o=a;throw o.stack=a.stack,o.name==="AbortError"?o=new Ro("Request aborted when reading from the stream"):o=new nt("Error reading from the stream"),o})}}})}function Nh(i){const t=i[i.length-1],e={promptFeedback:t==null?void 0:t.promptFeedback};for(const s of i){if(s.candidates){let n=0;for(const r of s.candidates)if(e.candidates||(e.candidates=[]),e.candidates[n]||(e.candidates[n]={index:n}),e.candidates[n].citationMetadata=r.citationMetadata,e.candidates[n].groundingMetadata=r.groundingMetadata,e.candidates[n].finishReason=r.finishReason,e.candidates[n].finishMessage=r.finishMessage,e.candidates[n].safetyRatings=r.safetyRatings,r.content&&r.content.parts){e.candidates[n].content||(e.candidates[n].content={role:r.content.role||"user",parts:[]});const a={};for(const o of r.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),e.candidates[n].content.parts.push(a)}n++}s.usageMetadata&&(e.usageMetadata=s.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(i,t,e,s){const n=await Li(t,Ae.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(e),s);return Ih(n)}async function Fo(i,t,e,s){const r=await(await Li(t,Ae.GENERATE_CONTENT,i,!1,JSON.stringify(e),s)).json();return{response:Wn(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function _i(i){let t=[];if(typeof i=="string")t=[{text:i}];else for(const e of i)typeof e=="string"?t.push({text:e}):t.push(e);return Rh(t)}function Rh(i){const t={role:"user",parts:[]},e={role:"function",parts:[]};let s=!1,n=!1;for(const r of i)"functionResponse"in r?(e.parts.push(r),n=!0):(t.parts.push(r),s=!0);if(s&&n)throw new nt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!n)throw new nt("No content is provided for sending chat message.");return s?t:e}function Mh(i,t){var e;let s={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(e=t==null?void 0:t.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const n=i.generateContentRequest!=null;if(i.contents){if(n)throw new de("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=i.contents}else if(n)s=Object.assign(Object.assign({},s),i.generateContentRequest);else{const r=_i(i);s.contents=[r]}return{generateContentRequest:s}}function $o(i){let t;return i.contents?t=i:t={contents:[_i(i)]},i.systemInstruction&&(t.systemInstruction=Uo(i.systemInstruction)),t}function Dh(i){return typeof i=="string"||Array.isArray(i)?{content:_i(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Oh={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Fh(i){let t=!1;for(const e of i){const{role:s,parts:n}=e;if(!t&&s!=="user")throw new nt(`First content should be with role 'user', got ${s}`);if(!Co.includes(s))throw new nt(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(Co)}`);if(!Array.isArray(n))throw new nt("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new nt("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of n)for(const l of Ho)l in o&&(r[l]+=1);const a=Oh[s];for(const o of Ho)if(!a.includes(o)&&r[o]>0)throw new nt(`Content with role '${s}' can't contain '${o}' part`);t=!0}}function Bo(i){var t;if(i.candidates===void 0||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const s of e.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="SILENT_ERROR";class Uh{constructor(t,e,s,n={}){this.model=e,this.params=s,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s!=null&&s.history&&(Fh(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var s,n,r,a,o,l;await this._sendPromise;const c=_i(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),e);let g;return this._sendPromise=this._sendPromise.then(()=>Fo(this._apiKey,this.model,d,h)).then(m=>{var y;if(Bo(m.response)){this._history.push(c);const C=Object.assign({parts:[],role:"model"},(y=m.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(C)}else{const C=he(m.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}g=m}).catch(m=>{throw this._sendPromise=Promise.resolve(),m}),await this._sendPromise,g}async sendMessageStream(t,e={}){var s,n,r,a,o,l;await this._sendPromise;const c=_i(t),d={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},h=Object.assign(Object.assign({},this._requestOptions),e),g=Oo(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>g).catch(m=>{throw new Error(Wo)}).then(m=>m.response).then(m=>{if(Bo(m)){this._history.push(c);const y=Object.assign({},m.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=he(m);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(m=>{m.message!==Wo&&console.error(m)}),g}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(i,t,e,s){return(await Li(t,Ae.COUNT_TOKENS,i,!1,JSON.stringify(e),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(i,t,e,s){return(await Li(t,Ae.EMBED_CONTENT,i,!1,JSON.stringify(e),s)).json()}async function Bh(i,t,e,s){const n=e.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await Li(t,Ae.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:n}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,e,s={}){this.apiKey=t,this._requestOptions=s,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=Uo(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var s;const n=$o(t),r=Object.assign(Object.assign({},this._requestOptions),e);return Fo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),r)}async generateContentStream(t,e={}){var s;const n=$o(t),r=Object.assign(Object.assign({},this._requestOptions),e);return Oo(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},n),r)}startChat(t){var e;return new Uh(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const s=Mh(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),e);return $h(this.apiKey,this.model,s,n)}async embedContent(t,e={}){const s=Dh(t),n=Object.assign(Object.assign({},this._requestOptions),e);return Hh(this.apiKey,this.model,s,n)}async batchEmbedContents(t,e={}){const s=Object.assign(Object.assign({},this._requestOptions),e);return Bh(this.apiKey,this.model,t,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new nt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zo(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,s){if(!t.name)throw new de("Cached content must contain a `name` field.");if(!t.model)throw new de("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const a of n)if(e!=null&&e[a]&&t[a]&&(e==null?void 0:e[a])!==t[a]){if(a==="model"){const o=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===l)continue}throw new de(`Different value for "${a}" specified in modelParams (${e[a]}) and cachedContent (${t[a]})`)}const r=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new zo(this.apiKey,r,s)}}function zn(i){return i===0?void 0:i}function Wh(i){if(!i||typeof i!="string")return i;let t=i.trim();return t=t.replace(/^```(?:json)?\s*\n?/i,""),t=t.replace(/\n?\s*```\s*$/i,""),t=t.replace(/^\s*```[\s\S]*?\n/,""),t=t.replace(/\n```\s*$/,""),t=t.trim(),t}function Ni(i,t){if(!i||t==null)return!1;try{const s=new DOMParser().parseFromString(t,"text/html");i.textContent="";const n=s.body;if(n)for(;n.firstChild;)i.appendChild(n.firstChild);return!0}catch(e){return console.error("设置HTML内容失败:",e),!1}}function zh(i,t){const e={max_tokens:"maxOutputTokens",top_p:"topP",stop:"stopSequences",frequency_penalty:"frequencyPenalty",presence_penalty:"presencePenalty"},s={};for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n)){const r=e[n]||n;s[r]=i[n]}return s.stopSequences&&!Array.isArray(s.stopSequences)&&(s.stopSequences=[String(s.stopSequences)]),s}class Gh{getSnapshot(t){var e,s;try{const n=document.documentElement.lang||null,r=document.querySelector('meta[http-equiv="Content-Language"]'),a=(r==null?void 0:r.getAttribute("content"))||null,o=((s=(e=document.body)==null?void 0:e.innerText)==null?void 0:s.substring(0,t))||"";return{htmlLang:n,metaContentLanguage:a,textSample:o}}catch{return{htmlLang:null,metaContentLanguage:null,textSample:""}}}}class jh{async queryTabs(t={}){return O.tabs.query(t)}async sendToTab(t,e){return O.tabs.sendMessage(t,e)}async sendToRuntime(t){return O.runtime.sendMessage(t)}}class Vh{async get(t){return(await O.storage.sync.get(t))[t]}async set(t,e){await O.storage.sync.set({[t]:e})}async remove(t){await O.storage.sync.remove(t)}}const qh=1e3;class Yh{constructor(){u(this,"synthesis");this.synthesis=typeof window<"u"?window.speechSynthesis:null}isAvailable(){return!!this.synthesis}async listVoices(){return this.synthesis?(await this.loadVoices()).map(e=>({id:e.name,name:e.name,lang:e.lang,localService:e.localService,isDefault:e.default})):[]}async speak(t){if(!this.synthesis)throw new Error("speechSynthesis is not available");this.stop();const e=new SpeechSynthesisUtterance(t.text);e.lang=t.lang||"en-US",e.rate=t.rate??1,e.pitch=t.pitch??1,e.volume=t.volume??1;const s=await this.loadVoices(),n=this.selectVoice(s,t.voiceId,t.lang);n&&(e.voice=n),await new Promise((r,a)=>{e.onend=()=>r(),e.onerror=o=>a(new Error(`TTS failed: ${o.error}`)),this.synthesis.speak(e)})}stop(){var t;(t=this.synthesis)!=null&&t.speaking&&this.synthesis.cancel()}pause(){var t;(t=this.synthesis)!=null&&t.speaking&&this.synthesis.pause()}resume(){var t;(t=this.synthesis)!=null&&t.paused&&this.synthesis.resume()}isSpeaking(){var t;return!!((t=this.synthesis)!=null&&t.speaking)}isPaused(){var t;return!!((t=this.synthesis)!=null&&t.paused)}async loadVoices(){if(!this.synthesis)return[];const t=this.synthesis.getVoices();return t.length>0?t:new Promise(e=>{const s=window.setTimeout(()=>{e(this.synthesis.getVoices())},qh);this.synthesis.onvoiceschanged=()=>{window.clearTimeout(s),e(this.synthesis.getVoices())}})}selectVoice(t,e,s){if(t.length===0)return null;if(e){const n=t.find(r=>r.name===e);if(n)return n}if(s){const n=t.find(r=>r.lang.toLowerCase().startsWith(s.toLowerCase()));if(n)return n}return t[0]}}const Kh=.01;class Jh{constructor(t,e,s,n){u(this,"id");u(this,"durationSeconds");u(this,"finished");u(this,"source",null);u(this,"gainNode",null);u(this,"startTime",0);u(this,"pauseTime",0);u(this,"playbackOffset",0);u(this,"playing",!1);u(this,"paused",!1);u(this,"resolved",!1);u(this,"resolveFinished");this.audioContext=t,this.audioBuffer=e,this.onEnded=n,this.id=`audio-session-${Date.now()}-${Math.random().toString(36).slice(2)}`,this.durationSeconds=e.duration,this.finished=new Promise(r=>{this.resolveFinished=r}),this.startPlayback(s)}stop(){this.stopSource(),this.playing=!1,this.paused=!1,this.resolveIfNeeded()}pause(){!this.playing||this.paused||(this.pauseTime=this.getCurrentTime(),this.stopSource(),this.paused=!0,this.playing=!1)}resume(){this.paused&&this.startPlayback(this.pauseTime)}getCurrentTime(){return this.paused?this.pauseTime:this.playing?this.playbackOffset+(this.audioContext.currentTime-this.startTime):this.pauseTime}isPlaying(){return this.playing&&!this.paused}isPaused(){return this.paused}startPlayback(t){this.audioContext.state==="suspended"&&this.audioContext.resume(),this.stopSource(),this.source=this.audioContext.createBufferSource(),this.source.buffer=this.audioBuffer,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.source.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.playbackOffset=t,this.startTime=this.audioContext.currentTime,this.playing=!0,this.paused=!1,this.source.onended=()=>{!this.playing||this.paused||(this.playing=!1,this.pauseTime=this.durationSeconds,this.resolveIfNeeded(),this.onEnded())},this.source.start(0,t)}stopSource(){if(this.source){try{this.source.stop()}catch{}this.source.onended=null,this.source=null,this.gainNode=null}}resolveIfNeeded(){this.resolved||(this.resolved=!0,this.resolveFinished())}}class Xh{constructor(){u(this,"audioContext",null);u(this,"warmedUp",!1);u(this,"currentSession",null);u(this,"currentHtmlAudio",null)}async warmUp(){const t=this.getAudioContext();if(await this.ensureContextRunning(t),this.warmedUp)return;const e=t.createBuffer(1,t.sampleRate*Kh,t.sampleRate),s=t.createBufferSource();s.buffer=e,s.connect(t.destination),s.start(0),this.warmedUp=!0}async playBlob(t){const e=await t.arrayBuffer();return this.playArrayBuffer(e)}async playUrl(t){this.stop();let e;const s=new Promise(a=>{e=a}),n=new Audio(t);this.currentHtmlAudio=n;const r={id:`audio-url-session-${Date.now()}-${Math.random().toString(36).slice(2)}`,durationSeconds:0,finished:s,stop:()=>{n.pause(),n.currentTime=0,n.src.startsWith("blob:")&&URL.revokeObjectURL(n.src),this.currentHtmlAudio===n&&(this.currentHtmlAudio=null),e()},pause:()=>{n.pause()},resume:()=>{n.play()},getCurrentTime:()=>n.currentTime||0,isPlaying:()=>!n.paused,isPaused:()=>n.paused};return n.onloadedmetadata=()=>{r.durationSeconds=Number.isFinite(n.duration)?n.duration:0},n.onended=()=>{this.currentHtmlAudio===n&&(this.currentHtmlAudio=null),e()},n.onerror=()=>{this.currentHtmlAudio===n&&(this.currentHtmlAudio=null),e()},await n.play(),r}async playArrayBuffer(t,e=0){const s=this.getAudioContext();await this.ensureContextRunning(s),this.stop(this.currentSession);const n=await s.decodeAudioData(t.slice(0)),r=new Jh(s,n,e,()=>{this.currentSession===r&&(this.currentSession=null)});return this.currentSession=r,r}async decodeDuration(t){const e=this.getAudioContext();return await this.ensureContextRunning(e),(await e.decodeAudioData(t.slice(0))).duration}stop(t){var e;if(t){t.stop(),((e=this.currentSession)==null?void 0:e.id)===t.id&&(this.currentSession=null);return}this.currentSession&&(this.currentSession.stop(),this.currentSession=null),this.currentHtmlAudio&&(this.currentHtmlAudio.pause(),this.currentHtmlAudio.currentTime=0,this.currentHtmlAudio.src.startsWith("blob:")&&URL.revokeObjectURL(this.currentHtmlAudio.src),this.currentHtmlAudio=null)}getAudioContext(){if(!this.audioContext||this.audioContext.state==="closed"){const t=window.AudioContext||window.webkitAudioContext;if(!t)throw new Error("AudioContext not supported");this.audioContext=new t,this.warmedUp=!1}return this.audioContext}async ensureContextRunning(t){t.state==="suspended"&&await t.resume()}}class Qh{constructor(){u(this,"synthesis",null);u(this,"currentUtterance",null);this.synthesis=typeof window<"u"?window.speechSynthesis:null}isAvailable(){return!!this.synthesis}async speakWithWordBoundary(t,e){if(!this.synthesis)throw new Error("speechSynthesis is not available");this.cancel(),await new Promise(s=>{const n=new SpeechSynthesisUtterance(t.text);this.currentUtterance=n,n.volume=0,n.rate=t.rate??1,n.lang=t.lang||"en-US",n.onboundary=r=>{r.name==="word"&&e(r.charIndex)},n.onend=()=>{this.currentUtterance===n&&(this.currentUtterance=null),s()},n.onerror=()=>{this.currentUtterance===n&&(this.currentUtterance=null),s()},this.synthesis.speak(n)})}cancel(){this.synthesis&&this.synthesis.cancel(),this.currentUtterance=null}}class Zh{getSelectionSnapshot(){try{const t=window.getSelection();if(!t||t.rangeCount===0)return null;const e=t.toString().trim();if(!e)return null;const n=t.getRangeAt(0).getBoundingClientRect();return{text:e,rect:{left:n.left,right:n.right,top:n.top,bottom:n.bottom,width:n.width,height:n.height}}}catch{return null}}}const tg=350;function eg(i){return i===408||i===425||i===429||i>=500}function ig(i){return new Promise(t=>setTimeout(t,i))}class sg{async request(t){const e=Math.max(0,t.retries??0);let s=null;for(let n=0;n<=e;n++){let r=null;try{const o=t.timeoutMs&&t.timeoutMs>0?new AbortController:null;if(o&&t.signal){const d=()=>o.abort();t.signal.addEventListener("abort",d,{once:!0})}o&&t.timeoutMs&&(r=setTimeout(()=>o.abort(),t.timeoutMs));const l=await fetch(t.url,{method:t.method||"GET",headers:t.headers,body:t.body,signal:(o==null?void 0:o.signal)||t.signal});if(r&&clearTimeout(r),!eg(l.status)||n>=e)return l}catch(o){if(r&&clearTimeout(r),s=o,n>=e)throw o}const a=(t.retryDelayMs??tg)*(n+1);await ig(a)}throw s||new Error("Network request failed without specific error")}}const ng={zh:"zh","zh-cn":"zh","zh-tw":"zh","zh-hk":"zh",chinese:"zh",en:"en","en-us":"en","en-gb":"en",english:"en"};class rg{constructor(t){this.pageLanguagePort=t}determineOptimalTargetLanguage(t){const e=this.detectCurrentPageLanguage();if(!e)return t.multilingualConfig.targetLanguage;const s=t.multilingualConfig,n=this.normalizeLanguageCode(e),r=this.normalizeLanguageCode(s.targetLanguage),a=this.normalizeLanguageCode(s.nativeLanguage);return n===r?s.nativeLanguage:s.targetLanguage}detectCurrentPageLanguage(){const t=this.pageLanguagePort.getSnapshot(100);if(t.htmlLang)return t.htmlLang;if(t.metaContentLanguage)return t.metaContentLanguage;const e=t.textSample;return/[\u4e00-\u9fff]/.test(e)?"zh":/^[a-zA-Z\s\d\.,!?;:'"()-]*$/.test(e)?"en":null}normalizeLanguageCode(t){if(!t)return"";const e=t.toLowerCase().split("-")[0];return ng[e]||e}}class ag{constructor(t){this.ttsPort=t}isAvailable(){return this.ttsPort.isAvailable()}async speak(t){await this.ttsPort.speak(t)}stop(){this.ttsPort.stop()}pause(){this.ttsPort.pause()}resume(){this.ttsPort.resume()}isSpeaking(){return this.ttsPort.isSpeaking()}isPaused(){return this.ttsPort.isPaused()}async getVoices(){return this.ttsPort.listVoices()}}class og{constructor(t){this.audioPlaybackPort=t}async warmUp(){await this.audioPlaybackPort.warmUp()}async playBlob(t){return this.audioPlaybackPort.playBlob(t)}async playUrl(t){return this.audioPlaybackPort.playUrl(t)}async playArrayBuffer(t,e=0){return this.audioPlaybackPort.playArrayBuffer(t,e)}async decodeDuration(t){return this.audioPlaybackPort.decodeDuration(t)}stop(t){this.audioPlaybackPort.stop(t)}}class lg{constructor(t){this.speechBoundaryPort=t}isAvailable(){return this.speechBoundaryPort.isAvailable()}async speakWithWordBoundary(t,e){await this.speechBoundaryPort.speakWithWordBoundary(t,e)}cancel(){this.speechBoundaryPort.cancel()}}class cg{constructor(t){this.selectionPort=t}isEnglishWord(t){return!t||t.length===0?!1:/^[a-zA-Z]+(-[a-zA-Z]+)*$/.test(t.trim())}isSingleWord(t){if(!t)return!1;const e=t.trim();return e.length>0&&!e.includes(" ")}getSelectionInfo(){const t=this.selectionPort.getSelectionSnapshot();if(!t||!t.text.trim())return null;const e=t.text.trim(),s=this.isSingleWord(e),n=this.isEnglishWord(e);return{text:e,rect:t.rect,isSingleWord:s,isEnglishWord:n,isWord:s&&n}}}class ug{constructor(t){this.networkPolicyPort=t}async request(t){return this.networkPolicyPort.request(t)}}const dg=new Vh,hg=new jh,gg=new Gh,pg=new Xh,fg=new Qh,mg=new Yh,bg=new Zh,Sg=new sg,jo=new rg(gg),Ye=new ag(mg),U=new og(pg),Ie=new lg(fg),wg=new cg(bg),Vo=new ug(Sg);var pt=(i=>(i.SETTINGS_LOADED="settings_loaded",i.SETTINGS_SAVED="settings_saved",i.API_CONFIG_ADDED="api_config_added",i.API_CONFIG_UPDATED="api_config_updated",i.API_CONFIG_REMOVED="api_config_removed",i.ACTIVE_CONFIG_CHANGED="active_config_changed",i.DATA_CLEARED="data_cleared",i))(pt||{});const Qt=class Qt{constructor(t={}){u(this,"config");u(this,"storageKey");u(this,"settingsStoragePort");u(this,"eventListeners",new Map);this.config={enableAutoBackup:!0,enableValidation:!0,maxRetries:3,storageKey:"user_settings",...t},this.storageKey=this.config.storageKey,this.settingsStoragePort=this.config.settingsStoragePort||dg}static getInstance(t){return Qt.instance||(Qt.instance=new Qt(t)),Qt.instance}addEventListener(t,e){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(e)}removeEventListener(t,e){const s=this.eventListeners.get(t);if(s){const n=s.indexOf(e);n>-1&&s.splice(n,1)}}emitEvent(t,e,s){const n={type:t,timestamp:Date.now(),data:e,error:s},r=this.eventListeners.get(t);r&&r.forEach(a=>{try{a(n)}catch(o){console.error("Storage event listener error:",o)}})}async getUserSettings(){try{const t=await this.settingsStoragePort.get(Qt.STORAGE_KEY);if(!t)return this.emitEvent(pt.SETTINGS_LOADED,Z),Z;const e=JSON.parse(String(t));if(this.isOldFormatConfig(e))return await this.saveUserSettings(Z),this.emitEvent(pt.SETTINGS_LOADED,Z),Z;const s=this.validateAndFixSettings(e);return this.hasConfigurationChanged(e,s)&&await this.saveUserSettings(s),this.emitEvent(pt.SETTINGS_LOADED,s),s}catch(t){const e=`获取用户设置失败: ${t}`;return console.error(e),this.emitEvent(pt.SETTINGS_LOADED,Z,e),Z}}async saveUserSettings(t){try{this.config.enableValidation&&(t=this.validateAndFixSettings(t));const e=JSON.stringify(t);return await this.settingsStoragePort.set(this.storageKey,e),this.emitEvent(pt.SETTINGS_SAVED,t),{success:!0,data:t}}catch(e){const s=`保存用户设置失败: ${e}`;return console.error(s),this.emitEvent(pt.SETTINGS_SAVED,null,s),{success:!1,error:s}}}async getActiveApiConfig(){try{const t=await this.getUserSettings(),e=t.apiConfigs.find(s=>s.id===t.activeApiConfigId);return(e==null?void 0:e.config)||null}catch(t){return console.error("获取活跃API配置失败:",t),null}}async setActiveApiConfig(t){try{const e=await this.getUserSettings();if(!e.apiConfigs.some(r=>r.id===t)){const r=`API配置 ${t} 不存在`;return console.error(r),{success:!1,error:r}}e.activeApiConfigId=t;const n=await this.saveUserSettings(e);return n.success&&this.emitEvent(pt.ACTIVE_CONFIG_CHANGED,{configId:t}),n}catch(e){const s=`设置活跃API配置失败: ${e}`;return console.error(s),{success:!1,error:s}}}async addApiConfig(t,e,s){try{const n=await this.getUserSettings(),r=Date.now(),a={id:`config-${r}`,name:t,provider:e,config:s,isDefault:!1,createdAt:r,updatedAt:r};n.apiConfigs.push(a);const o=await this.saveUserSettings(n);return o.success?(this.emitEvent(pt.API_CONFIG_ADDED,a),{success:!0,data:a.id}):o}catch(n){const r=`添加API配置失败: ${n}`;return console.error(r),{success:!1,error:r}}}async updateApiConfig(t,e,s,n){try{const r=await this.getUserSettings(),a=r.apiConfigs.findIndex(c=>c.id===t);if(a===-1){const c=`API配置 ${t} 不存在`;return console.error(c),{success:!1,error:c}}const o={...r.apiConfigs[a],name:e,provider:s,config:n,updatedAt:Date.now()};r.apiConfigs[a]=o;const l=await this.saveUserSettings(r);return l.success&&this.emitEvent(pt.API_CONFIG_UPDATED,o),l}catch(r){const a=`更新API配置失败: ${r}`;return console.error(a),{success:!1,error:a}}}async removeApiConfig(t){try{const e=await this.getUserSettings(),s=e.apiConfigs.find(r=>r.id===t);if(s!=null&&s.isDefault){const r="不能删除默认配置";return console.error(r),{success:!1,error:r}}if(e.activeApiConfigId===t){const r=e.apiConfigs.find(a=>a.id!==t);r&&(e.activeApiConfigId=r.id)}e.apiConfigs=e.apiConfigs.filter(r=>r.id!==t);const n=await this.saveUserSettings(e);return n.success&&this.emitEvent(pt.API_CONFIG_REMOVED,{configId:t}),n}catch(e){const s=`删除API配置失败: ${e}`;return console.error(s),{success:!1,error:s}}}async clearAllData(){try{return await this.settingsStoragePort.remove(this.storageKey),this.emitEvent(pt.DATA_CLEARED),{success:!0}}catch(t){const e=`清除数据失败: ${t}`;return console.error(e),{success:!1,error:e}}}async getConfigStats(){try{const t=await this.getUserSettings();return{intelligentModeEnabled:!0,targetLanguage:t.multilingualConfig.targetLanguage,totalKeys:Object.keys(t).length,apiConfigsCount:t.apiConfigs.length}}catch(t){return console.error("获取配置统计失败:",t),{intelligentModeEnabled:!0,targetLanguage:"en",totalKeys:0,apiConfigsCount:0}}}isOldFormatConfig(t){const e=t.multilingualConfig;return e?"intelligentMode"in e||"enableNativeSwitch"in e||"sourceLanguageOverride"in e:!1}validateAndFixSettings(t){const e={...t};try{const s={...Z,...e,multilingualConfig:{...Z.multilingualConfig,...e.multilingualConfig||{}},pronunciationHotkey:{...Z.pronunciationHotkey,...e.pronunciationHotkey||{}},floatingBall:{...Z.floatingBall,...e.floatingBall||{}},lazyLoading:{...Z.lazyLoading,...e.lazyLoading||{}},wordCard:{...Z.wordCard,...e.wordCard||{}},paragraphTTS:{...Z.paragraphTTS,...e.paragraphTTS||{}},gestureTranslation:{...Z.gestureTranslation,...e.gestureTranslation||{}}};return s.apiConfigs||(s.apiConfigs=Z.apiConfigs),s.activeApiConfigId||s.apiConfigs.length>0&&(s.activeApiConfigId=s.apiConfigs[0].id),s.activeApiConfigId&&!s.apiConfigs.some(r=>r.id===s.activeApiConfigId)&&s.apiConfigs.length>0&&(s.activeApiConfigId=s.apiConfigs[0].id),s.multilingualConfig||(s.multilingualConfig=Z.multilingualConfig),s.lazyLoading||(s.lazyLoading=Z.lazyLoading),s}catch(s){return console.error(`设置验证异常: ${s}`),Z}}hasConfigurationChanged(t,e){try{return JSON.stringify(t)!==JSON.stringify(e)}catch{return!0}}};u(Qt,"instance"),u(Qt,"STORAGE_KEY","user_settings");let ft=Qt;ft.getInstance();const qo=Object.freeze(Object.defineProperty({__proto__:null,StorageService:ft,default:ft},Symbol.toStringTag,{value:"Module"})),vg=Object.freeze(Object.defineProperty({__proto__:null,StorageEventType:pt,StorageService:ft},Symbol.toStringTag,{value:"Module"})),yg="ws://192.168.8.145:3000/log-ws",Tg=2e3,Eg=5,Cg=1200;function Ke(i,t=Cg){return i.length<=t?i:`${i.slice(0,t)}...<truncated>`}function Yo(i){return{type:"Error",name:i.name,message:i.message,stack:i.stack?Ke(i.stack,2e3):void 0}}function hs(i){const t=new WeakSet;try{return JSON.stringify(i,(e,s)=>{if(s instanceof Error)return Yo(s);if(typeof s=="bigint")return s.toString();if(s&&typeof s=="object"){const n=s;if(t.has(n))return"[Circular]";t.add(n)}return s},2)}catch{return String(i)}}function xg(i){return i instanceof Error?Ke(hs(Yo(i))):i instanceof Response?Ke(hs({type:"Response",url:i.url,ok:i.ok,status:i.status,statusText:i.statusText,redirected:i.redirected})):i instanceof Request?Ke(hs({type:"Request",url:i.url,method:i.method,mode:i.mode,credentials:i.credentials})):Ke(typeof i=="object"&&i!==null?hs(i):String(i))}let Dt=null,Je=!1,Gn=0,gs=null,ps=!1;function Pg(){return new Date().toISOString()}function Ag(i){if(i.length!==0)return i.map(t=>xg(t)).join(" ")}function Ig(i){if(Dt&&Dt.readyState===WebSocket.OPEN)try{Dt.send(JSON.stringify(i))}catch{}}function Ko(){if(!(ps||Je||Dt&&Dt.readyState===WebSocket.OPEN)){Je=!0;try{Dt=new WebSocket(yg),Dt.onopen=()=>{Je=!1,Gn=0},Dt.onclose=i=>{Je=!1,Dt=null,Jo()},Dt.onerror=()=>{Je=!1},Dt.onmessage=i=>{}}catch{Je=!1,Jo()}}}function Jo(){if(!ps){if(Gn++,Gn>=Eg){ps=!0;return}gs&&clearTimeout(gs),gs=setTimeout(()=>{gs=null,Ko()},Tg)}}function Lg(){if(typeof WebSocket>"u"){ps=!0;return}Ko()}function jn(i,t,e,...s){const n=Ag(s),r=i==="error"?"error":i==="warn"?"warn":"log",a=i==="error"?"❌ ":i==="warn"?"⚠️ ":"";console[r](`[${t}] ${a}${e}`,...s);const o={timestamp:Pg(),level:i,module:t,message:e,args:n};Ig(o)}function Ot(i){return{log:(t,...e)=>jn("log",i,t,...e),warn:(t,...e)=>jn("warn",i,t,...e),error:(t,...e)=>jn("error",i,t,...e)}}typeof window<"u"&&Lg();const Xe=Ot("ChatApiRequest");function Xo(i){return i.includes("/v1/chat/completions")}async function Qo(i,t,e=0){return t.useBackgroundProxy?_g(i,t,e):kg(i,t,e)}async function kg(i,t,e){const s=Xo(t.apiEndpoint),n={"Content-Type":"application/json",Authorization:`Bearer ${t.apiKey}`};if(t.customParams)try{const a=JSON.parse(t.customParams);a.site_auth&&(n.site_auth=a.site_auth),a.site_api&&(n.site_api=a.site_api)}catch{}s&&Xe.log("Chat request start",{endpoint:t.apiEndpoint,timeout:e,hasBusinessAuthorization:!!n.Authorization,hasSiteAuth:!!n.site_auth,hasSiteApi:!!n.site_api});const r=await Vo.request({url:t.apiEndpoint,method:"POST",headers:n,body:JSON.stringify(i),timeoutMs:e,retries:1});if(s)if(r.ok)Xe.log("Chat request success",{endpoint:t.apiEndpoint,status:r.status,statusText:r.statusText});else{const a=await r.clone().text().then(o=>o.slice(0,500)).catch(()=>"");Xe.error("Chat request failed",{endpoint:t.apiEndpoint,status:r.status,statusText:r.statusText,bodySnippet:a})}return r}async function _g(i,t,e){var a,o,l,c;const s=Xo(t.apiEndpoint),n={"Content-Type":"application/json",Authorization:`Bearer ${t.apiKey}`};if(t.customParams)try{const d=JSON.parse(t.customParams);d.site_auth&&(n.site_auth=d.site_auth),d.site_api&&(n.site_api=d.site_api)}catch{}s&&Xe.log("Chat request start (background)",{endpoint:t.apiEndpoint,timeout:e,hasBusinessAuthorization:!!n.Authorization,hasSiteAuth:!!n.site_auth,hasSiteApi:!!n.site_api});const r=await hg.sendToRuntime({type:"api-request",data:{url:t.apiEndpoint,method:"POST",headers:n,body:JSON.stringify(i),timeout:e}});return r.success?(s&&Xe.log("Chat request success (background)",{endpoint:t.apiEndpoint}),{ok:!0,status:200,statusText:"OK",json:async()=>r.data}):(s&&Xe.error("Chat request failed (background)",{endpoint:t.apiEndpoint,status:((a=r.error)==null?void 0:a.status)||500,statusText:((o=r.error)==null?void 0:o.statusText)||"Internal Server Error",error:r.error||null}),{ok:!1,status:((l=r.error)==null?void 0:l.status)||500,statusText:((c=r.error)==null?void 0:c.statusText)||"Internal Server Error",json:async()=>({error:r.error})})}function Le(i,t){const e={...i},s=["model","messages","apiKey"];if(!(t!=null&&t.trim()))return e;try{const n=JSON.parse(t);Object.entries(n).forEach(([r,a])=>{s.includes(r)||(e[r]=a)})}catch{}return e}function Ng(i,t){return!!(i!=null&&i.trim()&&(t!=null&&t.trim()))}const Ne=class Ne{constructor(){u(this,"storageService");this.storageService=ft.getInstance()}static getInstance(){return Ne.instance||(Ne.instance=new Ne),Ne.instance}async call(t,e={}){try{if(!(t!=null&&t.trim()))return{success:!1,prompt:t||"",content:"",error:"输入提示词不能为空"};const s=await this.getApiConfig(e.configId,e.forceProvider);return s?s.provider==="GoogleGemini"||s.provider==="ProxyGemini"?await this.callGoogleGemini(t,s,e):await this.callHttpApi(t,s,e):{success:!1,prompt:t,content:"",error:"未找到可用的API配置"}}catch(s){return console.error("UniversalApiService调用失败:",s),{success:!1,prompt:t,content:"",error:s.message||"调用过程中发生未知错误"}}}async callGoogleGemini(t,e,s){try{const n=e.config,r=new Go(n.apiKey),a={temperature:s.temperature??n.temperature??.7};s.maxTokens&&(a.maxOutputTokens=s.maxTokens);const o=Le(a,s.customParams||n.customParams),l={},c=s.timeout??zn(0);c&&c>0&&(l.timeout=c),n.apiEndpoint&&(l.baseUrl=n.apiEndpoint);const d=r.getGenerativeModel({model:n.model,generationConfig:o},l);let h=t;s.systemPrompt&&(h=`${s.systemPrompt}

${t}`);const m=(await d.generateContent(h)).response,y=m.text(),C={success:!0,prompt:t,content:y,model:n.model,provider:this.getProviderDisplayName(e.provider)};return m.usageMetadata&&(C.usage={promptTokens:m.usageMetadata.promptTokenCount,completionTokens:m.usageMetadata.candidatesTokenCount,totalTokens:m.usageMetadata.totalTokenCount}),s.rawResponse&&(C.rawData={candidates:m.candidates,usageMetadata:m.usageMetadata}),C}catch(n){return console.error("Google Gemini调用失败:",n),{success:!1,prompt:t,content:"",error:n.message||"Google Gemini调用失败"}}}async callHttpApi(t,e,s){try{const n=this.buildRequestBody(t,e.config,s),r=await this.sendRequest(n,e.config,s.timeout);if(!r.ok)throw new Error(`API请求失败: ${r.status} ${r.statusText}`);const a=await r.json();return this.parseResponse(a,t,e,s.rawResponse)}catch(n){return console.error("HTTP API调用失败:",n),{success:!1,prompt:t,content:"",error:n.message||"HTTP API调用失败"}}}async quickCall(t,e){return this.call(t,{systemPrompt:e,temperature:.7,maxTokens:1e3})}async chat(t,e={}){try{const s=await this.getApiConfig(e.configId,e.forceProvider);if(!s)return{success:!1,prompt:t.map(o=>o.content).join(`
`),content:"",error:"未找到可用的API配置"};let n={model:s.config.model,messages:t,temperature:e.temperature??s.config.temperature??.7};e.maxTokens&&(n.max_tokens=e.maxTokens),e.customParams?n=Le(n,e.customParams):s.config.customParams&&(n=Le(n,s.config.customParams));const r=await this.sendRequest(n,s.config,e.timeout);if(!r.ok)throw new Error(`API请求失败: ${r.status} ${r.statusText}`);const a=await r.json();return this.parseResponse(a,t[t.length-1].content,s,e.rawResponse)}catch(s){return{success:!1,prompt:t.map(n=>n.content).join(`
`),content:"",error:s.message||"聊天调用失败"}}}async isAvailable(t){var e;try{const s=await this.getApiConfig(t);return!!((e=s==null?void 0:s.config)!=null&&e.apiKey)}catch{return!1}}async getAvailableModels(){try{return(await this.storageService.getUserSettings()).apiConfigs.map(e=>({provider:e.provider,model:e.config.model}))}catch{return[]}}async getApiConfig(t,e){const s=await this.storageService.getUserSettings();if(t)return s.apiConfigs.find(n=>n.id===t)||null;if(e){const n=e.toString();return s.apiConfigs.find(r=>r.provider===n)||null}return s.apiConfigs.find(n=>n.id===s.activeApiConfigId)||null}buildRequestBody(t,e,s){const n=[];s.systemPrompt&&n.push({role:"system",content:s.systemPrompt}),n.push({role:"user",content:t});let r={model:e.model,messages:n,temperature:s.temperature??e.temperature??.7};return s.maxTokens&&(r.max_tokens=s.maxTokens),s.customParams?r=Le(r,s.customParams):e.customParams&&(r=Le(r,e.customParams)),r}async sendRequest(t,e,s){return await Qo(t,e,s??0)}parseResponse(t,e,s,n){var r,a,o,l,c,d,h,g;try{let m="",y;s.provider==="GoogleGemini"||s.provider==="ProxyGemini"?(m=((c=(l=(o=(a=(r=t.candidates)==null?void 0:r[0])==null?void 0:a.content)==null?void 0:o.parts)==null?void 0:l[0])==null?void 0:c.text)||"",t.usageMetadata&&(y={promptTokens:t.usageMetadata.promptTokenCount,completionTokens:t.usageMetadata.candidatesTokenCount,totalTokens:t.usageMetadata.totalTokenCount})):(m=((g=(h=(d=t.choices)==null?void 0:d[0])==null?void 0:h.message)==null?void 0:g.content)||"",t.usage&&(y={promptTokens:t.usage.prompt_tokens,completionTokens:t.usage.completion_tokens,totalTokens:t.usage.total_tokens}));const C={success:!0,prompt:e,content:m,model:s.config.model,provider:this.getProviderDisplayName(s.provider)};return y&&(C.usage=y),n&&(C.rawData=t),C}catch{return{success:!1,prompt:e,content:"",error:"解析API响应失败"}}}getProviderDisplayName(t){return{OpenAI:"OpenAI",GoogleGemini:"Google Gemini",ProxyGemini:"Proxy Gemini",DeepSeek:"DeepSeek",SiliconFlow:"SiliconFlow"}[t]||t}};u(Ne,"instance",null);let fs=Ne;const Rg=fs.getInstance();async function Mg(i,t){return Rg.call(i,t)}class Zo{constructor(t,e=0){u(this,"name","ai-translation");u(this,"apiConfig");u(this,"timeout",0);u(this,"cache",new Map);u(this,"cacheTTL",Ai.AI_TRANSLATION_CACHE_TTL);u(this,"universalApi");this.apiConfig=t,this.timeout=e,this.universalApi=fs.getInstance()}async getMeaning(t){try{if(!t||typeof t!="string")return{success:!1,error:"单词参数无效"};const e=t.toLowerCase().trim(),s=this.getFromCache(e);if(s)return{success:!0,data:s,cached:!0};if(!this.apiConfig.apiKey)return{success:!1,error:"AI API配置不完整：缺少API Key"};const r=await this.universalApi.call(e,{systemPrompt:`你是一个专业的英语词典助手。请为用户提供准确、简洁的中文词义解释。
要求：
1. 只返回单词的中文释义，格式为：词性 + 释义
2. 如果有多个词性，用分号分隔
3. 释义要简洁准确，适合快速理解
4. 不要包含例句或其他额外信息
5. 返回格式为纯文本，不要JSON

示例：
输入：hello
输出：interj. 你好；n. 打招呼

输入：beautiful
输出：adj. 美丽的，漂亮的`,temperature:this.apiConfig.temperature||0,maxTokens:100,timeout:this.timeout,customParams:this.apiConfig.customParams});if(!r.success)return{success:!1,error:r.error||"AI翻译请求失败"};const a=this.parseAIResponse(r.content,e);return this.setCache(e,a),{success:!0,data:a,cached:!1}}catch(e){return console.error("AI翻译获取词义失败:",e),{success:!1,error:e instanceof Error?e.message:"未知错误"}}}async getPhonetic(t){const e=await this.getMeaning(t);return e.success&&e.data?{success:!0,data:{word:t,phonetics:[],aiTranslation:e.data},cached:e.cached}:{success:!1,error:e.error}}async getBatchPhonetics(t){return(await Promise.allSettled(t.map(s=>this.getPhonetic(s)))).map(s=>{var n;return s.status==="fulfilled"?s.value:{success:!1,error:((n=s.reason)==null?void 0:n.message)||"批量处理失败"}})}async isAvailable(){try{return this.apiConfig.apiKey?await this.universalApi.isAvailable():!1}catch{return!1}}getConfig(){return{endpoint:this.apiConfig.apiEndpoint,rateLimitPerMinute:20,supportsBatch:!1,supportsAudio:!1,supportsMeaning:!0}}updateApiConfig(t,e){this.apiConfig=t,e!==void 0&&(this.timeout=e)}parseAIResponse(t,e){try{let s=(t==null?void 0:t.trim())||"";return!s||typeof s!="string"?s=`${e} 的释义暂不可用`:(s=Wh(s),s.length>200&&(s=s.substring(0,200)+"...")),{explain:s,source:"ai-translation"}}catch(s){return console.error("解析AI翻译响应失败:",s),{explain:`${e} 的释义暂不可用`,source:"ai-translation"}}}getFromCache(t){const e=this.cache.get(t);return e&&Date.now()-e.timestamp<e.ttl?e.data:(e&&this.cache.delete(t),null)}setCache(t,e){if(this.cache.set(t,{data:e,timestamp:Date.now(),ttl:this.cacheTTL}),this.cache.size>500){const s=this.cache.keys().next().value;s&&this.cache.delete(s)}}}class Vn{static createProvider(t,e){if(this.instances.has(t))return this.instances.get(t);let s;switch(t.toLowerCase()){case"dictionary-api":s=new hh;break;case"ai-translation":if(!e)throw new Error("AI翻译提供者需要API配置");s=new Zo(e);break;default:throw new Error(`未知的音标提供者: ${t}`)}return this.instances.set(t,s),s}static getSupportedProviders(){return["dictionary-api","ai-translation"]}static isProviderSupported(t){return this.getSupportedProviders().includes(t.toLowerCase())}static getDefaultProvider(){return this.createProvider("dictionary-api")}static clearInstances(){this.instances.clear()}static getInstance(t){return this.instances.get(t)}}u(Vn,"instances",new Map);class Dg{constructor(t={}){u(this,"name","web-speech");u(this,"config");u(this,"voices",[]);u(this,"isInitialized",!1);this.config={lang:"en-US",rate:1,pitch:1,volume:1,...t},this.initialize()}async initialize(){this.isInitialized||(await this.loadVoices(),this.isInitialized=!0)}async loadVoices(){const t=await Ye.getVoices();this.voices=t.map(e=>({voiceURI:e.id,name:e.name,lang:e.lang,localService:e.localService,default:e.isDefault}))}async speak(t,e){try{if(!t||typeof t!="string")return{success:!1,error:"文本参数无效"};await this.initialize(),this.stop();const s={...this.config,...e};return await Ye.speak({text:t,lang:s.lang||"en-US",voiceId:s.voice,rate:s.rate,pitch:s.pitch,volume:s.volume}),{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"未知错误"}}}stop(){Ye.stop()}isSpeaking(){return Ye.isSpeaking()}isAvailable(){return Ye.isAvailable()}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}getVoices(){return this.voices}getVoicesByLanguage(t){return this.voices.filter(e=>e.lang.toLowerCase().startsWith(t.toLowerCase()))}}class Og{constructor(t={}){u(this,"name","youdao");u(this,"config");u(this,"currentSession",null);this.config={accent:"us",...t}}async speak(t,e){try{if(!t||typeof t!="string")return{success:!1,error:"文本参数无效"};this.stop();const r=({...this.config,...e}.accent||"us")==="us"?2:1,a=`${Ai.YOUDAO_TTS_BASE_URL}?type=${r}&audio=${encodeURIComponent(t)}`;return await U.warmUp(),new Promise(o=>{let l=!1;const c=setTimeout(()=>{l||(l=!0,U.stop(this.currentSession),this.currentSession=null,o({success:!1,error:"有道语音加载超时"}))},Jt.YOUDAO_TIMEOUT),d=()=>{clearTimeout(c),this.currentSession=null};U.playUrl(a).then(h=>{this.currentSession=h,h.finished.then(()=>{var g;((g=this.currentSession)==null?void 0:g.id)===h.id&&(l||(l=!0,d(),o({success:!0})))})}).catch(h=>{l||(l=!0,d(),o({success:!1,error:`有道语音初始化失败: ${String(h)}`}))})})}catch(s){return this.currentSession=null,{success:!1,error:s instanceof Error?s.message:"未知错误"}}}stop(){this.currentSession&&(U.stop(this.currentSession),this.currentSession=null)}isSpeaking(){return!!this.currentSession&&this.currentSession.isPlaying()}isAvailable(){return typeof Audio<"u"}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}async preloadAudio(t,e="us"){try{const s=e==="us"?2:1,n=`${Ai.YOUDAO_TTS_BASE_URL}?type=${s}&audio=${encodeURIComponent(t)}`,r=await U.playUrl(n);return U.stop(r),!0}catch{return!1}}}const xt={tokenRefreshThreshold:600,tokenCheckInterval:120,maxRetryCount:3,retryDelay:1e3,authEndpoint:"https://side-translation.planktonfly.com/auth_token",apiBaseUrl:"https://side-translation.planktonfly.com/api",clientSecret:"Gp8kL4mX9nQ2wR7tY5vZ3bN6hJ1sA0cF"},Fg=xt.clientSecret;function Ug(i,t){const e=t.toString().slice(0,-2),s=`${i}|${e}`;return el(s,Fg).then(n=>n.substring(0,32))}function $g(i=16){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=new Uint8Array(i);return crypto.getRandomValues(e),Array.from(e,s=>t[s%t.length]).join("")}function tl(i){if(i instanceof URLSearchParams){const t=[];return i.forEach((e,s)=>{t.push([s,e])}),t}if(typeof i=="string")return tl(new URLSearchParams(i));if(i&&typeof i=="object"){const t=i.forEach;if(typeof t=="function"){const s=[];if(t.call(i,(n,r)=>{s.push([String(r),String(n??"")])}),s.length>0)return s}const e=i.entries;if(typeof e=="function"){const s=e.call(i);if(s&&Symbol.iterator in Object(s))return Array.from(s).map(([n,r])=>[String(n),String(r??"")])}return Object.entries(i).map(([s,n])=>[s,String(n??"")])}return[]}function Hg(i){return tl(i).sort((e,s)=>{const n=e[0].localeCompare(s[0]);return n!==0?n:e[1].localeCompare(s[1])}).map(([e,s])=>`${e}=${s}`).join("&")}async function Bg(i){const t=new TextEncoder().encode(i),e=await crypto.subtle.digest("SHA-256",t);return il(e)}async function el(i,t){const e=new TextEncoder().encode(t),s=new TextEncoder().encode(i),n=await crypto.subtle.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),r=await crypto.subtle.sign("HMAC",n,s);return il(r)}function il(i){return Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join("")}class Wg{constructor(){u(this,"state",null);u(this,"refreshPromise",null);u(this,"initialized",!1);u(this,"hasAlarmCapability",!1)}async init(){if(this.initialized)return;const t=await chrome.storage.local.get(["authState","tempId","userId","authUser"]);if(t.authState&&(this.state=t.authState),!this.normalizeUserId(t.userId)){const s=this.deriveUserIdFromAuthUser(t.authUser);s&&(await chrome.storage.local.set({userId:s}),mt.log("Migrated userId from authUser profile",{migratedUserId:s}))}if(!t.tempId){const s=crypto.randomUUID();await chrome.storage.local.set({tempId:s})}this.hasAlarmCapability=this.canUseAlarmApi(),this.initialized=!0,this.startCheckLoop()}async getValidToken(){var a;await this.init();const t=Date.now(),e=await chrome.storage.local.get("userId"),s=this.normalizeUserId(e.userId),n=this.normalizeUserId((a=this.state)==null?void 0:a.userId);return!!this.state&&s!==n?(mt.log("Auth identity changed, forcing token refresh",{previousUserId:n||null,currentUserId:s||null}),await this.refreshToken(!0)):!this.state||t>=this.state.expiryTime?await this.refreshToken():t>=this.state.expiryTime-xt.tokenRefreshThreshold*1e3&&this.refreshToken().catch(o=>{mt.warn("Background token refresh failed",o)}),this.state.token}async refreshToken(t=!1){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this._doRefreshWithFallback(t);try{return await this.refreshPromise}finally{this.refreshPromise=null}}async _doRefreshWithFallback(t){try{return await this._doRefresh(t)}catch(e){if(!this.shouldFallbackToForceNew(e,t))throw e;mt.warn("token_refresh_fallback_start",{reason:"token_revoked_or_expired",strategy:"retry_with_init_salt"});try{const s=await this._doRefresh(!0);return mt.log("token_refresh_fallback_success",{strategy:"retry_with_init_salt"}),s}catch(s){throw mt.error("token_refresh_fallback_failed",{strategy:"retry_with_init_salt",error:s instanceof Error?s.message:String(s)}),s}}}shouldFallbackToForceNew(t,e){var r;if(e||!((r=this.state)!=null&&r.token)||!(t instanceof Error))return!1;const s=t,n=/token revoked or expired/i.test(t.message);return s.status===401&&n}async _doRefresh(t){var h,g;const e=await chrome.storage.local.get(["tempId","userId"]),s=e.tempId,n=this.normalizeUserId(e.userId),r=Math.floor(Date.now()/1e3).toString(),a=chrome.runtime.id,o=chrome.runtime.getManifest().version.replace(/\./g,""),l={"Content-Type":"application/json","x-temp-id":s,"x-extension-id":a,"x-extension-version":o,"x-timestamp":r,"x-user-id":n};(h=this.state)!=null&&h.token&&!t?l.Authorization=`Bearer ${this.state.token}`:l["x-init-salt"]=await Ug(a,parseInt(r)),mt.log("Refreshing token",{endpoint:xt.authEndpoint,extensionId:a,extensionVersion:o,hasTempId:!!s,forceNew:t,hasOldToken:!!((g=this.state)!=null&&g.token&&!t),hasUserId:!!n});const c=await fetch(xt.authEndpoint,{method:"POST",headers:l});if(!c.ok){const m=await c.text().catch(()=>"");let y=`Auth failed: ${c.status}`;try{y=JSON.parse(m).error||y}catch{m&&(y=m.slice(0,200))}mt.error("Token refresh failed",{endpoint:xt.authEndpoint,extensionId:a,extensionVersion:o,hasTempId:!!s,hasUserId:!!n,status:c.status,statusText:c.statusText,message:y,bodySnippet:m.slice(0,500)});const C=new Error(y);throw C.status=c.status,C}const d=await c.json();return this.state={token:d.token,expiryTime:Date.now()+d.expires_in*1e3,checkInterval:d.check_interval||xt.tokenCheckInterval,userId:n},await chrome.storage.local.set({authState:this.state}),mt.log("Token refresh succeeded",{expiresInSeconds:d.expires_in,checkInterval:d.check_interval,hasUserId:!!n}),this.state}startCheckLoop(){if(!this.hasAlarmCapability){mt.log("Alarm API unavailable in current context, skip tokenCheck");return}try{chrome.alarms.create("tokenCheck",{periodInMinutes:xt.tokenCheckInterval/60})}catch(t){mt.warn("Failed to create tokenCheck alarm",t)}}async handleAlarm(){if(await this.init(),!this.state)return;const t=Date.now(),e=xt.tokenRefreshThreshold*1e3;if(t>=this.state.expiryTime-e)try{await this.refreshToken(),mt.log("Token refreshed by alarm")}catch(s){mt.error("Alarm token refresh failed",s)}}async onLoginSuccess(t){const e=this.normalizeUserId(t);await chrome.storage.local.set({userId:e}),await this.refreshToken(!0)}async onLogout(){this.state=null,await chrome.storage.local.remove(["authState","userId"]),await this.refreshToken(!0)}async checkAndRefreshIfNeeded(){if(await this.init(),!this.state){await this.refreshToken(!0);return}const t=Date.now(),e=xt.tokenRefreshThreshold*1e3;t>=this.state.expiryTime-e&&await this.refreshToken()}canUseAlarmApi(){try{return typeof chrome<"u"&&!!chrome.alarms&&typeof chrome.alarms.create=="function"}catch{return!1}}normalizeUserId(t){return typeof t=="string"?t.trim():""}deriveUserIdFromAuthUser(t){if(!t||typeof t!="object")return"";const e=t,s=[e.email,e.username,e.displayName];for(const n of s){const r=this.normalizeUserId(n);if(r)return r}return""}}const mt=Ot("AuthManager"),qn=new Wg,ge=Ot("RequestInterceptor"),zg="https://side-translation.planktonfly.com";function ms(i){return i instanceof Error?{name:i.name,message:i.message,stack:i.stack}:{value:String(i)}}function Gg(i){return i.includes("/translate_tts")||i.includes("/translate_a/single")}class jg{constructor(){u(this,"tempId",null);u(this,"extensionId");u(this,"extensionVersion");this.extensionId=chrome.runtime.id,this.extensionVersion=chrome.runtime.getManifest().version.replace(/\./g,"")}async init(){if(this.tempId)return;const t=await chrome.storage.local.get("tempId");this.tempId=t.tempId}async fetch(t,e={},s=0){if(await this.init(),await qn.init(),!this.tempId){const g=await chrome.storage.local.get("tempId");this.tempId=g.tempId||null}const n=e.method||"GET";let r=t;try{r=this.resolveUrl(t)}catch(g){throw ge.error("Failed to resolve request URL",{url:t,method:n,retryCount:s,error:ms(g)}),g}let a="";try{a=await qn.getValidToken()}catch(g){throw ge.error("Failed to get valid token",{url:r,method:n,retryCount:s,error:ms(g)}),g}const o=Math.floor(Date.now()/1e3).toString(),l=$g(16);let c="";try{c=await this.calculateSign(n,r,e.body,o,a)}catch(g){throw ge.error("Failed to calculate request signature",{url:r,method:n,retryCount:s,error:ms(g)}),g}const d={...e.headers||{},Authorization:`Bearer ${a}`,"x-user-id":(await chrome.storage.local.get("userId")).userId||"","x-temp-id":this.tempId||"","x-timestamp":o,"x-nonce":l,"x-extension-id":this.extensionId,"x-extension-version":this.extensionVersion,"x-sign":c};this.tempId||ge.warn("Missing tempId in request headers",{url:r,method:n,retryCount:s}),e.body&&typeof e.body=="object"&&(d["Content-Type"]="application/json",e.body=JSON.stringify(e.body));const h=Gg(r);h&&ge.log("Request start",{url:r,rawUrl:t,method:n,retryCount:s,hasUserId:!!d["x-user-id"],hasTempId:!!d["x-temp-id"]});try{const g=await fetch(r,{...e,headers:d});if(h&&!g.ok){const m=await g.clone().text().then(y=>y.slice(0,500)).catch(()=>"");ge.warn("Request returned non-OK status",{url:r,method:n,retryCount:s,status:g.status,statusText:g.statusText,bodySnippet:m})}if(g.status===401&&s<xt.maxRetryCount){const m=await g.clone().json().catch(()=>({}));if(ge.warn("Received 401 response",{url:r,method:n,retryCount:s,action:m.action||""}),m.action==="refresh_token")return await qn.refreshToken(),this.fetch(t,e,s+1)}return g}catch(g){if(ge.error("Request failed",{url:r,method:n,retryCount:s,error:ms(g)}),s<xt.maxRetryCount)return await this.delay(xt.retryDelay*(s+1)),this.fetch(t,e,s+1);throw g}}async calculateSign(t,e,s,n,r){let a;const o=this.tempId||"";if(t==="GET"){const l=new URL(e);a=`${Hg(l.searchParams)}|${n}|${o}`}else{const l=typeof s=="string"?s:JSON.stringify(s||{});a=`${await Bg(l)}|${n}|${o}`}return el(a,r)}resolveUrl(t){return/^https?:\/\//i.test(t)?t:new URL(t,zg).toString()}async get(t,e={}){return this.fetch(t,{...e,method:"GET"})}async post(t,e,s={}){return this.fetch(t,{...s,method:"POST",body:e})}async put(t,e,s={}){return this.fetch(t,{...s,method:"PUT",body:e})}async delete(t,e={}){return this.fetch(t,{...e,method:"DELETE"})}delay(t){return new Promise(e=>setTimeout(e,t))}}const Qe=new jg,Vg="/translate_tts";class qg{constructor(t={}){u(this,"name","google");u(this,"config");u(this,"currentSession",null);this.config={accent:"us",...t}}async speak(t,e){try{if(!t||typeof t!="string")return{success:!1,error:"文本参数无效"};this.stop();const n={...this.config,...e}.accent==="uk"?"en-GB":"en-US",r=new URLSearchParams({ie:"UTF-8",client:"gtx",tl:n,q:t}),a=`${Vg}?${r.toString()}`;return await U.warmUp(),new Promise(o=>{let l=!1;const c=setTimeout(()=>{l||(l=!0,U.stop(this.currentSession),this.currentSession=null,o({success:!1,error:"Google语音加载超时"}))},Jt.YOUDAO_TIMEOUT),d=()=>{clearTimeout(c),this.currentSession=null};Qe.get(a).then(async h=>{if(!h.ok)throw new Error(`HTTP ${h.status}`);const g=await h.blob();if(g.size>0){const m=await U.playBlob(g);this.currentSession=m,m.finished.then(()=>{var y;((y=this.currentSession)==null?void 0:y.id)===m.id&&(l||(l=!0,d(),o({success:!0})))});return}l||(l=!0,d(),o({success:!1,error:"Google语音获取失败"}))}).catch(h=>{l||(l=!0,d(),o({success:!1,error:`Google语音请求失败: ${h.message}`}))})})}catch(s){return this.currentSession=null,{success:!1,error:s instanceof Error?s.message:"未知错误"}}}stop(){this.currentSession&&(U.stop(this.currentSession),this.currentSession=null)}isSpeaking(){return!!this.currentSession&&this.currentSession.isPlaying()}isAvailable(){return typeof Audio<"u"&&typeof fetch<"u"}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}}class Yn{static createProvider(t,e){switch(t){case"google":return new qg(e);case"web-speech":return new Dg(e);case"youdao":return new Og(e);default:throw new Error(`不支持的TTS提供者类型: ${t}`)}}static getSupportedProviders(){return["google","web-speech","youdao"]}static isProviderSupported(t){return this.getSupportedProviders().includes(t)}static getProviderDisplayName(t){return{google:"Google翻译","web-speech":"浏览器语音",youdao:"有道词典"}[t]||t}static getProviderDescription(t){return{google:"使用Google翻译语音服务，音质清晰自然","web-speech":"使用浏览器内置的语音合成功能，支持多种语言和语音",youdao:"使用有道词典的在线语音服务，支持美式和英式发音"}[t]||""}}class Kn{static generateUniqueId(t="wxt"){return`${t}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static addUniqueId(t){let e=t.getAttribute("data-wxt-id");return e||(e=this.generateUniqueId(),t.setAttribute("data-wxt-id",e)),e}static getElementKey(t){return t.getAttribute("data-wxt-id")||"unknown"}static cleanupElements(t){document.querySelectorAll(t).forEach(s=>{try{s.remove()}catch(n){console.info(n)}})}static createPhoneticInlineElement(t){const e=document.createElement("span");return e.className=Pi.PHONETIC_INLINE,e.textContent=` ${t}`,e.style.cssText=`
      font-size: 0.85em;
      color: #666;
      margin-left: 2px;
      font-style: italic;
    `,e}static extractWords(t){return t.split(/\s+/).map(e=>e.trim()).filter(e=>e.length>0&&/^[a-zA-Z\-']+$/.test(e)).map(e=>e.replace(/^[^\w\-']+|[^\w\-']+$/g,"")).filter(e=>e.length>0)}static createInteractiveWordList(t){return t.map(e=>`<span class="${Pi.INTERACTIVE_WORD}" data-word="${e}">${e}</span>`).join(" ")}static hasClass(t,e){return t.classList.contains(e)}static addClass(t,e){this.hasClass(t,e)||t.classList.add(e)}static removeClass(t,e){this.hasClass(t,e)&&t.classList.remove(e)}static toggleClass(t,e){return t.classList.toggle(e)}static setAttribute(t,e,s){try{t.setAttribute(e,s)}catch{}}static getAttribute(t,e,s=""){try{return t.getAttribute(e)||s}catch{return s}}static findClosestWithClass(t,e){let s=t;for(;s&&s!==document.body;){if(this.hasClass(s,e))return s;s=s.parentElement}return null}}class Yg{constructor(t,e){u(this,"uiConfig");u(this,"originalWordDisplayMode");this.uiConfig=t,this.originalWordDisplayMode=e}createMainTooltipHTML(t){return Kn.extractWords(t.word).length>1?this.createPhraseTooltipHTML(t):this.createWordTooltipHTML(t)}createPhraseTooltipHTML(t){const e=Kn.extractWords(t.word),s=Kn.createInteractiveWordList(e);let n="";return this.shouldShowOriginalText()&&t.originalText&&(n=`<div class="wxt-phrase-original">原文：${t.originalText}</div>`),`
      <div class="wxt-tooltip-card">
        <div class="wxt-tooltip-header wxt-phrase-tooltip-header">
          <div class="wxt-phrase-info-card">
            <div class="wxt-phrase-title">${t.word}</div>
            ${n}
          </div>
          ${this.uiConfig.showPlayButton?`
          <button class="wxt-audio-btn wxt-phrase-audio-btn" title="朗读短语">
            ${us.SPEAKER}
          </button>
        `:""}
        </div>
        <div class="wxt-tooltip-body wxt-phrase-tooltip-body">
          <div class="wxt-phrase-words">${s}</div>
        </div>
        <div class="wxt-tooltip-arrow"></div>
      </div>
    `}createWordTooltipHTML(t){var c,d,h;const e=t.phonetic,s=((c=e==null?void 0:e.phonetics[0])==null?void 0:c.text)||"",n=e==null?void 0:e.aiTranslation,r=(d=e==null?void 0:e.error)==null?void 0:d.hasPhoneticError,a=(h=e==null?void 0:e.error)==null?void 0:h.phoneticErrorMessage;let o="";s?o=`<div class="wxt-phonetic-row"><div class="wxt-phonetic-text">${s}</div></div>`:r?o=`<div class="wxt-phonetic-row"><div class="wxt-phonetic-error">${a}</div></div>`:o='<div class="wxt-phonetic-row"><div class="wxt-phonetic-loading">获取音标中...</div></div>';let l="";return this.shouldShowOriginalText()&&t.originalText&&(l=this.createOriginalTextHTML(t.originalText)),`
      <div class="wxt-tooltip-card">
        <div class="wxt-tooltip-header">
          <div class="wxt-word-info">
            <div class="wxt-word-main">${t.word}</div>
            ${l}
            ${o}
            <div class="wxt-meaning-container">
              ${n?`<div class="wxt-meaning-text">${n.explain}</div>`:'<div class="wxt-meaning-loading">获取词义中...</div>'}
            </div>
          </div>
          ${this.uiConfig.showPlayButton?`
            <button class="wxt-audio-btn" title="朗读单词">
              ${us.SPEAKER}
            </button>
          `:""}
        </div>
        <div class="wxt-tooltip-arrow"></div>
      </div>
    `}createNestedWordTooltipHTML(t,e,s,n){let r="";return e?r=`<div class="wxt-phonetic-text">${e}</div>`:s?r=`<div class="wxt-phonetic-error">${n||"音标获取失败"}</div>`:r='<div class="wxt-phonetic-loading">获取音标中...</div>',`
      <div class="wxt-word-tooltip-card">
        <div class="wxt-word-tooltip-header">
          <div class="wxt-word-info">
            <div class="wxt-word-title-row">
              <div class="wxt-word-main">${t}</div>
              <div class="wxt-accent-buttons">
                <div class="wxt-accent-group">
                  <span class="wxt-accent-label">英</span>
                  <button class="wxt-accent-audio-btn" data-accent="uk" title="英式发音">
                    ${us.SPEAKER_SMALL}
                  </button>
                </div>
                <div class="wxt-accent-group">
                  <span class="wxt-accent-label">美</span>
                  <button class="wxt-accent-audio-btn" data-accent="us" title="美式发音">
                    ${us.SPEAKER_SMALL}
                  </button>
                </div>
              </div>
            </div>
            <div class="wxt-phonetic-row">${r}</div>
            <div class="wxt-meaning-container">
              <div class="wxt-meaning-loading">获取词义中...</div>
            </div>
          </div>
        </div>
      </div>
    `}updateTooltipWithMeaning(t,e){const s=t.querySelector(".wxt-meaning-container");if(!s)return;const n=s.querySelector(".wxt-meaning-loading");n&&n.remove();let r=s.querySelector(".wxt-meaning-text");r||(r=document.createElement("div"),r.className="wxt-meaning-text",s.appendChild(r)),r.textContent=e,r.style.display="block"}updateTooltipWithPhonetic(t,e){var a,o;const s=t.querySelector(".wxt-phonetic-row");if(!s)return;const n=s.querySelector(".wxt-phonetic-loading");n&&n.remove();let r;if((a=e.error)!=null&&a.hasPhoneticError)r=document.createElement("div"),r.className="wxt-phonetic-error",r.textContent=e.error.phoneticErrorMessage||"音标获取失败";else if(e.phonetics&&e.phonetics.length>0){const l=((o=e.phonetics[0])==null?void 0:o.text)||"";l?(r=document.createElement("div"),r.className="wxt-phonetic-text",r.textContent=l):(r=document.createElement("div"),r.className="wxt-phonetic-error",r.textContent="暂无音标信息")}else r=document.createElement("div"),r.className="wxt-phonetic-error",r.textContent="暂无音标信息";s.appendChild(r)}shouldShowOriginalText(){return this.originalWordDisplayMode===ee.HIDDEN}createOriginalTextHTML(t){return`<div class="wxt-original-text">原文: ${t}</div>`}updateConfig(t){this.uiConfig=t}updateOriginalWordDisplayMode(t){this.originalWordDisplayMode=t}}class Kg{constructor(){u(this,"timers",new Map)}set(t,e,s){this.clear(t);const n=window.setTimeout(()=>{e(),this.timers.delete(t)},s);this.timers.set(t,n)}clear(t){const e=this.timers.get(t);e&&(clearTimeout(e),this.timers.delete(t))}clearAll(){for(const t of this.timers.values())clearTimeout(t);this.timers.clear()}}class sl{static positionTooltip(t,e,s=wo.TOOLTIP_Z_INDEX,n="auto"){e.style.cssText=`
      position: fixed;
      visibility: hidden;
      z-index: ${s};
    `;const r=t.getBoundingClientRect(),a=e.getBoundingClientRect(),o=window.innerWidth,l=window.innerHeight,c=12;let d=r.left+(r.width-a.width)/2;d<c?d=c:d+a.width>o-c&&(d=o-a.width-c);let h,g;n==="bottom"?(h=r.bottom+12,g="wxt-tooltip-arrow wxt-tooltip-arrow-top"):n==="top"?(h=r.top-a.height-12,g="wxt-tooltip-arrow"):(h=r.top-a.height-12,g="wxt-tooltip-arrow",h<c&&(h=r.bottom+12,g="wxt-tooltip-arrow wxt-tooltip-arrow-top")),h+a.height>l-c&&(h=l-a.height-c);const m=e.querySelector(".wxt-tooltip-arrow");m&&(m.className=g),e.style.cssText=`
      position: fixed;
      left: ${d}px;
      top: ${h}px;
      z-index: ${s};
      visibility: visible;
    `}}class Jg{constructor(t,e){u(this,"config");u(this,"phoneticProvider");u(this,"ttsProvider");u(this,"fallbackTTSProvider");u(this,"aiTranslationProvider");u(this,"tooltipRenderer");u(this,"elementDataMap",new Map);u(this,"timerManager",new Kg);u(this,"currentWordTooltip",null);u(this,"currentMainTooltip",null);u(this,"currentMainElement",null);u(this,"storageService");u(this,"isCtrlPressed",!1);u(this,"currentlyHoveredData",null);this.config={...Bn,...t},this.phoneticProvider=Vn.createProvider(this.config.provider),this.ttsProvider=Yn.createProvider(this.config.ttsConfig.provider,this.config.ttsConfig);const s=e||Or;this.aiTranslationProvider=new Zo(s),this.tooltipRenderer=new Yg(this.config.uiConfig,ee.HIDDEN),this.storageService=ft.getInstance(),this.fallbackTTSProvider=Yn.createProvider("web-speech",{lang:this.config.ttsConfig.lang,rate:this.config.ttsConfig.rate,pitch:this.config.ttsConfig.pitch,volume:this.config.ttsConfig.volume}),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentKeyUp=this.handleDocumentKeyUp.bind(this),this.handleWindowBlur=this.handleWindowBlur.bind(this),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("keyup",this.handleDocumentKeyUp),window.addEventListener("blur",this.handleWindowBlur),this.updateOriginalWordDisplayMode()}async addPronunciationToElement(t,e,s){try{if(!t||!e||this.elementDataMap.has(t))return!1;t.getAttribute("data-wxt-id")||t.setAttribute("data-wxt-id",`wxt-${Date.now()}-${Math.random().toString(36).substr(2,9)}`);const n={word:e.toLowerCase().trim(),element:t},r=t.getAttribute("data-original-text");return r&&(n.originalText=r),this.elementDataMap.set(t,n),t.classList.add(Pi.PRONUNCIATION_ENABLED),this.config.uiConfig.inlineDisplay&&await this.preloadPhonetic(n),this.attachEventListeners(t,n),!0}catch(n){return console.error("添加发音功能失败:",n),!1}}removePronunciationFromElement(t){const e=this.elementDataMap.get(t);if(!e)return;this.removeEventListeners(t);const s=this.getElementKey(t);this.timerManager.clear(`hide-${s}`),this.timerManager.clear(`show-${s}`),e.tooltip&&e.tooltip.remove(),this.currentMainElement===t&&(this.currentMainTooltip=null,this.currentMainElement=null),t.classList.remove(Pi.PRONUNCIATION_ENABLED,Pi.PRONUNCIATION_LOADING),this.elementDataMap.delete(t)}async getPhonetic(t){return this.phoneticProvider.getPhonetic(t)}async speakText(t){try{this.stopSpeaking();const e=await this.ttsProvider.speak(t);if(e.success)return e;if(!this.fallbackTTSProvider.isAvailable())return{success:!1,error:`主TTS提供者失败且备用提供者不可用: ${e.error}`};const s=await this.fallbackTTSProvider.speak(t);return s.success?(console.info(`TTS回退成功，使用备用提供者(${this.fallbackTTSProvider.name})`),{success:!0}):{success:!1,error:`主TTS和备用TTS都失败: 主=${e.error}, 备用=${s.error}`}}catch(e){console.error("TTS朗读过程中发生意外错误:",e);try{if(this.fallbackTTSProvider.isAvailable()&&(await this.fallbackTTSProvider.speak(t)).success)return console.info("TTS异常回退成功"),{success:!0}}catch(s){console.error("备用TTS也发生异常:",s)}return{success:!1,error:e instanceof Error?e.message:"朗读功能暂时不可用"}}}stopSpeaking(){try{this.ttsProvider.stop()}catch(t){console.error("停止主TTS提供者时出错:",t)}try{this.fallbackTTSProvider.stop()}catch(t){console.error("停止备用TTS提供者时出错:",t)}}async speakTextWithAccent(t,e){try{this.stopSpeaking();const n={"en-US":"us","en-GB":"uk"}[e];if(n&&this.ttsProvider.name==="youdao"){const o={accent:n,rate:this.config.ttsConfig.rate,pitch:this.config.ttsConfig.pitch,volume:this.config.ttsConfig.volume},l=await this.ttsProvider.speak(t,o);if(l.success)return l}const r={lang:e,rate:this.config.ttsConfig.rate,pitch:this.config.ttsConfig.pitch,volume:this.config.ttsConfig.volume},a=await this.fallbackTTSProvider.speak(t,r);return a.success?a:await this.speakText(t)}catch(s){return console.error("口音朗读失败:",s),await this.speakText(t)}}updateConfig(t){this.config={...this.config,...t},t.provider&&t.provider!==this.phoneticProvider.name&&(this.phoneticProvider=Vn.createProvider(t.provider)),t.ttsConfig&&(t.ttsConfig.provider&&t.ttsConfig.provider!==this.ttsProvider.name?this.ttsProvider=Yn.createProvider(t.ttsConfig.provider,t.ttsConfig):this.ttsProvider.updateConfig(t.ttsConfig),this.fallbackTTSProvider.updateConfig({lang:t.ttsConfig.lang,rate:t.ttsConfig.rate,pitch:t.ttsConfig.pitch,volume:t.ttsConfig.volume})),t.uiConfig&&(this.tooltipRenderer.updateConfig(t.uiConfig),this.updateOriginalWordDisplayMode())}async updateOriginalWordDisplayMode(){try{const e=(await this.storageService.getUserSettings()).originalWordDisplayMode||ee.VISIBLE;this.tooltipRenderer.updateOriginalWordDisplayMode(e)}catch(t){console.error("更新原文显示模式失败:",t),this.tooltipRenderer.updateOriginalWordDisplayMode(ee.VISIBLE)}}async updateApiConfig(t){try{const e=t||await this.storageService.getActiveApiConfig();e&&this.aiTranslationProvider.updateApiConfig(e)}catch(e){console.error("更新API配置失败:",e)}}getConfig(){return{...this.config}}getTTSProviderStatus(){return{primary:{name:this.ttsProvider.name,available:this.ttsProvider.isAvailable(),speaking:this.ttsProvider.isSpeaking()},fallback:{name:this.fallbackTTSProvider.name,available:this.fallbackTTSProvider.isAvailable(),speaking:this.fallbackTTSProvider.isSpeaking()}}}getElementKey(t){return t.getAttribute("data-wxt-id")||"unknown"}async preloadPhonetic(t){if(!t.phonetic)try{t.element.classList.add("wxt-pronunciation-loading");const e=await this.phoneticProvider.getPhonetic(t.word);e.success&&e.data&&(t.phonetic=e.data,this.displayInlinePhonetic(t))}catch(e){console.error("预加载音标失败:",e)}finally{t.element.classList.remove("wxt-pronunciation-loading")}}displayInlinePhonetic(t){var n;if(!t.phonetic||!this.config.uiConfig.showPhonetic)return;const e=(n=t.phonetic.phonetics[0])==null?void 0:n.text;if(!e)return;const s=document.createElement("span");s.className="wxt-phonetic-inline",s.textContent=` ${e}`,s.style.cssText=`
      font-size: 0.85em;
      color: #666;
      margin-left: 2px;
      font-style: italic;
    `,t.element.appendChild(s)}attachEventListeners(t,e){const s=async()=>{e.isMouseOver=!0,this.currentlyHoveredData=e,await this.checkHotkey()&&await this.handleMouseEnter(e)},n=()=>{var r;e.isMouseOver=!1,((r=this.currentlyHoveredData)==null?void 0:r.element)===t&&(this.currentlyHoveredData=null),this.handleMouseLeave(e)};t.addEventListener("mouseenter",s),t.addEventListener("mouseleave",n),t.__wxtHandlers={mouseEnterHandler:s,mouseLeaveHandler:n}}removeEventListeners(t){const e=t.__wxtHandlers;e&&(t.removeEventListener("mouseenter",e.mouseEnterHandler),t.removeEventListener("mouseleave",e.mouseLeaveHandler),delete t.__wxtHandlers)}async checkHotkey(){try{const e=(await this.storageService.getUserSettings()).pronunciationHotkey;return!e||!e.enabled?!0:this.isCtrlPressed}catch(t){return console.error("获取快捷键配置失败:",t),!0}}async handleMouseEnter(t){if(!this.config.uiConfig.tooltipEnabled)return;const e=this.getElementKey(t.element);this.timerManager.clear(`hide-${e}`),this.timerManager.clear(`show-${e}`),this.timerManager.set(`show-${e}`,async()=>{var o;if(this.extractWords(t.word).length>1){this.showTooltip(t);return}const r=!t.phonetic,a=!((o=t.phonetic)!=null&&o.aiTranslation);t.phonetic||(t.phonetic={word:t.word,phonetics:[]}),this.showTooltip(t),r&&this.phoneticProvider.getPhonetic(t.word).then(l=>{l.success&&l.data?t.phonetic?(t.phonetic.phonetics=l.data.phonetics,t.phonetic.meanings=l.data.meanings):t.phonetic=l.data:t.phonetic&&(t.phonetic.error={hasPhoneticError:!0,phoneticErrorMessage:l.error||"音标获取失败"}),t.tooltip&&this.tooltipRenderer.updateTooltipWithPhonetic(t.tooltip,t.phonetic)}).catch(l=>{console.error("获取音标失败:",l),t.phonetic&&(t.phonetic.error={hasPhoneticError:!0,phoneticErrorMessage:"音标获取异常"}),t.tooltip&&this.tooltipRenderer.updateTooltipWithPhonetic(t.tooltip,t.phonetic)}),a&&this.aiTranslationProvider.getMeaning(t.word).then(l=>{l.success&&l.data&&(t.phonetic?t.phonetic.aiTranslation=l.data:t.phonetic={word:t.word,phonetics:[],aiTranslation:l.data},t.tooltip&&this.tooltipRenderer.updateTooltipWithMeaning(t.tooltip,l.data.explain))}).catch(l=>{console.error("获取AI翻译失败:",l)})},Jt.SHOW_DELAY)}handleMouseLeave(t){const e=this.getElementKey(t.element);this.timerManager.clear(`show-${e}`),this.timerManager.set(`hide-${e}`,()=>{this.currentWordTooltip||this.hideTooltip(t)},Jt.HIDE_DELAY)}showTooltip(t){this.cleanupOtherTooltips(t.element),this.hideWordTooltip(),!(this.extractWords(t.word).length>1)&&!t.phonetic&&(t.phonetic={word:t.word,phonetics:[]}),t.tooltip&&t.tooltip.remove();const n=this.createTooltip(t);t.tooltip=n,document.body.appendChild(n),sl.positionTooltip(t.element,n),this.currentMainTooltip=n,this.currentMainElement=t.element}hideTooltip(t){t.tooltip&&(t.tooltip.remove(),t.tooltip=void 0),this.currentMainElement===t.element&&(this.currentMainTooltip=null,this.currentMainElement=null)}cleanupOtherTooltips(t){for(const[s,n]of this.elementDataMap.entries())if(s!==t&&n.tooltip){const r=this.getElementKey(s);this.timerManager.clear(`hide-${r}`),this.timerManager.clear(`show-${r}`),n.tooltip.remove(),n.tooltip=void 0}this.timerManager.clear("word-show"),this.timerManager.clear("word-hide"),this.currentMainTooltip=null,this.currentMainElement=null,document.querySelectorAll(".wxt-pronunciation-tooltip, .wxt-word-tooltip").forEach(s=>{try{s.remove()}catch(n){console.info(n)}})}forceCleanupWordTooltips(){this.timerManager.clear("word-show"),this.timerManager.clear("word-hide"),this.currentWordTooltip&&(this.currentWordTooltip.remove(),this.currentWordTooltip=null),document.querySelectorAll(".wxt-word-tooltip").forEach(e=>e.remove())}createTooltip(t){const e=document.createElement("div");e.className="wxt-pronunciation-tooltip",Ni(e,this.tooltipRenderer.createMainTooltipHTML(t)),this.attachTooltipEventListeners(e,t);const s=this.extractWords(t.word);return s.length>1&&this.setupWordInteractions(e,s),e}attachTooltipEventListeners(t,e){const s=this.getElementKey(e.element);t.addEventListener("mouseenter",()=>{this.timerManager.clear(`hide-${s}`)}),t.addEventListener("mouseleave",()=>{this.timerManager.set(`hide-${s}`,()=>{this.currentWordTooltip||this.hideTooltip(e)},Jt.HIDE_DELAY)});const n=t.querySelector(".wxt-audio-btn");n&&n.addEventListener("click",r=>{r.stopPropagation(),this.speakText(e.word)})}extractWords(t){return t.split(/\s+/).map(e=>e.trim()).filter(e=>e.length>0&&/^[a-zA-Z\-']+$/.test(e)).map(e=>e.replace(/^[^\w\-']+|[^\w\-']+$/g,"")).filter(e=>e.length>0)}setupWordInteractions(t,e){t.querySelectorAll(".wxt-interactive-word").forEach(n=>{const r=n.getAttribute("data-word");r&&(n.addEventListener("mouseenter",async()=>{this.timerManager.clear("word-hide"),this.timerManager.clear("word-show"),this.hideWordTooltip(),this.timerManager.set("word-show",async()=>{await this.showWordTooltip(n,r)},Jt.WORD_SHOW_DELAY)}),n.addEventListener("mouseleave",()=>{this.timerManager.clear("word-show"),this.timerManager.set("word-hide",()=>{this.hideWordTooltip()},Jt.HIDE_DELAY)}))})}async showWordTooltip(t,e){try{this.forceCleanupWordTooltips(),this.cancelAllMainTooltipHideTimers();const s=document.createElement("div");s.className="wxt-word-tooltip",Ni(s,this.tooltipRenderer.createNestedWordTooltipHTML(e)),s.querySelectorAll(".wxt-accent-audio-btn").forEach((l,c)=>{l.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation();const h=l.getAttribute("data-accent");h==="uk"?this.speakTextWithAccent(e,"en-GB"):h==="us"?this.speakTextWithAccent(e,"en-US"):this.speakText(e)})}),s.addEventListener("mouseenter",l=>{l.stopPropagation(),this.timerManager.clear("word-hide"),this.cancelAllMainTooltipHideTimers()}),s.addEventListener("mouseleave",l=>{l.stopPropagation(),this.timerManager.set("word-hide",()=>{this.hideWordTooltip()},Jt.HIDE_DELAY)}),document.body.appendChild(s),sl.positionTooltip(t,s,wo.WORD_TOOLTIP_Z_INDEX,"bottom"),this.currentWordTooltip=s,requestAnimationFrame(()=>{s.style.visibility="visible",s.style.opacity="1"});const r=[],a=this.phoneticProvider.getPhonetic(e).then(l=>{let c;l.success&&l.data?c=l.data:c={word:e,phonetics:[],error:{hasPhoneticError:!0,phoneticErrorMessage:l.error||"音标获取失败"}},this.currentWordTooltip===s&&this.tooltipRenderer.updateTooltipWithPhonetic(s,c)}).catch(l=>{console.error("获取单词悬浮框音标失败:",l);const c={word:e,phonetics:[],error:{hasPhoneticError:!0,phoneticErrorMessage:"音标获取异常"}};this.currentWordTooltip===s&&this.tooltipRenderer.updateTooltipWithPhonetic(s,c)});r.push(a);const o=this.aiTranslationProvider.getMeaning(e).then(l=>{l.success&&l.data&&this.currentWordTooltip===s&&this.tooltipRenderer.updateTooltipWithMeaning(s,l.data.explain)}).catch(l=>{console.error("获取单词悬浮框词义失败:",l)});r.push(o)}catch(s){console.error("显示单词悬浮框失败:",s)}}cancelAllMainTooltipHideTimers(){for(const[t]of this.elementDataMap.entries()){const e=this.getElementKey(t);this.timerManager.clear(`hide-${e}`)}}restartMainTooltipHideTimer(){if(this.currentMainElement){const t=this.elementDataMap.get(this.currentMainElement);if(t){const e=this.getElementKey(this.currentMainElement);this.timerManager.set(`hide-${e}`,()=>{this.currentWordTooltip||this.hideTooltip(t)},Jt.HIDE_DELAY)}}}hideWordTooltip(){this.currentWordTooltip&&(this.currentWordTooltip.remove(),this.currentWordTooltip=null,this.restartMainTooltipHideTimer())}async handleDocumentKeyDown(t){if(t.key==="Control"&&!this.isCtrlPressed){this.isCtrlPressed=!0;const s=(await this.storageService.getUserSettings()).pronunciationHotkey;if(!s||!s.enabled)return;this.currentlyHoveredData&&(t.preventDefault(),await this.handleMouseEnter(this.currentlyHoveredData))}}handleDocumentKeyUp(t){t.key==="Control"&&(this.isCtrlPressed=!1)}handleWindowBlur(){this.isCtrlPressed=!1}destroy(){this.timerManager.clearAll(),this.hideWordTooltip(),this.currentMainTooltip=null,this.currentMainElement=null;for(const t of this.elementDataMap.keys())this.removePronunciationFromElement(t);this.stopSpeaking(),this.elementDataMap.clear(),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("keyup",this.handleDocumentKeyUp),window.removeEventListener("blur",this.handleWindowBlur)}}class Xg{constructor(){u(this,"processedContent",new Map);u(this,"activeProcessing",new Set);u(this,"cleanupTimer",null);u(this,"CLEANUP_INTERVAL",72e5);u(this,"CONTENT_TTL",144e5);this.startCleanupTimer()}generateContentFingerprint(t,e){const s=t.trim().replace(/\s+/g," "),r=e.includes(":nth-child")||s.length<100?Math.floor(Date.now()/3e4):0,a=`${s}|${e}|${r}`;let o=0;for(let l=0;l<a.length;l++){const c=a.charCodeAt(l);o=(o<<5)-o+c,o=o&o}return Math.abs(o).toString(36)}generateDomPath(t){var n;const e=[];let s=t;for(;s&&s!==document.body;){let r=s.tagName.toLowerCase();const a=Array.from(s.classList).filter(l=>!l.startsWith("wxt-")).slice(0,2);a.length>0&&(r+="."+a.join("."));const o=(n=s.parentElement)==null?void 0:n.children;if(o&&o.length>1){const l=Array.from(o).indexOf(s);r+=`:nth-child(${l+1})`}e.unshift(r),s=s.parentElement}return e.join(" > ")}isContentProcessed(t){const e=this.processedContent.get(t);return e?Date.now()-e.timestamp>this.CONTENT_TTL?(this.processedContent.delete(t),!1):!0:!1}isContentProcessing(t){return this.activeProcessing.has(t)}markProcessingStart(t){return this.isContentProcessed(t)||this.isContentProcessing(t)?!1:(this.activeProcessing.add(t),!0)}markProcessingComplete(t,e,s,n=!0){this.activeProcessing.delete(t),this.processedContent.set(t,{fingerprint:t,timestamp:Date.now(),domPath:e,processingResult:{replacementCount:s,success:n}})}markProcessingFailed(t,e){this.markProcessingComplete(t,e,0,!1)}getProcessingStats(){const t=Array.from(this.processedContent.values()),e=t.filter(n=>n.processingResult.success),s=t.reduce((n,r)=>n+r.processingResult.replacementCount,0);return{processedCount:t.length,activeCount:this.activeProcessing.size,successRate:t.length>0?e.length/t.length:0,totalReplacements:s}}cleanup(){const t=Date.now(),e=[];for(const[s,n]of this.processedContent.entries())t-n.timestamp>this.CONTENT_TTL&&e.push(s);e.forEach(s=>{this.processedContent.delete(s)})}startCleanupTimer(){this.cleanupTimer=window.setInterval(()=>{this.cleanup()},this.CLEANUP_INTERVAL)}forceCleanup(){this.cleanup()}reset(){this.processedContent.clear(),this.activeProcessing.clear()}destroy(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.reset()}}const ct=new Xg,Qg=[...new Set(["SCRIPT","STYLE","META","LINK","IFRAME","INPUT","TEXTAREA","SELECT","OPTION","CODE","NAV","FOOTER","PRE","IMG","IMAGE","TIME","NOSCRIPT","HEADER","BANNER","COPYRIGHT","TITLE","BUTTON","FORM","SVG","CANVAS","VIDEO","AUDIO"]),"script","style","meta","link","noscript","title","input","textarea","select","button","form","img","svg","canvas","video","audio","iframe",'[contenteditable="false"]','[aria-hidden="true"]',".wxt-translation-term",".wxt-original-word",".wxt-pronunciation-tooltip","[data-wxt-text-processed]","[data-wxt-word-processed]",".code",".highlight",".hljs"].join(", "),Zg=new Set(["DIV","P","SECTION","ARTICLE","MAIN","ASIDE","HEADER","FOOTER","NAV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","PRE","LI","TD","TH","FIGCAPTION","DETAILS","SUMMARY","ADDRESS","HGROUP"]),pe={WRAPPER_CLASS:"illa-paragraph-translation"},tp={maxSegmentLength:2e3,minSegmentLength:80,enableSmartBoundary:!0,mergeSmallSegments:!0};class nl{constructor(t={}){u(this,"config");this.config={...tp,...t}}segmentContent(t){const e=[],s=this.findLeafContentContainers(t);for(const n of s){const r=this.extractSegmentsFromContainer(n);e.push(...r)}return this.config.mergeSmallSegments?this.mergeSmallSegments(e):e}findLeafContentContainers(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r;return this.shouldIgnoreElement(a)?NodeFilter.FILTER_REJECT:this.isLeafContentContainer(a)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let n;for(;n=s.nextNode();)e.push(n);return this.deduplicateNestedContainers(e)}deduplicateNestedContainers(t){const e=[];for(const s of t)if(!e.some(r=>r.contains(s)&&r!==s)){const r=[];for(let a=0;a<e.length;a++)s.contains(e[a])&&s!==e[a]&&r.push(a);for(let a=r.length-1;a>=0;a--)e.splice(r[a],1);e.push(s)}return e}isLeafContentContainer(t){if(!this.getTextContent(t))return!1;const s=t.querySelectorAll(Array.from(Zg).map(n=>n.toLowerCase()).join(", "));if(s.length>3)return!1;for(const n of s)if(this.getTextContent(n).length>100)return!1;return!0}extractSegmentsFromContainer(t){const e=[],s=this.getTextNodes(t);if(s.length===0)return e;const n=s.map(a=>a.textContent||"").join(""),r=ct.generateDomPath(t);if(n.length<=this.config.maxSegmentLength){const a=ct.generateContentFingerprint(n,r);e.push({id:`${t.tagName.toLowerCase()}-${a}`,textContent:n,element:t,elements:[t],textNodes:s,fingerprint:a,domPath:r})}else{const a=this.splitLongText(s,t,r);e.push(...a)}return e}splitLongText(t,e,s){const n=[];let r=[],a=0;for(const o of t){const l=o.textContent||"";if(r.map(d=>d.textContent||"").join("").length+l.length>this.config.maxSegmentLength&&r.length>0){const d=r.map(g=>g.textContent||"").join(""),h=ct.generateContentFingerprint(d,`${s}[${a}]`);n.push({id:`${e.tagName.toLowerCase()}-${h}-${a}`,textContent:d,element:e,elements:[e],textNodes:[...r],fingerprint:h,domPath:`${s}[${a}]`}),r=[],a++}r.push(o)}if(r.length>0){const o=r.map(c=>c.textContent||"").join(""),l=ct.generateContentFingerprint(o,`${s}[${a}]`);n.push({id:`${e.tagName.toLowerCase()}-${l}-${a}`,textContent:o,element:e,elements:[e],textNodes:r,fingerprint:l,domPath:`${s}[${a}]`})}return n}mergeSmallSegments(t){if(t.length===0||t.length===1)return t;const e=[];let s=[];const n=Math.floor(this.config.maxSegmentLength*.7),r=this.config.maxSegmentLength;for(let a=0;a<t.length;a++){const o=t[a],c=s.reduce((d,h)=>d+h.textContent.length,0)+o.textContent.length;c>r&&s.length>0?(s.length===1?e.push(s[0]):e.push(this.createMergedSegment(s)),s=[o]):c>=n&&s.length>0?(s.push(o),s.length===1?e.push(s[0]):e.push(this.createMergedSegment(s)),s=[]):s.push(o)}return s.length>0&&(s.length===1?e.push(s[0]):e.push(this.createMergedSegment(s))),e}createMergedSegment(t){const e=t.map(l=>l.textContent).join(""),s=t.reduce((l,c)=>l.concat(c.textNodes),[]),n=t[0].element,r=t.map(l=>l.element),a=t.map(l=>l.domPath).join("|"),o=ct.generateContentFingerprint(e,a);return{id:`merged-${o}`,textContent:e,element:n,elements:r,textNodes:s,fingerprint:o,domPath:a}}getTextNodes(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:r=>{var l;if(!((l=r.textContent)==null?void 0:l.trim()))return NodeFilter.FILTER_REJECT;const o=r.parentElement;return o&&this.shouldIgnoreElement(o)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}});let n;for(;n=s.nextNode();)e.push(n);return e}getTextContent(t){return this.getTextNodes(t).map(s=>s.textContent||"").join("").trim()}shouldIgnoreElement(t){if(t.matches(Qg))return!0;const e=window.getComputedStyle(t);return!!(e.display==="none"||e.visibility==="hidden"||t.hasAttribute("data-wxt-text-processed")||t.hasAttribute("data-wxt-word-processed"))}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}}const ep=Object.freeze(Object.defineProperty({__proto__:null,ContentSegmenter:nl},Symbol.toStringTag,{value:"Module"}));let rl=!0;function ip(i){rl=i}function Pt(i){const t=Ot(i);return{log:(e,...s)=>{rl&&t.log(e,...s)},warn:t.warn,error:t.error}}const bt=Pt("WordTTS"),sp="/translate_tts";function np(i){return i instanceof Error?{name:i.name,message:i.message,stack:i.stack}:{value:String(i)}}let bs=!1,Ss=null,fe=null;function ws(){fe&&(U.stop(fe),fe=null,bt.log("已停止当前 Word TTS 播放")),bs=!1,Ss=null}let al=!1;function rp(){al||(al=!0,document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&U.warmUp().catch(i=>{bt.warn("恢复音频系统失败:",i)})}),bt.log("页面可见性监听已设置"))}async function ap(){await U.warmUp()}async function op(i){const t=await U.playBlob(i);return fe=t,t.finished.then(()=>{(fe==null?void 0:fe.id)===t.id&&(bt.log("音频播放结束"),bs=!1,Ss=null,fe=null)}),t}let ol=!1;function lp(){ol||(ol=!0,rp(),document.addEventListener("click",async i=>{const e=i.target.closest(".wxt-original-word");if(!e)return;i.preventDefault(),i.stopPropagation();const s=e.getAttribute("data-wxt-original-word")||e.textContent||"";if(!s)return;const n=new URLSearchParams({ie:"UTF-8",client:"gtx",tl:"en-US",q:s}),r=`${sp}?${n.toString()}`;if(bs)if(Ss===r){bt.log("忽略重复点击，同一单词正在播放:",s);return}else bt.log("切换到新单词，停止当前播放:",s),ws();bs=!0,Ss=r,bt.log("Word TTS (委托):",{text:s,audioUrl:r});try{await ap(),bt.log("开始 fetch...",{audioUrl:r,textLength:s.length});const a=await Qe.get(r);if(!a.ok){const l=await a.clone().text().then(c=>c.slice(0,500)).catch(()=>"");bt.error("Word TTS HTTP error",{audioUrl:r,status:a.status,statusText:a.statusText,bodySnippet:l}),ws();return}const o=await a.blob();o.size>0?(bt.log("下载完成",{audioUrl:r,blobSize:o.size,contentType:a.headers.get("content-type")||""}),await op(o)):(bt.error("Word TTS 响应音频为空",{audioUrl:r,status:a.status,statusText:a.statusText,contentType:a.headers.get("content-type")||""}),ws())}catch(a){bt.error("Word TTS fetch failed",{audioUrl:r,text:s,error:np(a)}),ws()}},!0),bt.log("Word TTS 事件委托已设置"))}class ll{constructor(t){u(this,"processingQueue",Promise.resolve());u(this,"pronunciationService");u(this,"stats",{totalProcessed:0,totalSkipped:0,totalErrors:0,averageProcessingTime:0});this.pronunciationService=t,lp()}async processSegments(t,e,s,n,r,a=!1){const o=Date.now();return this.processingQueue=this.processingQueue.then(async()=>this.doProcessSegments(t,e,s,n,r,o,a))}async doProcessSegments(t,e,s,n,r,a,o=!1){let l=0,c=0,d=0,h=0;const g=[],y=t.filter(L=>{const b=ct.isContentProcessed(L.fingerprint),v=ct.isContentProcessing(L.fingerprint);return b||v?(c++,!1):!0}).filter(L=>ct.markProcessingStart(L.fingerprint));try{const b=[];for(let v=0;v<y.length;v+=8){const P=y.slice(v,v+8),S=P.map(I=>this.processSingleSegment(I,e,s,n,r));(await Promise.allSettled(S)).forEach((I,x)=>{const V=P[x];if(I.status==="fulfilled")b.push(I.value);else{const z=I.reason;b.push({segment:V,success:!1,replacementCount:0,error:z instanceof Error?z.message:String(z)})}})}b.forEach(v=>{v.success?(l++,d+=v.replacementCount,ct.markProcessingComplete(v.segment.fingerprint,v.segment.domPath,v.replacementCount,!0)):(h++,g.push(v.error||"未知错误"),ct.markProcessingFailed(v.segment.fingerprint,v.segment.domPath))})}catch(L){y.forEach(v=>{ct.markProcessingFailed(v.fingerprint,v.domPath)});const b=Date.now()-a;return{success:!1,replacementCount:0,segmentCount:0,skippedCount:c,error:L instanceof Error?L.message:String(L),duration:b}}const C=Date.now()-a;return this.updateStats(l,c,h,C),{success:h===0,replacementCount:d,segmentCount:l,skippedCount:c,error:g.length>0?g[0]:void 0,duration:C}}async processSingleSegment(t,e,s,n,r){try{t.elements.forEach(o=>{this.addProcessingFeedback(o)});const a=await e.replaceText(t.textContent);return a&&a.replacements&&a.replacements.length>0?(this.applyReplacements(t,a.replacements,e.styleManager,s,n,r),this.pronunciationService&&setTimeout(()=>{this.addPronunciationToSegment(t)},0),this.markTextNodesProcessed(t.textNodes),{segment:t,success:!0,replacementCount:a.replacements.length}):(this.markTextNodesProcessed(t.textNodes),{segment:t,success:!0,replacementCount:0})}catch(a){return{segment:t,success:!1,replacementCount:0,error:a instanceof Error?a.message:String(a)}}finally{t.elements.forEach(a=>{this.removeProcessingFeedback(a)})}}applyReplacements(t,e,s,n,r,a){var h;const o=t.textNodes.map(g=>g.textContent||"").join("");t.textContent!==o&&console.error("[TranslationDebug] ❌ segment与DOM不一致!",{segmentLen:(h=t.textContent)==null?void 0:h.length,domLen:o.length});const d=this.recalculatePositions(o,e).sort((g,m)=>m.position.start-g.position.start);for(const g of d){const m=this.findRangeInTextNodes(t.textNodes,g.position.start,g.position.end);m&&this.applyReplacementToRange(m,g,s,n,r,a)}}recalculatePositions(t,e){const s=[],n=[];for(const r of e){if(!r.original||!r.translation)continue;let a=0;for(;a<t.length;){const o=t.indexOf(r.original,a);if(o===-1)break;const l=o,c=o+r.original.length;if(!n.some(h=>l<h.end&&h.start<c)&&t.substring(l,c)===r.original){s.push({...r,position:{start:l,end:c}}),n.push({start:l,end:c});break}a=o+1}}return s.sort((r,a)=>r.position.start-a.position.start)}findRangeInTextNodes(t,e,s){var d;let n=0,r=null,a=null,o=0,l=0;const c=t.map(h=>h.textContent||"").join("");if(e<0||s>c.length||e>=s)return null;for(const h of t){const g=((d=h.textContent)==null?void 0:d.length)||0;if(r===null&&n+g>=e&&(r=h,o=e-n),a===null&&n+g>=s&&(a=h,l=s-n),r&&a)break;n+=g}if(r&&a){const h=document.createRange();h.setStart(r,o),h.setEnd(a,l);const g=h.toString(),m=c.substring(e,s);return g!==m?null:h}return null}applyReplacementToRange(t,e,s,n,r,a){try{const o=document.createElement("span");o.className="wxt-original-word",o.textContent=t.toString(),o.setAttribute("data-wxt-original-word",e.original),o.style.cursor="pointer";const l=document.createElement("span");switch(l.className=`wxt-translation-term ${s.getCurrentStyleClass()}`,l.setAttribute("data-original-text",e.original),a?l.textContent=` (${e.translation}) `:l.textContent=` ${e.translation} `,n){case ee.HIDDEN:o.style.display="none";break;case ee.LEARNING:o.classList.add("wxt-original-word--learning");break}t.surroundContents(o),r===Us.BEFORE?o.before(l):o.after(l),this.addGlowEffect(l),o.setAttribute("data-wxt-word-processed","true")}catch{}}markTextNodesProcessed(t){const e=Date.now().toString();t.forEach(s=>{s.parentElement&&(s.parentElement.setAttribute("data-wxt-text-processed","true"),s.parentElement.setAttribute("data-wxt-processed-time",e))})}addProcessingFeedback(t){t.classList.add("wxt-processing")}removeProcessingFeedback(t){t.classList.remove("wxt-processing")}addGlowEffect(t){t.classList.add("wxt-glow"),setTimeout(()=>{t.classList.remove("wxt-glow")},800)}updateStats(t,e,s,n){this.stats.totalProcessed+=t,this.stats.totalSkipped+=e,this.stats.totalErrors+=s;const r=this.stats.totalProcessed+this.stats.totalErrors;r>0&&(this.stats.averageProcessingTime=(this.stats.averageProcessingTime*(r-t-s)+n)/r)}getStats(){return{...this.stats}}resetStats(){this.stats={totalProcessed:0,totalSkipped:0,totalErrors:0,averageProcessingTime:0}}async waitForCompletion(){await this.processingQueue}async addPronunciationToSegment(t){if(this.pronunciationService)try{const e=[];for(const s of t.elements){const n=s.querySelectorAll?s.querySelectorAll(".wxt-translation-term:not([data-pronunciation-added])"):[];e.push(...Array.from(n))}for(const s of e){const n=s.textContent;if(n){const r=n.replace(/[()]/g,"").trim();/^[a-zA-Z0-9\s\-',.!?;:()%]+$/.test(r)&&r.length>0&&(await this.pronunciationService.addPronunciationToElement(s,r),s.setAttribute("data-pronunciation-added","true"))}}}catch{}}}const ve=class ve{constructor(t={}){u(this,"pronunciationService");u(this,"contentSegmenter");u(this,"processingCoordinator");u(this,"config");this.config={enablePronunciationTooltip:!0,...t},this.initializeServices(),this.injectGlowStyle()}static getInstance(t){return ve.instance||(ve.instance=new ve(t)),ve.instance}static resetInstance(){ve.instance=null}initializeServices(){const t={...Bn,uiConfig:{...Bn.uiConfig,tooltipEnabled:this.config.enablePronunciationTooltip??!0}};this.pronunciationService=new Jg(t,this.config.apiConfig),this.contentSegmenter=new nl,this.processingCoordinator=new ll(this.pronunciationService)}injectGlowStyle(){if(window.wxtGlowStyleInjected)return;const t=document.createElement("style");t.textContent=`
      @keyframes wxt-glow-animation {
        from {
          background-color: rgba(106, 136, 224, 0.3);
          box-shadow: 0 0 8px rgba(106, 136, 224, 0.5);
        }
        to {
          background-color: transparent;
          box-shadow: 0 0 0 transparent;
        }
      }
      .wxt-glow {
        animation: wxt-glow-animation 0.8s ease-out;
        border-radius: 3px;
      }
      .wxt-original-word--learning {
        filter: blur(5px);
        cursor: pointer;
        transition: filter 0.2s ease-in-out;
      }

      .wxt-original-word--learning:hover {
        filter: blur(0) !important;
      }

      /* 增强a标签内学习模式的悬停支持 */
      a .wxt-original-word--learning:hover,
      a:hover .wxt-original-word--learning {
        filter: blur(0) !important;
      }

      /* 音标错误提示样式 */
      .wxt-phonetic-error {
        font-family: 'SF Mono', 'Monaco', 'Consolas', 'Roboto Mono', monospace;
        font-size: 13px;
        color: #ff9999;
        font-style: italic;
        font-weight: 500;
        background: linear-gradient(135deg, rgba(255, 153, 153, 0.1) 0%, rgba(255, 153, 153, 0.05) 100%);
        padding: 4px 8px;
        border-radius: 6px;
        display: inline-block;
        border: 1px solid rgba(255, 153, 153, 0.3);
        letter-spacing: 0.02em;
        opacity: 0.8;
      }

      /* 嵌套单词悬浮框标题行布局 */
      .wxt-word-title-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 8px;
      }

      .wxt-word-title-row .wxt-word-main {
        flex: 1;
      }

      .wxt-word-title-row .wxt-accent-buttons {
        flex-shrink: 0;
      }
      @keyframes wxt-processing-animation {
        0% {
          background-color: rgba(106, 136, 224, 0.1);
        }
        50% {
          background-color: rgba(106, 136, 224, 0.3);
        }
        100% {
          background-color: rgba(106, 136, 224, 0.1);
        }
      }
      .wxt-processing {
        animation: wxt-processing-animation 2s infinite ease-in-out;
        border-radius: 3px;
        transition: background-color 0.3s ease-out;
        pointer-events: none !important;
      }
      
      /* 确保链接元素在处理状态下仍然可以点击 */
      a.wxt-processing,
      a.wxt-processing *,
      .wxt-processing a,
      .wxt-processing a * {
        pointer-events: auto !important;
        cursor: pointer !important;
      }
      
      /* 确保按钮元素在处理状态下仍然可以点击 */
      button.wxt-processing,
      button.wxt-processing *,
      .wxt-processing button,
      .wxt-processing button * {
        pointer-events: auto !important;
        cursor: pointer !important;
      }
      
      /* 确保可点击元素在处理状态下仍然可以点击 */
      [onclick].wxt-processing,
      [onclick].wxt-processing *,
      .wxt-processing [onclick],
      .wxt-processing [onclick] * {
        pointer-events: auto !important;
        cursor: pointer !important;
      }
    `,document.head.appendChild(t),window.wxtGlowStyleInjected=!0}async processRoot(t,e,s,n=2e3,r,a){try{this.updateSegmentConfig({maxSegmentLength:n,minSegmentLength:80,enableSmartBoundary:!0,mergeSmallSegments:!0});const o=this.contentSegmenter.segmentContent(t);if(o.length===0)return;const l=await this.processingCoordinator.processSegments(o,e,s,r,a,!1);if(!l.success&&l.segmentCount===0)throw new Error(l.error||"文本处理失败，未生成可用翻译结果")}catch(o){throw o}}updateConfig(t){this.config={...this.config,...t},t.apiConfig&&this.updateApiConfig(t.apiConfig)}getConfig(){return{...this.config}}updateSegmentConfig(t){this.contentSegmenter.updateConfig(t)}updateApiConfig(t){try{this.pronunciationService&&this.pronunciationService.updateApiConfig(t),this.config.apiConfig=t}catch{}}getProcessingStats(){return{coordinator:this.processingCoordinator.getStats(),global:ct.getProcessingStats()}}resetStats(){this.processingCoordinator.resetStats(),ct.reset()}async initialize(){}dispose(){this.resetStats()}isReady(){return!!(this.pronunciationService&&this.contentSegmenter&&this.processingCoordinator)}getStatus(){return{isReady:this.isReady(),stats:this.getProcessingStats(),config:this.getConfig()}}getPronunciationService(){return this.pronunciationService}};u(ve,"instance",null);let Jn=ve;class cl{constructor(t){u(this,"config");this.config=t}async analyzeFullText(t,e){const s=t||"";if(!Ng(s,this.config.apiKey))throw new Error("API配置无效或输入文本为空");try{return await this.doAnalyzeFullText(s,e)}catch(n){throw console.error(`${this.getProviderName()} API请求失败:`,n),n instanceof Error?n:new Error(String(n))}}getConfig(){return this.config}}function cp(i,t,e,s){return i<s&&e<t}function ul(i,t){const e=[],s=[];for(const n of t){if(!n.original||!n.translation)continue;let r=0,a=null;for(;r<i.length;){const o=i.indexOf(n.original,r);if(o===-1)break;const l=o,c=o+n.original.length;if(!s.some(h=>cp(l,c,h.start,h.end))&&i.substring(l,c)===n.original){a={start:l,end:c};break}r=o+1}a&&(e.push({...n,position:a,isNew:!0}),s.push(a))}return e.sort((n,r)=>n.position.start-r.position.start),e}const Ze={en:{code:"en",name:"English",nativeName:"English",isPopular:!0},zh:{code:"zh",name:"Chinese",nativeName:"中文",isPopular:!0},ja:{code:"ja",name:"Japanese",nativeName:"日本語",isPopular:!0},ko:{code:"ko",name:"Korean",nativeName:"한국어",isPopular:!0},fr:{code:"fr",name:"French",nativeName:"Français",isPopular:!0},de:{code:"de",name:"German",nativeName:"Deutsch",isPopular:!0},es:{code:"es",name:"Spanish",nativeName:"Español",isPopular:!0},ru:{code:"ru",name:"Russian",nativeName:"Русский",isPopular:!0},pt:{code:"pt",name:"Portuguese",nativeName:"Português",isPopular:!0},it:{code:"it",name:"Italian",nativeName:"Italiano",isPopular:!0},hi:{code:"hi",name:"Hindi",nativeName:"हिन्दी",isPopular:!0},ar:{code:"ar",name:"Arabic",nativeName:"العربية",isPopular:!0},nl:{code:"nl",name:"Dutch",nativeName:"Nederlands"},no:{code:"no",name:"Norwegian",nativeName:"Norsk"},da:{code:"da",name:"Danish",nativeName:"Dansk"},fi:{code:"fi",name:"Finnish",nativeName:"Suomi"},sv:{code:"sv",name:"Swedish",nativeName:"Svenska"},pl:{code:"pl",name:"Polish",nativeName:"Polski"},el:{code:"el",name:"Greek",nativeName:"Ελληνικά"},he:{code:"he",name:"Hebrew",nativeName:"עברית"},cs:{code:"cs",name:"Czech",nativeName:"Čeština"},hu:{code:"hu",name:"Hungarian",nativeName:"Magyar"},ro:{code:"ro",name:"Romanian",nativeName:"Română"},uk:{code:"uk",name:"Ukrainian",nativeName:"Українська"},bg:{code:"bg",name:"Bulgarian",nativeName:"Български"},hr:{code:"hr",name:"Croatian",nativeName:"Hrvatski"},sk:{code:"sk",name:"Slovak",nativeName:"Slovenčina"},sl:{code:"sl",name:"Slovenian",nativeName:"Slovenščina"},et:{code:"et",name:"Estonian",nativeName:"Eesti"},lv:{code:"lv",name:"Latvian",nativeName:"Latviešu"},lt:{code:"lt",name:"Lithuanian",nativeName:"Lietuvių"},ca:{code:"ca",name:"Catalan",nativeName:"Català"},tr:{code:"tr",name:"Turkish",nativeName:"Türkçe"},th:{code:"th",name:"Thai",nativeName:"ไทย"},vi:{code:"vi",name:"Vietnamese",nativeName:"Tiếng Việt"},id:{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia"},ms:{code:"ms",name:"Malay",nativeName:"Bahasa Melayu"},tl:{code:"tl",name:"Filipino",nativeName:"Filipino"},ur:{code:"ur",name:"Urdu",nativeName:"اردو"},bn:{code:"bn",name:"Bengali",nativeName:"বাংলা"},ta:{code:"ta",name:"Tamil",nativeName:"தமிழ்"},te:{code:"te",name:"Telugu",nativeName:"తెలుగు"},fa:{code:"fa",name:"Persian",nativeName:"فارسی"},kk:{code:"kk",name:"Kazakh",nativeName:"Қазақша"},ky:{code:"ky",name:"Kyrgyz",nativeName:"Кыргызча"},uz:{code:"uz",name:"Uzbek",nativeName:"O'zbek"},sw:{code:"sw",name:"Swahili",nativeName:"Kiswahili"},am:{code:"am",name:"Amharic",nativeName:"አማርኛ"},zu:{code:"zu",name:"Zulu",nativeName:"IsiZulu"},af:{code:"af",name:"Afrikaans",nativeName:"Afrikaans"},is:{code:"is",name:"Icelandic",nativeName:"Íslenska"},mt:{code:"mt",name:"Maltese",nativeName:"Malti"}},up={"zh-cn":"zh","zh-tw":"zh","zh-hk":"zh","zh-sg":"zh",cmn:"zh",chs:"zh",cht:"zh","en-us":"en","en-gb":"en","en-au":"en","en-ca":"en","en-nz":"en","en-za":"en","en-ie":"en","pt-br":"pt","pt-pt":"pt","es-es":"es","es-mx":"es","es-ar":"es","es-co":"es","es-cl":"es","es-pe":"es","es-ve":"es","fr-fr":"fr","fr-ca":"fr","fr-be":"fr","fr-ch":"fr","de-de":"de","de-at":"de","de-ch":"de","ar-sa":"ar","ar-eg":"ar","ar-ae":"ar","ar-ma":"ar","ar-iq":"ar","ar-dz":"ar","ar-ly":"ar",nb:"no",nn:"no",fil:"tl",iw:"he",ji:"he",jw:"ms",in:"id",mo:"ro",sh:"hr"},Re=class Re{constructor(){u(this,"_targetLanguageOptionsCache",null);u(this,"_popularLanguagesCache",null);u(this,"_otherLanguagesCache",null)}static getInstance(){return Re.instance||(Re.instance=new Re),Re.instance}get languages(){return Ze}getLanguage(t){const e=this.normalizeLanguageCode(t);return Ze[e]||null}isSupportedLanguage(t){return this.normalizeLanguageCode(t)in Ze}normalizeLanguageCode(t){const e=t.toLowerCase();return up[e]||e}getPopularLanguages(){return this._popularLanguagesCache||(this._popularLanguagesCache=Object.values(Ze).filter(t=>t.isPopular).sort((t,e)=>t.code==="en"?-1:e.code==="en"?1:t.code==="zh"?-1:e.code==="zh"?1:t.name.localeCompare(e.name))),this._popularLanguagesCache}getOtherLanguages(){return this._otherLanguagesCache||(this._otherLanguagesCache=Object.values(Ze).filter(t=>!t.isPopular).sort((t,e)=>t.name.localeCompare(e.name))),this._otherLanguagesCache}getTargetLanguageOptions(){if(!this._targetLanguageOptionsCache){const t=[...this.getPopularLanguages(),...this.getOtherLanguages()];this._targetLanguageOptionsCache=t.map(e=>({code:e.code,name:e.name,nativeName:e.nativeName,isPopular:e.isPopular}))}return this._targetLanguageOptionsCache}getTargetLanguageDisplayName(t){const e=this.getLanguage(t);return e?`${e.nativeName} (${e.name})`:t.toUpperCase()}clearCache(){this._targetLanguageOptionsCache=null,this._popularLanguagesCache=null,this._otherLanguagesCache=null}getSupportedLanguageCodes(){return Object.keys(Ze)}getPopularLanguageCodes(){return this.getPopularLanguages().map(t=>t.code)}getNativeLanguageOptions(){return this.getTargetLanguageOptions()}};u(Re,"instance");let Xn=Re;const me=Xn.getInstance(),Me=class Me{constructor(){}static getInstance(){return Me.instance||(Me.instance=new Me),Me.instance}getUnifiedPrompt(t){const{targetLanguage:e,userLevel:s,replacementRate:n}=t;return[this.generateBaseInstruction(),this.generateTaskAndRules(e),this.generateUserConfig(s,n),this.generateFormatRequirements(),this.generateExamples(e)].filter(a=>a.trim()!=="").join(`

`)}generateBaseInstruction(){return"You are an AI translator for language learners. Strictly follow instructions: select suitable words/phrases from input text based on user level and ratio, then output ONLY their translations in the specified format. No extra text allowed."}generateTaskAndRules(t){const e=me.getTargetLanguageDisplayName(t);return`Task: User is learning ${e}. Given any input text, intelligently select high-value words/phrases (e.g., key nouns, verbs, idioms) for learning, and provide their direct ${e} translations.
    
## Strict Rules
1. Select based on context: Prioritize words that aid learning, avoid fillers (e.g., 'a', 'the', 'is').
2. Preserve original code, proper nouns, HTML tags unchanged.
3. Skip any text already in ${e}.
4. Output ONLY the selected original||translation pairs. Rigorous ban on any additions, explanations, or prefixes (e.g., no 'Here is the translation:').
5. Output that does not meet the requirements, directly return the empty string.
6. Consider the context of the text when translating.
7. original text must be complete words or phrases as they appear in the original text (e.g., "r||translate" from "raised" - WRONG)
`}generateUserConfig(t,e){const s={[Gt.A1]:"A1 (Beginner): Select very basic words only.",[Gt.A2]:"A2 (Elementary): Select simple everyday words.",[Gt.B1]:"B1 (Intermediate): Select common phrases and verbs.",[Gt.B2]:"B2 (Upper-Intermediate): Select nuanced vocabulary.",[Gt.C1]:"C1 (Advanced): Select advanced idioms and terms.",[Gt.C2]:"C2 (Proficient): Select rare or specialized words."};let n="";if(e>0&&e<=1){const r=Math.round(e*100),a=Math.max(0,r-3),o=Math.min(100,r+3);n=`Select ~${r}% of text (${a}%-${o}% range) for translation. Focus on quality over quota; choose natural whole words/phrases.`}return`User Level: ${s[t]||s[Gt.B1]}
${n}`.trim()}generateFormatRequirements(){return'MANDATORY FORMAT: Output ONLY lines of "original||translation". One per line. No JSON, quotes, extras, or other formats. Violating this will fail the task.'}generateExamples(t){return`Examples (Target: ${me.getTargetLanguageDisplayName(t)}):
        Input: "The quick brown fox jumps over the lazy dog."
        Output:
        quick||translation_text
        brown||translation_text
        fox||translation_text
        jumps||translation_text
        lazy||translation_text
        dog||translation_text`}};u(Me,"instance");let Qn=Me;const dp=Qn.getInstance(),dl=i=>dp.getUnifiedPrompt(i);class hp{constructor(t){u(this,"requestTimes",[]);u(this,"config");u(this,"executionQueue",Promise.resolve());this.config={windowMs:1e3,bufferMs:10,...t}}async checkAndWait(){const t=this.executionQueue.then(async()=>{if(!this.config.enabled||this.config.requestsPerSecond<=0)return;const e=Date.now(),s=this.config.windowMs;for(;this.requestTimes.length>0&&e-this.requestTimes[0]>=s;)this.requestTimes.shift();if(this.requestTimes.length>=this.config.requestsPerSecond){const n=this.requestTimes[0],r=s-(e-n)+this.config.bufferMs;r>0&&await new Promise(o=>setTimeout(o,r));const a=Date.now();for(;this.requestTimes.length>0&&a-this.requestTimes[0]>=s;)this.requestTimes.shift()}this.requestTimes.push(Date.now())});return this.executionQueue=t,t}updateConfig(t){this.config={...this.config,...t}}async executeBatch(t){if(!this.config.enabled||t.length===0)return Promise.all(t.map(s=>s()));const e=[];for(const s of t){await this.checkAndWait();const n=await s();e.push(n)}return e}getStatus(){const t=Date.now(),e=this.config.windowMs,s=this.requestTimes.filter(n=>t-n<e);return{enabled:this.config.enabled,requestsPerSecond:this.config.requestsPerSecond,currentRequests:s.length,remainingRequests:Math.max(0,this.config.requestsPerSecond-s.length)}}}const De=class De{constructor(){u(this,"limiters",new Map)}static getInstance(){return De.instance||(De.instance=new De),De.instance}getLimiter(t,e=0,s=!0){if(this.limiters.has(t))this.limiters.get(t).updateConfig({requestsPerSecond:Math.max(0,e),enabled:s&&e>0});else{const n={requestsPerSecond:Math.max(0,e),enabled:s&&e>0};this.limiters.set(t,new hp(n))}return this.limiters.get(t)}clear(){this.limiters.clear()}};u(De,"instance");let Zn=De;const hl=Zn.getInstance(),gl={getLimiter:(i,t=0,e=!0)=>hl.getLimiter(i,t,e),clear:()=>{hl.clear()}};class pl{static parse(t){const e={success:!1,replacements:[],errors:[]};try{const s=this.cleanText(t),n=this.parseDoubleBarFormat(s);e.replacements=n.filter(r=>r.original&&r.translation),e.success=e.replacements.length>0,e.replacements.length===0&&e.errors.push("没有找到有效的替换项")}catch(s){e.errors.push(`解析错误: ${s instanceof Error?s.message:String(s)}`),console.error("[双竖线解析] 解析失败:",s)}return e}static cleanText(t){return t.replace(/```[\s\S]*?```/g,"").replace(/^\s*[\r\n]/gm,"").trim()}static parseDoubleBarFormat(t){const e=[],s=t.split(`
`).map(n=>n.trim()).filter(n=>n);for(const n of s){if(n.includes("||")){const a=n.split("||");if(a.length>=2){const o=a[0].trim(),l=a[1].trim();if(o&&l){e.push({original:o,translation:l});continue}}}const r=this.parseFallbackSeparators(n);r&&e.push(r)}return e}static parseFallbackSeparators(t){const e=["→","->",":","=","|"];for(const s of e)if(t.includes(s)){const n=t.split(s);if(n.length>=2){const r=n[0].trim(),a=n[1].trim();if(r&&a)return{original:r,translation:a}}}return null}static validateResult(t,e=1){if(!t.success||t.replacements.length<e)return!1;for(const s of t.replacements)if(!s.original||!s.translation||s.original.length<1||s.translation.length<1)return!1;return!0}}class gp extends cl{getProviderName(){return"Google Gemini"}async doAnalyzeFullText(t,e){const s=new Go(this.config.apiKey),n={temperature:this.config.temperature};let r=Le(n,this.config.customParams);r=zh(r);const a={},o=zn(e.apiRequestTimeout);o&&(a.timeout=o),this.config.apiEndpoint&&(a.baseUrl=this.config.apiEndpoint);const l=s.getGenerativeModel({model:this.config.model,generationConfig:r},a),d=`${dl({targetLanguage:e.multilingualConfig.targetLanguage,userLevel:e.userLevel,replacementRate:e.replacementRate,provider:"gemini"})}

Translate to ${me.getTargetLanguageDisplayName(e.multilingualConfig.targetLanguage)} (original||translation): ${t}`,h=gl.getLimiter(this.config.apiEndpoint||"google-gemini-native",this.config.requestsPerSecond||0,!0),g=()=>l.generateContent(d),[m]=await h.executeBatch([g]),C=m.response.text(),L=pl.parse(C);if(!L.success)throw console.error("[Gemini] 解析失败:",L.errors),new Error(`结构化文本解析失败: ${L.errors.join(", ")}`);const b=L.replacements.filter(P=>{if(!P.original||P.original.length<2)return!1;const S=P.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${S}\\b`,"i").test(t)}),v=ul(t,b);return{original:t,processed:"",replacements:v}}}class pp extends cl{getProviderName(){return"OpenAI"}async doAnalyzeFullText(t,e){const s=dl({targetLanguage:e.multilingualConfig.targetLanguage,userLevel:e.userLevel,replacementRate:e.replacementRate});let n={model:this.config.model,messages:[{role:"system",content:s},{role:"user",content:`Translate to ${me.getTargetLanguageDisplayName(e.multilingualConfig.targetLanguage)} (original||translation): ${t}`}],temperature:this.config.temperature,x_user_level:e.userLevel};this.config.includeThinkingParam&&(n.enable_thinking=this.config.enable_thinking),n=Le(n,this.config.customParams);const r=gl.getLimiter(this.config.apiEndpoint,this.config.requestsPerSecond||0,!0),a=async()=>{const d=zn(e.apiRequestTimeout||0);return Qo(n,this.config,d)},o=3,l=1e3;let c=null;for(let d=0;d<o;d++)try{const[h]=await r.executeBatch([a]);if(h.ok){const m=await h.json();return this.extractReplacements(m,t)}if(!(h.status===429||h.status>=500))throw new Error(`API 请求失败: ${h.status} ${h.statusText}`);if(c=new Error(`API 请求失败: ${h.status} ${h.statusText}`),d<o-1){const m=l*Math.pow(2,d);await new Promise(y=>setTimeout(y,m))}}catch(h){if(c=h,d<o-1){const g=l*Math.pow(2,d);await new Promise(m=>setTimeout(m,g))}}throw console.error(`[OpenAI] 所有 ${o} 次重试均失败`),c||new Error("API 请求失败")}extractReplacements(t,e){var s,n,r;try{if(!((r=(n=(s=t==null?void 0:t.choices)==null?void 0:s[0])==null?void 0:n.message)!=null&&r.content))throw new Error("API响应格式错误");const a=t.choices[0].message.content,o=pl.parse(a);if(!o.success)throw console.error("[OpenAI提取] 解析失败:",o.errors),new Error(`结构化文本解析失败: ${o.errors.join(", ")}`);const l=o.replacements.filter(d=>{if(!d.original||d.original.length<2)return!1;const h=d.original.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),m=new RegExp(`\\b${h}\\b`,"i").test(e);return m}),c=ul(e,l);return{original:e,processed:"",replacements:c}}catch(a){throw console.error("提取替换信息失败:",a),a}}}class fp{static createProvider(t){const{provider:e,config:s}=t;switch(e){case It.GoogleGemini:case It.ProxyGemini:return new gp(s);case It.OpenAI:case It.DeepSeek:case It.SiliconFlow:default:return new pp(s)}}static getSupportedProviders(){return[It.OpenAI,It.GoogleGemini,It.ProxyGemini,It.DeepSeek,It.SiliconFlow]}static isProviderSupported(t){return this.getSupportedProviders().includes(t)}}const vt=class vt{constructor(t,e){u(this,"styleManager");u(this,"config");u(this,"cache");u(this,"languageRoutingService");this.config=t,this.styleManager=new Hn,this.cache=new Map,this.languageRoutingService=e,this.initializeStyleManager()}static getInstance(t,e=jo){if(!vt.instance){if(!t)throw new Error("首次创建TextReplacerService实例时必须提供配置");vt.instance=new vt(t,e)}return vt.instance}static resetInstance(){vt.instance=null}initializeStyleManager(){const t=this.config.translationStyle||Te.DEFAULT;this.styleManager.setTranslationStyle(t)}updateConfig(t){this.config={...this.config,...t},t.translationStyle&&this.styleManager.setTranslationStyle(t.translationStyle)}getConfig(){return{...this.config}}async replaceText(t){try{const s=await ft.getInstance().getUserSettings();if(!this.config.useGptApi)return this.createEmptyResult(t);const n=this.buildUserSettings(s);return await this.processTranslation(t,n)}catch(e){throw console.error("文本替换失败:",e),e}}createEmptyResult(t){return{original:t,processed:t,replacements:[]}}buildUserSettings(t){const e=this.resolveWordTranslationTargetLanguage(t);return{...t,userLevel:this.config.userLevel,replacementRate:this.config.replacementRate,useGptApi:this.config.useGptApi,translationStyle:this.config.translationStyle,multilingualConfig:{...t.multilingualConfig,targetLanguage:e}}}resolveWordTranslationTargetLanguage(t){var s;const e=(s=t.multilingualConfig.nativeLanguage)==null?void 0:s.trim().toLowerCase();return e||this.languageRoutingService.determineOptimalTargetLanguage(t)}async processTranslation(t,e){const s=this.generateCacheKey(t,e),n=this.getCachedResult(s);if(n)return n;try{const r=await this.callTranslationAPI(t,e);return this.setCachedResult(s,r),r}catch(r){throw console.error("翻译失败:",r),this.normalizeTranslationError(r)}}async callTranslationAPI(t,e){const s=e.apiConfigs.find(r=>r.id===e.activeApiConfigId);if(!s)throw new Error("没有找到活跃的API配置");return await fp.createProvider(s).analyzeFullText(t,e)}normalizeTranslationError(t){return t instanceof Error?t:new Error(String(t))}generateCacheKey(t,e){const s=e.multilingualConfig.targetLanguage,n={text:t.trim(),targetLanguage:s,userLevel:e.userLevel,replacementRate:e.replacementRate};return this.hashCacheKey(n)}hashCacheKey(t){const e=JSON.stringify(t);let s=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);s=(s<<5)-s+r,s=s&s}return Math.abs(s).toString(36)}getCachedResult(t){return this.cache.get(t)||null}setCachedResult(t,e){this.cache.set(t,e),this.cleanupCache()}cleanupCache(){if(this.cache.size>vt.CACHE_MAX_SIZE){const t=Array.from(this.cache.keys()),e=this.cache.size-vt.CACHE_MAX_SIZE+vt.CACHE_CLEANUP_BATCH;for(let s=0;s<e;s++)this.cache.delete(t[s])}}getCacheStats(){return{cacheSize:this.cache.size}}clearAllCache(){this.cache.clear()}async initialize(){}dispose(){this.clearAllCache()}};u(vt,"instance",null),u(vt,"CACHE_MAX_SIZE",100),u(vt,"CACHE_CLEANUP_BATCH",20);let tr=vt;const mp=`You are a professional translator. Translate the following text to {{targetLang}}. 

Requirements:
- Output ONLY the translation, no explanations
- Maintain the original meaning and tone
- If the text is already in the target language or doesn't need translation, return the original text
- Keep proper nouns, technical terms, and formatting as appropriate

Text to translate:
{{input}}`,Oe=class Oe{constructor(t){u(this,"storageService");u(this,"languageRoutingService");this.storageService=ft.getInstance(),this.languageRoutingService=t}static getInstance(t=jo){return Oe.instance||(Oe.instance=new Oe(t)),Oe.instance}async translateParagraph(t,e){if(!t||!t.trim())return"";const s=t.replace(/\u200B/g,"").trim();try{const n=await this.storageService.getUserSettings(),r=e||this.languageRoutingService.determineOptimalTargetLanguage(n),a=this.buildParagraphTranslationPrompt(s,r),o=await Mg(a);if(!o.success)throw new Error(o.error||"翻译API调用失败");return this.processTranslationResult(o.content,s)}catch(n){throw console.error("段落翻译API调用失败:",n),n}}buildParagraphTranslationPrompt(t,e){const n={zh:"Chinese","zh-cn":"Chinese",chinese:"Chinese",en:"English","en-us":"English",english:"English",ja:"Japanese",japanese:"Japanese",ko:"Korean",korean:"Korean",fr:"French",french:"French",de:"German",german:"German",es:"Spanish",spanish:"Spanish",ru:"Russian",russian:"Russian"}[e.toLowerCase()]||e;return mp.replace("{{targetLang}}",n).replace("{{input}}",t)}processTranslationResult(t,e){if(!t||!t.trim())return"";let s=t.trim();const n=s.match(/<\/think>([\s\S]*)/);return n&&(s=n[1].trim()),s===e&&e.length<50||s.length<3?"":s}async translateMultipleParagraphs(t,e,s=3){if(t.length===0)return[];const n=new Array(t.length).fill("");for(let r=0;r<t.length;r+=s){const o=t.slice(r,r+s).map(async(l,c)=>{const d=r+c;try{const h=await this.translateParagraph(l,e);n[d]=h}catch{n[d]=""}});await Promise.all(o),r+s<t.length&&await new Promise(l=>setTimeout(l,500))}return n}};u(Oe,"instance",null);let er=Oe;const ye=class ye{constructor(t){u(this,"storageService");u(this,"styleManager");u(this,"paragraphApi");u(this,"lazyLoadingService");u(this,"isActive",!1);u(this,"translatedElements",new WeakSet);u(this,"translatingElements",new WeakSet);u(this,"lastTranslationError",null);u(this,"BATCH_SIZE",5);u(this,"BATCH_DELAY",200);u(this,"LOADING_CLASS","illa-paragraph-loading");u(this,"LOADING_ICON",`
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="8" cy="8" r="7" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-dasharray="11 11" stroke-dashoffset="0">
        <animateTransform attributeName="transform" type="rotate" values="0 8 8;360 8 8" dur="1s" repeatCount="indefinite"/>
      </circle>
    </svg>
  `);this.storageService=ft.getInstance(),this.styleManager=new Hn,this.paragraphApi=er.getInstance(),this.lazyLoadingService=t,this.storageService.getUserSettings().then(e=>{e&&e.translationStyle&&this.styleManager.setTranslationStyle(e.translationStyle)})}static getInstance(t){return ye.instance?t&&(ye.instance.lazyLoadingService=t):ye.instance=new ye(t),ye.instance}async start(){var s,n;if(this.isActive)return 0;this.isActive=!0,this.lastTranslationError=null;const t=await this.storageService.getUserSettings();return((s=t==null?void 0:t.lazyLoading)==null?void 0:s.enabled)&&((n=this.lazyLoadingService)==null?void 0:n.isEnabled())?this.startLazyLoading():this.startFullTranslation()}async translatePage(t=!0){return this.start()}stop(){this.isActive=!1,this.translatedElements=new WeakSet,this.translatingElements=new WeakSet,this.clearAllLoadingIndicators(),this.lazyLoadingService&&this.lazyLoadingService.clearSession()}clearAllTranslations(){document.querySelectorAll(`.${pe.WRAPPER_CLASS}`).forEach(t=>t.remove()),this.translatedElements=new WeakSet,this.translatingElements=new WeakSet,this.clearAllLoadingIndicators(),this.lazyLoadingService&&this.lazyLoadingService.clearSession()}findParagraphElements(){const t=[],e=new Set,s=[{selectors:["main p","article p",'[role="main"] p',".content p",".article p"],priority:1},{selectors:["main h1","main h2","main h3","main h4","main h5","main h6","article h1","article h2","article h3","article h4","article h5","article h6"],priority:1},{selectors:["blockquote","figcaption",".caption","[data-caption]"],priority:2},{selectors:["li:not(:has(ul)):not(:has(ol))","dd","dt"],priority:3},{selectors:["p","h1","h2","h3","h4","h5","h6"],priority:4},{selectors:["div:not(:has(p)):not(:has(h1)):not(:has(h2)):not(:has(h3)):not(:has(h4)):not(:has(h5)):not(:has(h6))","span:not(:has(p)):not(:has(div))"],priority:5}];for(const n of s)for(const r of n.selectors)try{const a=document.querySelectorAll(r);for(const o of a)!e.has(o)&&!this.hasProcessedAncestor(o,e)&&this.shouldTranslateElement(o)&&(t.push(o),e.add(o))}catch{}return t.sort((n,r)=>n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1),t}hasProcessedAncestor(t,e){let s=t.parentElement;for(;s;){if(e.has(s))return!0;s=s.parentElement}return!1}shouldTranslateElement(t){var l,c,d,h,g,m;if(this.translatedElements.has(t)||this.translatingElements.has(t)||t.classList.contains(pe.WRAPPER_CLASS)||t.closest("script, style, noscript, code, pre, nav, menu, .nav, .menu, .navigation, .sidebar, .footer, .header")||t.matches("wxt-floating-menu, wxt-floating-menu *, [data-wxt-floating-menu], [data-wxt-floating-menu] *")||t.closest("wxt-floating-menu, [data-wxt-floating-menu]")||(l=t.id)!=null&&l.includes("wxt")||(c=t.className)!=null&&c.includes("wxt"))return!1;let e=t.parentElement;for(;e;){if(((d=e.tagName)==null?void 0:d.toLowerCase())==="wxt-floating-menu"||e.hasAttribute("data-wxt-floating-menu")||(h=e.id)!=null&&h.includes("wxt")||(g=e.className)!=null&&g.includes("wxt"))return!1;e=e.parentElement}if(t.isContentEditable||t.tagName.toLowerCase()==="input"||t.tagName.toLowerCase()==="textarea")return!1;const s=window.getComputedStyle(t);if(s.display==="none"||s.visibility==="hidden"||s.opacity==="0")return!1;const n=t.getBoundingClientRect();if(n.width<20||n.height<10)return!1;const r=(m=t.textContent)==null?void 0:m.trim();return!r||r.length<3||r.length>3e3||/^[\d\s\.\,\!\?\-\+\=\(\)\[\]\{\}]*$/.test(r)||(r.match(/\d/g)||[]).length>r.length*.5||new Set(r.toLowerCase().replace(/\s/g,"")).size<3||t.tagName.toLowerCase()==="a"&&r.length<20?!1:t.tagName.toLowerCase()==="button"||t.getAttribute("role")==="button"?r.length>10:!(t.classList.contains("date")||t.classList.contains("time")||t.classList.contains("author")||t.classList.contains("tag")||t.classList.contains("category"))}async translateElements(t){if(t.length===0)return 0;const e=this.BATCH_SIZE;let s=0;for(let n=0;n<t.length;n+=e){const a=t.slice(n,n+e).map(async c=>{try{return await this.translateElement(c)?1:0}catch(d){return console.error("[段落翻译] 翻译元素失败:",d),0}}),l=(await Promise.all(a)).reduce((c,d)=>c+d,0);s+=l,n+e<t.length&&await new Promise(c=>setTimeout(c,this.BATCH_DELAY))}return s}async translateElement(t){var s;if(this.translatedElements.has(t))return!1;const e=(s=t.textContent)==null?void 0:s.trim();if(!e||e.length<5)return!1;this.translatingElements.add(t),this.showLoadingIndicator(t);try{const n=await this.paragraphApi.translateParagraph(e);return n&&n.trim()?(this.removeLoadingIndicator(t),this.translatingElements.delete(t),this.showTranslation(t,n),this.translatedElements.add(t),!0):(this.removeLoadingIndicator(t),this.translatingElements.delete(t),!1)}catch(n){return this.removeLoadingIndicator(t),this.translatingElements.delete(t),this.lastTranslationError=n instanceof Error?n:new Error(String(n)),console.error("[段落翻译] 翻译失败:",n,"元素:",t.tagName),!1}}showTranslation(t,e){var a,o,l;t.querySelectorAll(`.${pe.WRAPPER_CLASS}`).forEach(c=>c.remove());const s=t.tagName.toLowerCase(),n=this.styleManager.getCurrentStyleClass();let r;if(["table","td","th","li"].includes(s)){const c=document.createElement("span");c.classList.add(pe.WRAPPER_CLASS,n),c.style.cssText="margin-left: 8px; display: inline-block;",c.textContent=e,t.appendChild(c)}else if(["h1","h2","h3","h4","h5","h6"].includes(s)){r=document.createElement(s),r.classList.add(pe.WRAPPER_CLASS,n),r.textContent=e;const c=window.getComputedStyle(t);r.style.cssText=`
        margin-top: ${c.marginTop};
        margin-bottom: ${c.marginBottom};
        font-size: ${c.fontSize};
        font-weight: ${c.fontWeight};
        line-height: ${c.lineHeight};
      `,(a=t.parentNode)==null||a.insertBefore(r,t.nextSibling)}else if(["p","div","blockquote","section","article"].includes(s)){r=document.createElement(s),r.classList.add(pe.WRAPPER_CLASS,n),r.textContent=e;const c=window.getComputedStyle(t);r.style.cssText=`
        margin-top: ${c.marginTop};
        margin-bottom: ${c.marginBottom};
        padding: ${c.padding};
      `,(o=t.parentNode)==null||o.insertBefore(r,t.nextSibling)}else{const c=document.createElement("div");c.classList.add(pe.WRAPPER_CLASS,n),c.textContent=e,c.style.cssText="margin-top: 0.5em; margin-bottom: 0.5em;",(l=t.parentNode)==null||l.insertBefore(c,t.nextSibling)}}showLoadingIndicator(t){var s;if(this.removeLoadingIndicator(t),!document.getElementById("illa-paragraph-loading-style")){const n=document.createElement("style");n.id="illa-paragraph-loading-style",n.textContent=`
        .illa-paragraph-loading svg {
          animation: illa-spin 1s linear infinite;
        }
        @keyframes illa-spin {
          100% { transform: rotate(360deg); }
        }
        /* 确保加载指示器不阻断任何元素的点击事件 */
        .illa-paragraph-loading {
          pointer-events: none !important;
          user-select: none;
        }
        /* 特殊处理链接元素的加载指示器 */
        a + .illa-paragraph-loading {
          position: relative;
          z-index: 1;
          margin-left: 2px;
        }
      `,document.head.appendChild(n)}const e=document.createElement("span");e.classList.add(this.LOADING_CLASS),e.innerHTML=this.LOADING_ICON,e.style.cssText=`
      display: inline-block;
      margin-left: 8px;
      vertical-align: middle;
      opacity: 0.8;
    `,t.tagName.toLowerCase()==="a"&&(e.style.marginLeft="4px"),(s=t.parentNode)==null||s.insertBefore(e,t.nextSibling)}removeLoadingIndicator(t){const e=t.nextSibling;if(e&&e.nodeType===Node.ELEMENT_NODE){const s=e;s.classList.contains(this.LOADING_CLASS)&&s.remove()}}clearAllLoadingIndicators(){document.querySelectorAll(`.${this.LOADING_CLASS}`).forEach(t=>t.remove())}async startFullTranslation(){const t=this.findParagraphElements(),e=await this.translateElements(t);if(e===0&&t.length>0&&this.lastTranslationError)throw this.lastTranslationError;return e}async startLazyLoading(){if(!this.lazyLoadingService)return this.startFullTranslation();const t=this.findParagraphElements(),e=this.convertToContentSegments(t);return this.lazyLoadingService.setProcessingCallback(async s=>{const n=s.map(r=>r.element);await this.translateElements(n)}),this.lazyLoadingService.beginSession(),this.lazyLoadingService.observeSegments(e),e.length}convertToContentSegments(t){return t.map((e,s)=>{var d;const n=((d=e.textContent)==null?void 0:d.trim())||"",r=ct.generateDomPath(e),a=ct.generateContentFingerprint(n,r),o=[],l=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:h=>{var m;return((m=h.textContent)==null?void 0:m.trim())?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let c;for(;c=l.nextNode();)o.push(c);return{id:`${e.tagName.toLowerCase()}-${a}-${s}`,textContent:n,element:e,elements:[e],textNodes:o,fingerprint:a,domPath:r}})}getStats(){const t=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, div, blockquote, section, article, li, td, th").length,e=document.querySelectorAll(`.${pe.WRAPPER_CLASS}`).length;return{total:t,translated:e}}};u(ye,"instance",null);let Ri=ye;const Ft={size:34,iconSize:20,zIndex:1e4,right:"0px",background:"#6A88E0",hoverBackground:"#7B96E5",activeBackground:"#AA466E",boxShadow:"0 4px 12px rgba(106, 136, 224, 0.25)",hoverBoxShadow:"0 6px 16px rgba(106, 136, 224, 0.35)",activeBoxShadow:"0 6px 16px rgba(76, 175, 80, 0.3)",transition:"all 0.2s ease",hoverScale:1.05},Xt={itemSize:30,itemSpacing:8,background:"rgba(106, 136, 224, 0.15)",hoverBackground:"rgba(106, 136, 224, 0.25)",border:"1px solid rgba(106, 136, 224, 0.2)",boxShadow:"0 8px 24px rgba(106, 136, 224, 0.2), 0 4px 8px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(12px) saturate(1.5)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:9999},be={threshold:5,minPosition:5,maxPosition:95},fl=[{id:"settings",icon:"📌",label:"设置",color:"#6A88E0"},{id:"options",icon:"⚙️",label:"选项",color:"#6A88E0"},{id:"close",icon:"✕",label:"关闭",color:"#EF4444"}],Se=Ot("FloatingBall");class bp{constructor(t){u(this,"config");u(this,"state");u(this,"ballElement",null);u(this,"menuContainer",null);u(this,"dragStartY",0);u(this,"ballStartY",0);u(this,"onTranslateCallback");u(this,"savePositionTimer",null);u(this,"storageService");u(this,"eventListeners",[]);u(this,"lastClickTime",0);u(this,"clickDebounceTimer",null);u(this,"isTouchDevice",!1);u(this,"menuHoverTimer",null);u(this,"menuItemsEventsBound",!1);this.config=t,this.state={isDragging:!1,isVisible:!1,isMenuExpanded:!1,currentPosition:t.position},this.storageService=ft.getInstance(),this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0}bindEventListener(t,e,s,n){const r=s;t.addEventListener(e,r,n),this.eventListeners.push({target:t,type:e,listener:r,options:n})}removeAllEventListeners(){this.eventListeners.forEach(({target:t,type:e,listener:s,options:n})=>{t.removeEventListener(e,s,n)}),this.eventListeners=[]}init(t){if(this.onTranslateCallback=t,Se.log("FloatingBall init",{enabled:this.config.enabled,position:this.config.position,opacity:this.config.opacity}),this.config.enabled){this.createBall(),this.setupEventListeners(),this.state.isVisible=!0,Se.log("FloatingBall initialized and visible");return}Se.warn("FloatingBall skipped because it is disabled by config")}updateConfig(t){const e=this.config.enabled;this.config=t,this.state.currentPosition=t.position,Se.log("FloatingBall config updated",{wasEnabled:e,enabled:t.enabled,position:t.position,opacity:t.opacity}),t.enabled&&!e?(this.createBall(),this.setupEventListeners(),this.state.isVisible=!0):!t.enabled&&e?(this.destroy(),this.state.isVisible=!1):t.enabled&&this.ballElement&&(this.updateBallStyle(),this.calibratePosition())}createBall(){if(this.ballElement&&this.ballElement.remove(),this.ballElement=document.createElement("div"),this.ballElement.className="wxt-floating-ball",Ni(this.ballElement,this.createBallIcon()),this.updateTooltipText(),this.updateBallStyle(),this.createMenu(),!document.body){Se.error("Failed to create floating ball because document.body is missing");return}document.body.appendChild(this.ballElement),Se.log("FloatingBall DOM attached")}createMenu(){this.menuContainer&&this.menuContainer.remove(),this.menuContainer=document.createElement("div"),this.menuContainer.className="wxt-floating-menu",Ni(this.menuContainer,this.createMenuItems()),this.updateMenuStyle(),document.body.appendChild(this.menuContainer)}createMenuItems(){return fl.map((t,e)=>`
      <div class="wxt-menu-item" data-action="${t.id}" title="${t.label}" >
        <span class="wxt-menu-icon" style="color: white; text-shadow: 0 1px 2px rgba(0,0,0,0.2); font-weight: bold;">${t.icon}</span>
      </div>
    `).join("")}createBallIcon(){const{iconSize:t}=Ft,e=document.querySelector(".wxt-translation-term")!==null,s=document.body.classList.contains("wxt-translation-hidden");let n;return e?s?n={colors:{start:"#f093fb",end:"#f5576c",dot:"#ff6b6b"},opacity:"0.8"}:n={colors:{start:"#667eea",end:"#764ba2",dot:"#00ff88"},opacity:"1"}:n={colors:{start:"#667eea",end:"#764ba2",dot:"#4f7cff"},opacity:"0.9"},`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="${t}" height="${t}">
        <defs>
          <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${n.colors.start};stop-opacity:1" />
            <stop offset="100%" style="stop-color:${n.colors.end};stop-opacity:1" />
          </linearGradient>
        </defs>
        <rect width="${t}" height="${t}" fill="url(#bgGradient)" rx="4" ry="4" opacity="${n.opacity}"/>
        <path d="M16 10h2l4.4 11h-2.155l-1.201-3h-4.09l-1.199 3h-2.154L16 10zm1 2.885L15.753 16h2.492L17 12.885zM3 4h10v2H9v7h4v2H9v4H7v-4H3v-2h4V6H3V4zM17 3a4 4 0 0 1 4 4v2h-2V7a2 2 0 0 0-2-2h-3V3h3zM5 15v2a2 2 0 0 0 2 2h3v2H7a4 4 0 0 1-4-4v-2h2z" fill="white" opacity="0.9"/>
        <circle cx="18" cy="6" r="2" fill="${n.colors.dot}" opacity="0.9"/>
      </svg>
    `}injectPulseAnimation(){const t="wxt-floating-ball-animation";if(document.getElementById(t))return;const e=document.createElement("style");e.id=t,e.textContent=`
      @keyframes wxt-floating-ball-pulse {
        0%, 100% {
          transform: translateY(-50%) scale(0.9);
        }
        50% {
          transform: translateY(-50%) scale(1);
        }
      }
    `,document.head.appendChild(e)}calibratePosition(){if(!this.ballElement)return;const t=this.validateAndCorrectPosition(this.config.position);t!==this.config.position&&(this.config.position=t,this.state.currentPosition=t),requestAnimationFrame(()=>{this.ballElement&&(this.ballElement.style.top=`${this.config.position}%`)})}validateAndCorrectPosition(t){if(!this.isValidPosition(t))return 50;const e=window.innerHeight,s=Ft.size,n=s/2/e*100,r=(e-s/2)/e*100;return Math.max(Math.max(be.minPosition,n),Math.min(Math.min(be.maxPosition,r),t))}updateBallStyle(){if(!this.ballElement)return;const{size:t,right:e,background:s,boxShadow:n,transition:r,zIndex:a}=Ft;this.injectPulseAnimation();const o=`
      position: fixed;
      right: ${e};
      top: ${this.config.position}%;
      width: ${t}px;
      height: ${t}px;
      background: ${s};
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: ${n};
      opacity: ${this.config.opacity};
      z-index: ${a};
      transition: ${r};
      user-select: none;
      transform: translateY(-50%);
      animation: wxt-floating-ball-pulse 4s ease-in-out infinite;
    `;this.ballElement.style.cssText=o,this.calibratePosition()}updateMenuStyle(){var l;if(!this.menuContainer||!((l=this.ballElement)==null?void 0:l.getBoundingClientRect()))return;const{itemSize:e,itemSpacing:s,zIndex:n,transition:r}=Xt,a=fl.length*(e+s),o=`
      position: fixed;
      right: ${Ft.size/2-e/2+10}px;
      top: ${this.config.position}%;
      width: ${e}px;
      height: ${a}px;
      transform: translateY(${Ft.size/2+15}px);
      z-index: ${n};
      pointer-events: ${this.state.isMenuExpanded?"auto":"none"};
      opacity: ${this.state.isMenuExpanded?1:0};
      transition: ${r};
    `;this.menuContainer.style.cssText=o,this.updateMenuItemPositions()}updateMenuItemPositions(){if(!this.menuContainer)return;const t=this.menuContainer.querySelectorAll(".wxt-menu-item"),{itemSize:e,itemSpacing:s,background:n,boxShadow:r,transition:a}=Xt;t.forEach((o,l)=>{const c=o,d=0,h=l*(e+s),g=this.state.isMenuExpanded?1:0,m=this.state.isMenuExpanded?l*50:(t.length-l-1)*50;c.style.cssText=`
        position: absolute;
        left: ${d}px;
        top: ${h}px;
        width: ${e}px;
        height: ${e}px;
        background: ${n};
        backdrop-filter: ${Xt.backdropFilter};
        -webkit-backdrop-filter: ${Xt.backdropFilter};
        border: ${Xt.border};
        border-radius: 50%;
        box-shadow: ${r};
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transform: scale(${g});
        transition: ${a};
        transition-delay: ${m}ms;
        font-size: 16px;
      `})}setupHoverEffects(){if(!this.ballElement)return;const{hoverBackground:t,hoverBoxShadow:e,background:s,boxShadow:n,hoverScale:r,activeBackground:a,activeBoxShadow:o}=Ft;this.ballElement.addEventListener("mouseenter",()=>{!this.state.isDragging&&this.ballElement&&(this.ballElement.style.background=t,this.ballElement.style.transform=`translateY(-50%) scale(${r})`,this.ballElement.style.boxShadow=e)}),this.ballElement.addEventListener("mouseleave",()=>{!this.state.isDragging&&this.ballElement&&(this.ballElement.style.background=s,this.ballElement.style.transform="translateY(-50%) scale(1)",this.ballElement.style.boxShadow=n)}),this.ballElement.addEventListener("mousedown",()=>{this.ballElement&&(this.ballElement.style.background=a,this.ballElement.style.boxShadow=o)}),this.ballElement.addEventListener("mouseup",()=>{!this.state.isDragging&&this.ballElement&&setTimeout(()=>{this.ballElement&&(this.ballElement.style.background=t,this.ballElement.style.boxShadow=e)},150)})}setupMenuHoverEvents(){!this.ballElement||!this.menuContainer||(this.bindEventListener(this.ballElement,"mouseenter",()=>{this.showMenuOnHover()}),this.bindEventListener(this.ballElement,"mouseleave",()=>{this.hideMenuOnLeave()}),this.bindEventListener(this.menuContainer,"mouseenter",()=>{this.showMenuOnHover()}),this.bindEventListener(this.menuContainer,"mouseleave",()=>{this.hideMenuOnLeave()}),this.isTouchDevice&&this.bindEventListener(this.ballElement,"click",t=>{this.state.isDragging||(t.preventDefault(),t.stopPropagation(),this.state.isMenuExpanded?this.hideMenuOnLeave():this.showMenuOnHover())}))}setupEventListeners(){this.ballElement&&(this.setupHoverEffects(),this.setupMenuHoverEvents(),this.bindEventListener(this.ballElement,"click",t=>{this.state.isDragging||(t.preventDefault(),t.stopPropagation(),this.handleClickWithDebounce())}),this.bindEventListener(this.ballElement,"touchstart",this.handleTouchStart.bind(this),{passive:!1}),this.bindEventListener(document,"touchmove",this.handleTouchMove.bind(this),{passive:!1}),this.bindEventListener(document,"touchend",this.handleTouchEnd.bind(this),{passive:!1}),this.bindEventListener(this.ballElement,"mousedown",this.handleMouseDown.bind(this)),this.bindEventListener(document,"mousemove",this.handleMouseMove.bind(this)),this.bindEventListener(document,"mouseup",this.handleMouseUp.bind(this)))}handleClickWithDebounce(){const t=Date.now();if(t-this.lastClickTime<300){this.clickDebounceTimer&&(clearTimeout(this.clickDebounceTimer),this.clickDebounceTimer=null),this.menuHoverTimer&&(clearTimeout(this.menuHoverTimer),this.menuHoverTimer=null);return}this.lastClickTime=t,this.clickDebounceTimer&&clearTimeout(this.clickDebounceTimer),this.clickDebounceTimer=window.setTimeout(()=>{this.handleTranslate(),this.clickDebounceTimer=null},100)}handleTranslate(){if(this.onTranslateCallback&&this.ballElement){this.onTranslateCallback();const{activeBackground:t,background:e}=Ft;this.ballElement.style.background=t,setTimeout(()=>{this.ballElement&&(this.ballElement.style.background=e)},1e3)}}handleMouseDown(t){if(!(this.isTouchDevice&&t.target&&"ontouchstart"in t.target)){if(t.preventDefault(),t.stopPropagation(),this.state.isDragging=!1,this.dragStartY=t.clientY,this.ballElement){const e=this.ballElement.getBoundingClientRect();this.ballStartY=e.top+e.height/2}this.ballElement&&(this.ballElement.style.transition="none")}}handleMouseMove(t){if(!this.ballElement||!this.state.isDragging&&this.dragStartY===0||t.buttons!==1)return;const e=window.getSelection();if(e&&e.toString().length>0&&!this.state.isDragging||this.dragStartY===0)return;if(Math.abs(t.clientY-this.dragStartY)>be.threshold&&(this.state.isDragging=!0),this.state.isDragging){t.preventDefault(),t.stopPropagation();const n=t.clientY,r=window.innerHeight,a=Ft.size,o=n-this.dragStartY,l=this.ballStartY+o,c=a/2,d=r-a/2,g=Math.max(c,Math.min(d,l))/r*100,m=Math.max(be.minPosition,Math.min(be.maxPosition,g));this.isValidPosition(m)&&(this.config.position=m,this.state.currentPosition=m,this.ballElement.style.top=`${m}%`)}}isValidPosition(t){return typeof t=="number"&&!isNaN(t)&&t>=0&&t<=100}handleMouseUp(t){if(this.isTouchDevice&&t.target&&"ontouchstart"in t.target||this.dragStartY===0)return;t.preventDefault(),t.stopPropagation(),this.ballElement&&(this.ballElement.style.transition=Ft.transition);const e=this.state.isDragging;e&&(this.calibratePosition(),this.debouncedSavePosition()),this.state.isDragging=!1,this.dragStartY=0,this.ballStartY=0,e&&(this.lastClickTime=Date.now())}handleTouchStart(t){if(t.touches.length===1&&this.ballElement){const e=t.touches[0],s=this.ballElement.getBoundingClientRect();if(e.clientX>=s.left&&e.clientX<=s.right&&e.clientY>=s.top&&e.clientY<=s.bottom){t.preventDefault(),t.stopPropagation(),this.state.isDragging=!1,this.dragStartY=e.clientY,this.lastClickTime=Date.now();const r=this.ballElement.getBoundingClientRect();this.ballStartY=r.top+r.height/2,this.ballElement.style.transform="translateY(-50%) scale(1.05)",this.ballElement.style.transition="none",this.showMenuOnHover()}else this.dragStartY=0,this.ballStartY=0}}handleTouchMove(t){if(!(!this.ballElement||t.touches.length!==1)&&this.dragStartY!==0){const e=t.touches[0],s=Math.abs(e.clientY-this.dragStartY),n=Math.min(be.threshold,5);s>n&&(t.preventDefault(),t.stopPropagation(),this.state.isDragging=!0);const r=e.clientY,a=window.innerHeight,o=Ft.size,l=r-this.dragStartY,c=this.ballStartY+l,d=o/2,h=a-o/2,m=Math.max(d,Math.min(h,c))/a*100,y=Math.max(be.minPosition,Math.min(be.maxPosition,m));this.isValidPosition(y)&&(this.config.position=y,this.state.currentPosition=y,this.ballElement.style.top=`${y}%`)}}handleTouchEnd(t){this.dragStartY!==0&&(t.preventDefault(),t.stopPropagation(),this.ballElement&&(this.ballElement.style.transition=Ft.transition,this.ballElement.style.transform="translateY(-50%) scale(1)"),this.state.isDragging?(this.calibratePosition(),this.debouncedSavePosition()):Date.now()-this.lastClickTime<300&&this.handleTranslate()),this.state.isDragging=!1,this.dragStartY=0,this.ballStartY=0}debouncedSavePosition(){this.savePositionTimer&&clearTimeout(this.savePositionTimer),this.savePositionTimer=window.setTimeout(()=>{this.savePosition()},300)}async savePosition(){try{const{StorageService:t}=await Promise.resolve().then(()=>vg),e=t.getInstance(),s=await e.getUserSettings();s.floatingBall.position=this.config.position,await e.saveUserSettings(s)}catch(t){console.error("保存悬浮球位置失败:",t)}}showMenuOnHover(){this.menuHoverTimer&&(clearTimeout(this.menuHoverTimer),this.menuHoverTimer=null),this.state.isMenuExpanded||(this.state.isMenuExpanded=!0,this.updateMenuStyle(),this.menuItemsEventsBound||(this.bindMenuItemListeners(),this.menuItemsEventsBound=!0),this.isTouchDevice&&(this.menuHoverTimer=window.setTimeout(()=>{this.hideMenuOnLeave(),this.menuHoverTimer=null},3e3)))}hideMenuOnLeave(){this.menuHoverTimer&&clearTimeout(this.menuHoverTimer),this.menuHoverTimer=window.setTimeout(()=>{this.state.isMenuExpanded&&(this.state.isMenuExpanded=!1,this.updateMenuStyle()),this.menuHoverTimer=null},300)}toggleMenu(){this.state.isMenuExpanded=!this.state.isMenuExpanded,this.updateMenuStyle(),this.state.isMenuExpanded&&(this.bindEventListener(document,"click",this.handleDocumentClick.bind(this),!0),this.menuItemsEventsBound||(this.bindMenuItemListeners(),this.menuItemsEventsBound=!0))}handleDocumentClick(t){if(!this.ballElement||!this.menuContainer)return;const e=t.target;this.ballElement.contains(e)||this.menuContainer.contains(e)||this.state.isMenuExpanded&&(this.state.isMenuExpanded=!1,this.updateMenuStyle())}handleMenuAction(t){switch(this.menuHoverTimer&&(clearTimeout(this.menuHoverTimer),this.menuHoverTimer=null),this.state.isMenuExpanded=!1,this.updateMenuStyle(),t){case"settings":this.openSettings();break;case"close":this.closeBall();break;case"options":this.openOptions();break}}openSettings(){try{O.runtime.sendMessage({type:"open-popup"})}catch(t){console.error("打开设置失败:",t)}}openOptions(){try{O.runtime.sendMessage({type:"open-options"})}catch(t){console.error("打开选项失败:",t)}}closeBall(){this.menuHoverTimer&&(clearTimeout(this.menuHoverTimer),this.menuHoverTimer=null),this.clickDebounceTimer&&(clearTimeout(this.clickDebounceTimer),this.clickDebounceTimer=null),this.state.isMenuExpanded=!1,this.menuItemsEventsBound=!1,this.state.isVisible=!1,this.ballElement&&(this.ballElement.style.display="none"),this.menuContainer&&(this.menuContainer.style.display="none")}bindMenuItemListeners(){if(!this.menuContainer)return;this.menuContainer.querySelectorAll(".wxt-menu-item").forEach(e=>{const s=e,n=s.dataset.action;this.bindEventListener(s,"click",r=>{r.preventDefault(),r.stopPropagation(),this.handleMenuAction(n)}),this.bindEventListener(s,"mouseenter",()=>{s.style.background=Xt.hoverBackground,s.style.transform="scale(1.1)",s.style.boxShadow="0 12px 32px rgba(106, 136, 224, 0.3), 0 6px 16px rgba(0, 0, 0, 0.15)",s.style.backdropFilter="blur(16px) saturate(1.8)"}),this.bindEventListener(s,"mouseleave",()=>{s.style.background=Xt.background,s.style.transform="scale(1)",s.style.boxShadow=Xt.boxShadow,s.style.backdropFilter=Xt.backdropFilter})})}getState(){return{...this.state}}updateTranslationStateIndicator(){this.ballElement&&(this.startTransitionAnimation(),setTimeout(()=>{this.updateBallContent(),this.endTransitionAnimation()},100))}startTransitionAnimation(){this.ballElement&&(this.ballElement.style.transition="transform 0.2s ease-out",this.ballElement.style.transform="translateY(-50%) scale(0.8)")}updateBallContent(){this.ballElement&&(Ni(this.ballElement,this.createBallIcon()),this.updateTooltipText())}endTransitionAnimation(){this.ballElement&&(this.ballElement.style.transform="translateY(-50%) scale(1)")}updateTooltipText(){if(!this.ballElement)return;const t=document.querySelector(".wxt-translation-term")!==null,e=document.body.classList.contains("wxt-translation-hidden");let s;t?e?s="原文模式":s="翻译模式":s="准备翻译",this.ballElement.title=`${s}`}showNotification(t){const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #333;
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      z-index: 10001;
      opacity: 0;
      transition: opacity 0.3s ease;
      max-width: 300px;
      word-wrap: break-word;
    `,e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.style.opacity="1"},10),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)},3e3)}destroy(){Se.log("FloatingBall destroy start"),this.ballElement&&(this.ballElement.remove(),this.ballElement=null),this.menuContainer&&(this.menuContainer.remove(),this.menuContainer=null),this.removeAllEventListeners(),this.savePositionTimer&&(clearTimeout(this.savePositionTimer),this.savePositionTimer=null),this.clickDebounceTimer&&(clearTimeout(this.clickDebounceTimer),this.clickDebounceTimer=null),this.menuHoverTimer&&(clearTimeout(this.menuHoverTimer),this.menuHoverTimer=null);const t=document.getElementById("wxt-floating-ball-animation");t&&t.remove(),this.state={isDragging:!1,isVisible:!1,isMenuExpanded:!1,currentPosition:50},this.dragStartY=0,this.ballStartY=0,this.lastClickTime=0,this.menuItemsEventsBound=!1,this.onTranslateCallback=void 0,Se.log("FloatingBall destroyed")}}const Sp=["\\","/",".","*","+","?","|","(",")","[","]","{","}","$","^"],wp=i=>{let t="",e=0;for(;e<i.length;){const s=i[e++];switch(s){case"*":t+=".*";break;case"?":t+=".";break;case"[":let n="",r="";for(i[e]==="!"&&(n="^",e++);i[e]!=="]"&&i[e];){const a=i[e++];a==="-"?i[e]&&r?(n+=r+"-"+i[e++],r=""):(n+="\\-",r=""):(n+=a,r=a)}e++,t+="["+n+"]";break;case"\\":t+="\\"+i[e++];break;default:Sp.indexOf(s)>-1&&(t+="\\"),t+=s;break}}return new RegExp("^"+t+"$")},ml={match:(i,t)=>wp(i).test(t)},vs={rules:[]},ys="website-management-settings",ir="blacklist-settings";class vp{constructor(){u(this,"settingsCache",null);u(this,"cacheTimestamp",null)}async getWebsiteStatus(t){const e=await this.getSettings(),s=Date.now();this.cacheTimestamp&&s-this.cacheTimestamp>5e3&&this.clearCache();const n=e.rules.filter(a=>a.type==="blacklist"&&a.enabled);for(const a of n)if(ml.match(a.pattern,t))return"blacklisted";const r=e.rules.filter(a=>a.type==="whitelist"&&a.enabled);for(const a of r)if(ml.match(a.pattern,t))return"whitelisted";return"normal"}async isBlacklisted(t){return await this.getWebsiteStatus(t)==="blacklisted"}async isWhitelisted(t){return await this.getWebsiteStatus(t)==="whitelisted"}async getRules(){return(await this.getSettings()).rules}async getRulesByType(t){return this.clearCache(),(await this.getSettings()).rules.filter(s=>s.type===t)}async addRule(t,e,s){if(!t)return;this.clearCache();const n=await this.getSettings(),r=n.rules.find(o=>o.pattern===t);if(r){if(r.type===e)return;{const o=n.rules.findIndex(l=>l.id===r.id);o>-1&&n.rules.splice(o,1)}}const a={id:this.generateId(),pattern:t,type:e,enabled:!0,createdAt:new Date,description:s};n.rules.push(a),await this.saveSettings(n),this.clearCache()}async updateRule(t,e){const s=await this.getSettings(),n=s.rules.findIndex(r=>r.id===t);if(n===-1)throw new Error("规则不存在");s.rules[n]={...s.rules[n],...e},await this.saveSettings(s),this.clearCache()}async removeRule(t){const e=await this.getSettings(),s=e.rules.findIndex(n=>n.id===t);s>-1&&(e.rules.splice(s,1),await this.saveSettings(e),this.clearCache())}async removeRules(t){const e=await this.getSettings();e.rules=e.rules.filter(s=>!t.includes(s.id)),await this.saveSettings(e),this.clearCache()}async toggleRule(t){const e=await this.getSettings(),s=e.rules.find(n=>n.id===t);s&&(s.enabled=!s.enabled,await this.saveSettings(e),this.clearCache())}async getSettings(){if(this.settingsCache)return this.settingsCache;try{const t=await O.storage.sync.get(ys);if(t&&t[ys]){const s=JSON.parse(t[ys]);return s.rules&&(s.rules=s.rules.map(n=>({...n,createdAt:new Date(n.createdAt)}))),this.settingsCache=s,this.cacheTimestamp=Date.now(),s}const e=await O.storage.sync.get(ir);if(e&&e[ir]){const s=JSON.parse(e[ir]),n=await this.migrateLegacyData(s);return this.settingsCache=n,n}return this.settingsCache=vs,vs}catch(t){return console.error("获取网站管理设置失败:",t),this.settingsCache=vs,vs}}async migrateLegacyData(t){const s={rules:t.patterns.map(n=>({id:this.generateId(),pattern:n,type:"blacklist",enabled:!0,createdAt:new Date,description:"从黑名单迁移"}))};return await this.saveSettings(s),s}async saveSettings(t){try{const e=JSON.stringify(t);await O.storage.sync.set({[ys]:e}),this.settingsCache=t,this.cacheTimestamp=Date.now()}catch(e){console.error("保存网站管理设置失败:",e)}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}clearCache(){this.settingsCache=null,this.cacheTimestamp=null}}class yp{constructor(){u(this,"storageService");this.storageService=ft.getInstance()}async getUserSettings(){return await this.storageService.getUserSettings()}createReplacementConfig(t){const e=t.apiConfigs.find(s=>s.id===t.activeApiConfigId);return{userLevel:t.userLevel,replacementRate:t.replacementRate,useGptApi:t.useGptApi,apiConfig:(e==null?void 0:e.config)||{apiKey:"",apiEndpoint:"",model:"",temperature:0,enable_thinking:!1,phraseEnabled:!0},inlineTranslation:!0,translationStyle:t.translationStyle}}updateConfiguration(t,e,s){e.setTranslationStyle(t.translationStyle),t.translationStyle===Te.CUSTOM&&e.setCustomCSS(t.customTranslationCSS),s.updateConfig(this.createReplacementConfig(t))}getActiveApiConfig(t){return t.apiConfigs.find(e=>e.id===t.activeApiConfigId)}}const bl=Ot("ProcessingService");class Tp{constructor(t,e,s,n){u(this,"textProcessor");u(this,"textReplacer");u(this,"lazyLoadingService");u(this,"processingParams");this.textProcessor=t,this.textReplacer=e,this.lazyLoadingService=n,this.updateProcessingParams(s),this.lazyLoadingService&&this.lazyLoadingService.setProcessingCallback(this.processSegmentsLazy.bind(this))}async processPage(){var t;try{(t=this.lazyLoadingService)!=null&&t.isEnabled()?await this.processPageWithLazyLoading():await this.processPageImmediate()}catch(e){throw bl.error("Page processing failed",{error:e instanceof Error?e.message:String(e)}),e}}async processPageImmediate(){await this.textProcessor.processRoot(document.body,this.textReplacer,this.processingParams.originalWordDisplayMode,this.processingParams.maxLength,this.processingParams.translationPosition,this.processingParams.showParentheses)}async processPageWithLazyLoading(){const t=await this.getPageSegments();t.length!==0&&(this.lazyLoadingService.setProcessingCallback(this.processSegmentsLazy.bind(this)),this.lazyLoadingService.beginSession(),this.lazyLoadingService.observeSegments(t))}async getPageSegments(){try{const{ContentSegmenter:t}=await Promise.resolve().then(()=>ep);return new t({maxSegmentLength:this.processingParams.maxLength||2e3,minSegmentLength:this.processingParams.minLength||80,enableSmartBoundary:!0,mergeSmallSegments:!0}).segmentContent(document.body)}catch(t){return console.error("[ProcessingService] 获取页面段落失败:",t),[]}}async processSegmentsLazy(t){try{await this.processBatchSegments(t)}catch(e){throw bl.error("Lazy-loading segment processing failed",{error:e instanceof Error?e.message:String(e)}),e}}async processBatchSegments(t){try{const e=this.textProcessor.getPronunciationService();await new ll(e).processSegments(t,this.textReplacer,this.processingParams.originalWordDisplayMode,this.processingParams.translationPosition,this.processingParams.showParentheses,!0)}catch(e){console.error("[ProcessingService] 批量处理段落失败:",e);for(const s of t)await this.processSegment(s)}}async processSegment(t){try{await this.textProcessor.processRoot(t.element,this.textReplacer,this.processingParams.originalWordDisplayMode,this.processingParams.maxLength,this.processingParams.translationPosition,this.processingParams.showParentheses)}catch(e){console.error("[ProcessingService] 处理段落失败:",e,t)}}async processNode(t){try{await this.textProcessor.processRoot(t,this.textReplacer,this.processingParams.originalWordDisplayMode,this.processingParams.maxLength,this.processingParams.translationPosition,this.processingParams.showParentheses)}catch(e){console.error("[ProcessingService] 节点处理失败:",e)}}updateSettings(t){this.updateProcessingParams(t);const e=t.apiConfigs.find(s=>s.id===t.activeApiConfigId);e&&this.textProcessor.updateApiConfig(e.config),this.lazyLoadingService&&this.lazyLoadingService.updateConfig(t.lazyLoading)}updateProcessingParams(t){this.processingParams={originalWordDisplayMode:t.originalWordDisplayMode,maxLength:t.maxLength,minLength:t.minLength,translationPosition:t.translationPosition,showParentheses:t.showParentheses}}getProcessingParams(){return{...this.processingParams}}getLazyLoadingService(){return this.lazyLoadingService}isLazyLoadingEnabled(){var t;return((t=this.lazyLoadingService)==null?void 0:t.isEnabled())||!1}destroy(){this.lazyLoadingService&&this.lazyLoadingService.destroy()}}function Sl(i){if(i.nodeType===Node.ELEMENT_NODE){const t=i,e=["wxt-translation-term","wxt-original-word","wxt-pronunciation-tooltip","wxt-phonetic-text","wxt-tts-button","wxt-processing"];for(const s of e)if(t.classList.contains(s))return!0;if(t.hasAttribute("data-wxt-word-processed")||t.hasAttribute("data-pronunciation-added"))return!0}return!1}function Ep(i,t){let e=i.parentElement;for(;e;){if(t.has(e))return!0;e=e.parentElement}return!1}async function Cp(){var i,t;try{const e=document.body.innerText.substring(0,1e3);if(!e.trim())return"zh";const s=await O.i18n.detectLanguage(e);if((t=(i=s==null?void 0:s.languages)==null?void 0:i[0])!=null&&t.language){const n=s.languages[0].language;return me.normalizeLanguageCode(n)}return"zh"}catch{return"zh"}}const wl=Ot("UserFeedbackService"),vl="wxt-feedback-toast-container",ke="wxt-feedback-toast",xp=3e3,Ts={network:"Network error. Please check your connection and try again.",business:"Service request failed. Please try again later.",businessWithStatus:"Service error (HTTP {statusCode}). Please try again later.",system:"System error. Please refresh the page and try again."},Fe=class Fe{constructor(){u(this,"hideTimer",null)}static getInstance(){return Fe.instance||(Fe.instance=new Fe),Fe.instance}showActionError(t,e){const s=this.classifyError(e),n=this.buildUserMessage(s);return this.showToast(n,s.category),wl.error("User action failed",{action:t,category:s.category,statusCode:s.statusCode,technicalMessage:s.technicalMessage}),n}classifyError(t){const e=t instanceof Error?t.message:String(t),s=e.toLowerCase(),n=this.extractStatusCode(e);return s.includes("failed to fetch")||s.includes("networkerror")||s.includes("network error")||s.includes("timed out")||s.includes("timeout")||s.includes("aborterror")||s.includes("connection")||s.includes("econn")||s.includes("dns")?{category:"network",technicalMessage:e,statusCode:n}:n&&n>=400?{category:"business",technicalMessage:e,statusCode:n}:{category:"system",technicalMessage:e,statusCode:n}}extractStatusCode(t){const e=t.match(/(?:http|status|code|api 请求失败[:\s]*)\D*(\d{3})/i);if(!e)return;const s=Number(e[1]);return Number.isFinite(s)?s:void 0}buildUserMessage(t){return t.category==="network"?this.translateWithFallback("errors.actionFeedback.network",Ts.network):t.category==="business"?t.statusCode?this.translateWithFallback("errors.actionFeedback.businessWithStatus",Ts.businessWithStatus.replace("{statusCode}",String(t.statusCode)),{statusCode:t.statusCode}):this.translateWithFallback("errors.actionFeedback.business",Ts.business):this.translateWithFallback("errors.actionFeedback.system",Ts.system)}translateWithFallback(t,e,s={}){try{const n=Un.global.t(t,s);if(typeof n=="string"&&n!==t)return n}catch(n){wl.warn("Failed to resolve i18n key for feedback message",{key:t,error:n instanceof Error?n.message:String(n)})}return e}showToast(t,e){const s=this.getOrCreateContainer(),n=this.createToastElement(t,e);s.replaceChildren(n),window.requestAnimationFrame(()=>{n.classList.add("is-visible")}),this.hideTimer&&(window.clearTimeout(this.hideTimer),this.hideTimer=null),this.hideTimer=window.setTimeout(()=>{n.classList.remove("is-visible"),window.setTimeout(()=>{s.firstChild===n&&s.replaceChildren()},180)},xp)}getOrCreateContainer(){let t=document.getElementById(vl);return t||(this.ensureStyles(),t=document.createElement("div"),t.id=vl,t.style.position="fixed",t.style.top="16px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.zIndex="2147483647",t.style.pointerEvents="none",t.style.maxWidth="min(90vw, 520px)",document.documentElement.appendChild(t),t)}createToastElement(t,e){const s=document.createElement("div");return s.className=`${ke} ${ke}--${e}`,s.textContent=t,s}ensureStyles(){if(document.getElementById("wxt-feedback-toast-style"))return;const t=document.createElement("style");t.id="wxt-feedback-toast-style",t.textContent=`
      .${ke} {
        opacity: 0;
        transform: translateY(-8px) scale(0.98);
        transition: opacity 160ms ease, transform 180ms ease;
        color: #ffffff;
        border-radius: 10px;
        padding: 10px 14px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        backdrop-filter: blur(4px);
        font-size: 13px;
        font-weight: 600;
        line-height: 1.35;
      }

      .${ke}.is-visible {
        opacity: 1;
        transform: translateY(0) scale(1);
      }

      .${ke}--network {
        background: linear-gradient(135deg, #0ea5e9, #2563eb);
      }

      .${ke}--business {
        background: linear-gradient(135deg, #ef4444, #dc2626);
      }

      .${ke}--system {
        background: linear-gradient(135deg, #fb923c, #ea580c);
      }
    `,document.head.appendChild(t)}};u(Fe,"instance");let Es=Fe;const Mi=Ot("ListenerService");class Pp{constructor(t,e,s,n,r,a,o,l){u(this,"settings");u(this,"processingService");u(this,"configurationService");u(this,"styleManager");u(this,"textReplacer");u(this,"paragraphService");u(this,"floatingBallManager");u(this,"translationStateManager");u(this,"userFeedback");u(this,"onSettingsUpdated");u(this,"domObserver");u(this,"debounceTimer");this.settings=t,this.processingService=e,this.configurationService=s,this.styleManager=n,this.textReplacer=r,this.paragraphService=Ri.getInstance(),this.floatingBallManager=a,this.translationStateManager=o,this.userFeedback=Es.getInstance(),this.onSettingsUpdated=l}setupMessageListeners(){O.runtime.onMessage.addListener(t=>this.handleMessage(t))}setupDomObserver(){this.settings.triggerMode===ui.AUTOMATIC&&this.createDomObserver()}destroy(){this.domObserver&&(this.domObserver.disconnect(),this.domObserver=void 0),this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=void 0)}async handleMessage(t){if(t.type==="settings_updated"||t.type==="api_config_updated")return await this.handleSettingsUpdate(t.settings),{success:!0};if(t.type==="translate-page-command")return this.executeUserAction("translate-page-command",()=>this.toggleTranslationState());if(t.type==="MANUAL_TRANSLATE")return this.settings.triggerMode===ui.MANUAL?(await this.validateConfigForUserAction()||Mi.warn("Manual translate config check failed, continuing for guest/manual mode"),this.executeUserAction("manual-translate",async()=>{await this.processingService.processPage()})):{success:!0};if(t.type==="PARAGRAPH_TRANSLATE")return await this.validateConfigForUserAction()||Mi.warn("Paragraph translate config check failed, continuing for guest/manual mode"),this.executeUserAction("paragraph-translate",async()=>{await this.paragraphService.start()})}async toggleTranslationState(){await this.validateConfigForUserAction()||Mi.warn("Toggle translation config check failed, continuing for guest/manual mode"),await this.translationStateManager.toggleTranslationState()}async executeUserAction(t,e){try{return await e(),{success:!0}}catch(s){const n=this.userFeedback.showActionError(t,s);return Mi.error("User action execution failed",{action:t,error:s instanceof Error?s.message:String(s)}),{success:!1,error:n}}}async validateConfigForUserAction(){try{return!!await O.runtime.sendMessage({type:"validate-configuration",source:"user_action"})}catch(t){return Mi.warn("validate-configuration request failed",{error:t instanceof Error?t.message:String(t)}),!1}}async handleSettingsUpdate(t){var s;if(this.settings.triggerMode!==t.triggerMode||this.settings.isEnabled!==t.isEnabled||this.settings.enablePronunciationTooltip!==t.enablePronunciationTooltip||this.settings.userLevel!==t.userLevel||this.settings.useGptApi!==t.useGptApi||this.settings.multilingualConfig.targetLanguage!==t.multilingualConfig.targetLanguage||this.settings.multilingualConfig.nativeLanguage!==t.multilingualConfig.nativeLanguage){window.location.reload();return}Object.assign(this.settings,t),this.settings.floatingBall={...$s,...this.settings.floatingBall||{}},this.configurationService.updateConfiguration(this.settings,this.styleManager,this.textReplacer),this.processingService.updateSettings(this.settings),this.floatingBallManager.updateConfig(this.settings.floatingBall),(s=this.onSettingsUpdated)==null||s.call(this,this.settings)}createDomObserver(){const t=new Set;this.domObserver=new MutationObserver(e=>{let s=!1;e.forEach(n=>{n.type==="childList"?n.addedNodes.forEach(r=>{var a;if(!Sl(r)&&r.nodeType===Node.ELEMENT_NODE){const l=(a=r.textContent)==null?void 0:a.trim();l&&l.length>15&&(t.add(r),s=!0)}}):n.type==="characterData"&&n.target.parentElement&&(Sl(n.target.parentElement)||(t.add(n.target.parentElement),s=!0))}),s&&this.debouncedProcessNodes(t)}),this.domObserver.observe(document.body,{childList:!0,subtree:!0,characterData:!0})}debouncedProcessNodes(t){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(async()=>{if(t.size===0)return;const e=new Set;t.forEach(s=>{document.body.contains(s)&&!Ep(s,t)&&e.add(s)}),this.domObserver&&this.domObserver.disconnect();try{for(const s of e)await this.processingService.processNode(s)}catch(s){console.error("[ListenerService] DOM节点处理失败:",s)}t.clear(),this.domObserver&&this.domObserver.observe(document.body,{childList:!0,subtree:!0,characterData:!0})},150)}}class Ap{constructor(t,e={}){u(this,"observer",null);u(this,"segmentMap",new Map);u(this,"callback");u(this,"options");u(this,"isDestroyed",!1);this.callback=t,this.options=e,this.initializeObserver()}initializeObserver(){if(!(typeof IntersectionObserver>"u"))try{const t=this.options.preloadDistance??.5,e=Math.round(t*100),s={rootMargin:`${e}% 0px ${e}% 0px`,threshold:.1,root:null};this.observer=new IntersectionObserver(this.handleIntersection.bind(this),s)}catch(t){console.error("[SegmentObserver] 创建观察器失败:",t)}}handleIntersection(t){if(this.isDestroyed||!this.observer)return;const e=[],s=[];if(t.forEach(n=>{const r=this.segmentMap.get(n.target);r&&(n.isIntersecting?e.push(r):s.push(r))}),e.length>0||s.length>0)try{this.callback(e,s)}catch(n){console.error("[SegmentObserver] 回调执行失败:",n)}}observe(t){if(this.isDestroyed||!this.observer)return;const e=t.element;if(!(!e||!(e instanceof Element)))try{this.segmentMap.set(e,t),this.observer.observe(e)}catch(s){console.error("[SegmentObserver] 观察段落失败:",s)}}unobserve(t){if(this.isDestroyed||!this.observer)return;const e=t.element;if(!(!e||!(e instanceof Element)))try{this.observer.unobserve(e),this.segmentMap.delete(e)}catch(s){console.error("[SegmentObserver] 停止观察失败:",s)}}observeMultiple(t){t.forEach(e=>this.observe(e))}unobserveMultiple(t){t.forEach(e=>this.unobserve(e))}updateOptions(t){if(this.isDestroyed)return;const e=Array.from(this.segmentMap.values());this.options={...this.options,...t},this.disconnect(),this.initializeObserver(),e.forEach(s=>this.observe(s))}disconnect(){if(this.observer)try{this.observer.disconnect()}catch(t){console.error("[SegmentObserver] 断开观察器失败:",t)}this.segmentMap.clear()}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.disconnect(),this.observer=null)}getObservedCount(){return this.segmentMap.size}isObserving(t){return this.segmentMap.has(t.element)}getObservedSegments(){return Array.from(this.segmentMap.values())}static isSupported(){return typeof IntersectionObserver<"u"}}class Ip{constructor(t){u(this,"config");u(this,"observer",null);u(this,"processingCallback",null);u(this,"state");u(this,"processingTimer",null);u(this,"reconcileTimer",null);u(this,"processingInFlight",!1);u(this,"retryTimers",new Set);u(this,"scrollHandler",this.handleViewportMutation.bind(this));u(this,"resizeHandler",this.handleViewportMutation.bind(this));u(this,"isDestroyed",!1);u(this,"PROCESS_DEBOUNCE_MS",60);u(this,"RECONCILE_THROTTLE_MS",120);u(this,"PROCESS_BATCH_SIZE",8);u(this,"MAX_RETRY_COUNT",2);u(this,"RETRY_BASE_DELAY_MS",300);this.config={...t},this.state={initialized:!1,enabled:!1,processingQueue:new Set,processedSegments:new Set,segmentCache:new Map,observedSegments:new Map,failedAttempts:new Map}}initialize(){this.state.initialized||(this.state.initialized=!0,this.state.enabled=this.normalizeEnabled(this.config.enabled),this.config={...this.config,preloadDistance:this.normalizePreloadDistance(this.config.preloadDistance)},this.state.enabled&&(this.createObserver(),this.bindViewportListeners()))}createObserver(){const t=Array.from(this.state.observedSegments.values());this.observer&&this.observer.destroy();const e=(n,r)=>{this.handleVisibilityChange(n)},s={preloadDistance:this.config.preloadDistance};this.observer=new Ap(e,s),t.length>0&&this.observer.observeMultiple(t),this.scheduleReconcile()}handleVisibilityChange(t){!this.state.enabled||this.isDestroyed||t.length===0||this.scheduleProcessing(t)}scheduleProcessing(t){if(!this.state.enabled||this.isDestroyed)return;let e=!1;for(const s of t){if(!this.shouldQueueSegment(s))continue;const n=s.fingerprint;this.state.processingQueue.add(n),this.state.segmentCache.set(n,s),e=!0}e&&this.queueProcessingRun()}async processQueuedSegments(){if(!(!this.processingCallback||this.isDestroyed||!this.state.enabled||this.processingInFlight)){this.processingInFlight=!0;try{for(;!this.isDestroyed&&this.state.enabled&&this.state.processingQueue.size>0;){const t=Array.from(this.state.processingQueue).slice(0,this.PROCESS_BATCH_SIZE),e=[];for(const s of t){this.state.processingQueue.delete(s);const n=this.state.segmentCache.get(s);if(!n||!this.shouldQueueSegment(n)){this.cleanupSegmentFromQueue(s);continue}e.push(n)}e.length!==0&&await this.processBatch(e)}}finally{this.processingInFlight=!1,this.state.processingQueue.size>0&&this.queueProcessingRun()}}}async processBatch(t){if(!(!this.processingCallback||t.length===0)){try{await this.processingCallback(t),t.forEach(e=>this.markSegmentProcessed(e));return}catch{}for(const e of t){if(!this.processingCallback||this.isDestroyed||!this.state.enabled)return;try{await this.processingCallback([e]),this.markSegmentProcessed(e)}catch(s){this.handleSegmentFailure(e,s)}}}}markSegmentProcessed(t){const e=t.fingerprint;this.state.processedSegments.add(e),this.state.failedAttempts.delete(e),this.state.processingQueue.delete(e),this.state.segmentCache.delete(e),this.state.observedSegments.delete(e),this.observer&&this.observer.unobserve(t)}handleSegmentFailure(t,e){const s=t.fingerprint,n=(this.state.failedAttempts.get(s)??0)+1;if(this.state.failedAttempts.set(s,n),n>this.MAX_RETRY_COUNT){this.markSegmentProcessed(t);return}this.scheduleRetry(t,n)}scheduleRetry(t,e){const s=this.RETRY_BASE_DELAY_MS*e,n=t.fingerprint,r=window.setTimeout(()=>{this.retryTimers.delete(r),!(this.isDestroyed||!this.state.enabled)&&this.state.observedSegments.has(n)&&this.scheduleProcessing([t])},s);this.retryTimers.add(r)}observeSegments(t){var e;if(!(!this.state.initialized||this.isDestroyed)){for(const s of t){const n=s.fingerprint,r=this.state.observedSegments.get(n);r&&r.element!==s.element&&((e=this.observer)==null||e.unobserve(r)),this.state.observedSegments.set(n,s),this.state.segmentCache.set(n,s)}!this.state.enabled||!this.observer||(this.observer.observeMultiple(t),this.scheduleReconcile())}}unobserveSegments(t){var e;if(!this.isDestroyed){if(t.length===0){this.clearSession();return}for(const s of t){const n=s.fingerprint;this.state.processingQueue.delete(n),this.state.segmentCache.delete(n),this.state.observedSegments.delete(n),this.state.failedAttempts.delete(n),(e=this.observer)==null||e.unobserve(s)}}}setProcessingCallback(t){this.processingCallback=t}beginSession(){this.isDestroyed||(this.clearSession(),this.state.enabled&&(this.createObserver(),this.bindViewportListeners()))}clearSession(){this.isDestroyed||(this.stopRuntimeProcessing(!0),this.state.processedSegments.clear(),this.state.failedAttempts.clear())}updateConfig(t){if(this.isDestroyed)return;const e={...t,enabled:this.normalizeEnabled(t.enabled),preloadDistance:this.normalizePreloadDistance(t.preloadDistance)},s=this.state.enabled,n=this.config.preloadDistance!==e.preloadDistance;if(this.config=e,this.state.enabled=e.enabled,!s&&this.state.enabled){this.createObserver(),this.bindViewportListeners(),this.scheduleReconcile();return}if(s&&!this.state.enabled){this.stopRuntimeProcessing(!1);return}this.state.enabled&&n&&this.state.initialized&&this.createObserver()}stopRuntimeProcessing(t){var e;(e=this.observer)==null||e.disconnect(),this.state.processingQueue.clear(),this.state.segmentCache.clear(),t&&this.state.observedSegments.clear(),this.processingTimer!==null&&(clearTimeout(this.processingTimer),this.processingTimer=null),this.reconcileTimer!==null&&(clearTimeout(this.reconcileTimer),this.reconcileTimer=null),this.clearRetryTimers(),this.unbindViewportListeners()}cleanupSegmentFromQueue(t){this.state.processingQueue.delete(t),this.state.segmentCache.delete(t)}shouldQueueSegment(t){const e=t.fingerprint;return!e||!(t.element instanceof Element)||!t.element.isConnected||this.state.processedSegments.has(e)?!1:(this.state.failedAttempts.get(e)??0)<=this.MAX_RETRY_COUNT}handleViewportMutation(){!this.state.enabled||this.isDestroyed||this.reconcileTimer===null&&(this.reconcileTimer=window.setTimeout(()=>{this.reconcileTimer=null,this.reconcileVisibleSegments()},this.RECONCILE_THROTTLE_MS))}scheduleReconcile(){this.handleViewportMutation()}reconcileVisibleSegments(){if(!this.state.enabled||this.isDestroyed)return;const t=window.innerHeight||0,e=Math.max(0,t*this.normalizePreloadDistance(this.config.preloadDistance)),s=[];for(const[n,r]of this.state.observedSegments.entries()){if(!this.shouldQueueSegment(r))continue;const a=r.element;if(!(a instanceof Element)||!a.isConnected){this.state.observedSegments.delete(n),this.cleanupSegmentFromQueue(n),this.state.failedAttempts.delete(n);continue}const o=a.getBoundingClientRect();if(o.width<=0||o.height<=0)continue;o.bottom>=-e&&o.top<=t+e&&s.push(r)}s.length>0&&this.scheduleProcessing(s)}queueProcessingRun(){this.processingTimer!==null||this.processingInFlight||this.isDestroyed||!this.state.enabled||(this.processingTimer=window.setTimeout(()=>{this.processingTimer=null,this.processQueuedSegments()},this.PROCESS_DEBOUNCE_MS))}bindViewportListeners(){window.addEventListener("scroll",this.scrollHandler,{passive:!0}),window.addEventListener("resize",this.resizeHandler,{passive:!0})}unbindViewportListeners(){window.removeEventListener("scroll",this.scrollHandler),window.removeEventListener("resize",this.resizeHandler)}clearRetryTimers(){for(const t of this.retryTimers)clearTimeout(t);this.retryTimers.clear()}normalizeEnabled(t){return!!t}normalizePreloadDistance(t){return Number.isFinite(t)?Math.min(Math.max(t,0),3):.5}isEnabled(){return this.state.initialized&&this.state.enabled}isInitialized(){return this.state.initialized}getConfig(){return{...this.config}}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.stopRuntimeProcessing(!0),this.state.processedSegments.clear(),this.state.failedAttempts.clear(),this.observer&&(this.observer.destroy(),this.observer=null))}}const sr="wxt-tts-word",nr="wxt-tts-word--active",Cs="wxt-tts-playing";class Lp{constructor(){u(this,"originalHtml","");u(this,"targetElement",null);u(this,"wordSpans",[]);u(this,"currentWordIndex",-1)}prepare(t){if(this.targetElement===t)return;this.cleanup(),this.targetElement=t,this.originalHtml=t.innerHTML;const e=t.innerText,s=this.tokenize(e);let n="",r=0;for(let a=0;a<s.length;a++){const o=s[a];o.isWord?n+=`<span class="${sr}" data-word-index="${a}" data-char-index="${r}">${this.escapeHtml(o.text)}</span>`:n+=this.escapeHtml(o.text),r+=o.text.length}t.innerHTML=n,t.classList.add(Cs),this.wordSpans=Array.from(t.querySelectorAll(`.${sr}`))}highlightByCharIndex(t){var s;let e=-1;for(let n=0;n<this.wordSpans.length;n++){const r=this.wordSpans[n],a=parseInt(r.dataset.charIndex||"0",10),o=((s=r.textContent)==null?void 0:s.length)||0;if(t>=a&&t<a+o){e=n;break}}e>=0&&this.highlightWordAt(e)}highlightWordAt(t){t!==this.currentWordIndex&&(this.currentWordIndex>=0&&this.wordSpans[this.currentWordIndex]&&this.wordSpans[this.currentWordIndex].classList.remove(nr),t>=0&&t<this.wordSpans.length&&(this.wordSpans[t].classList.add(nr),this.currentWordIndex=t,this.wordSpans[t].scrollIntoView({behavior:"smooth",block:"center"})))}cleanup(){this.targetElement&&this.originalHtml&&(this.targetElement.innerHTML=this.originalHtml,this.targetElement.classList.remove(Cs)),this.targetElement=null,this.originalHtml="",this.wordSpans=[],this.currentWordIndex=-1}getTargetElement(){return this.targetElement}tokenize(t){const e=[],s=/(\s+|[^\s\w])/g;let n=0,r;for(;(r=s.exec(t))!==null;)r.index>n&&e.push({text:t.slice(n,r.index),isWord:!0}),e.push({text:r[0],isWord:!1}),n=s.lastIndex;return n<t.length&&e.push({text:t.slice(n),isWord:!0}),e}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}function kp(){const i="wxt-tts-highlight-styles";if(document.getElementById(i))return;const t=document.createElement("style");t.id=i,t.textContent=`
    .${sr} {
      transition: background 0.15s ease, color 0.15s ease;
      padding: 1px 2px;
      border-radius: 3px;
    }
    .${nr} {
      background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
      color: #333;
    }
    .${Cs} {
      position: relative;
    }
    .${Cs}::before {
      content: '🔊';
      position: absolute;
      left: -24px;
      top: 0;
      font-size: 14px;
      opacity: 0.7;
    }
  `,document.head.appendChild(t)}const _p="/translate_tts",rr=Pt("ParagraphTTS"),N=rr.log,we=rr.warn,Di=rr.error;function Np(i){ip(i)}const Rp={minSegmentChars:20,maxSegmentChars:150,doubleClickInterval:400,driftThreshold:500,speechRate:1,totalHighlightDelay:800,showDebugPanel:!1,enabled:!0};let xs=!1;function yl(){document.visibilityState==="visible"&&U.warmUp().catch(i=>{we("恢复音频系统失败:",i)})}function Mp(){xs||(xs=!0,document.addEventListener("visibilitychange",yl),N("页面可见性监听已设置"))}function Dp(){xs&&(xs=!1,document.removeEventListener("visibilitychange",yl),N("页面可见性监听已移除"))}class Op{constructor(t={}){u(this,"config");u(this,"highlighter");u(this,"lastClickTime",0);u(this,"lastClickElement",null);u(this,"state","idle");u(this,"currentParagraph",null);u(this,"currentText","");u(this,"currentPlaybackSession",null);u(this,"segments",[]);u(this,"currentSegmentIndex",0);u(this,"pendingTimeouts",[]);u(this,"clickCount",0);u(this,"handleClick",t=>{var a;if(!this.config.enabled)return;this.clickCount++,N(`📍 Click #${this.clickCount} - target:`,(a=t.target)==null?void 0:a.tagName);const e=this.findParagraph(t.target);if(!e){N("❌ 未找到有效段落元素");return}N("✓ 找到段落:",e.tagName,"- 文本长度:",e.innerText.length);const s=Date.now(),n=s-this.lastClickTime,r=e===this.lastClickElement;N(`时间间隔: ${n}ms, 同一元素: ${r}`),r&&n<=this.config.doubleClickInterval?(N("🎯 双击检测成功! 触发 TTS"),t.preventDefault(),t.stopPropagation(),this.handleDoubleClick(e),this.lastClickTime=0,this.lastClickElement=null):(N("单击记录，等待第二次点击..."),this.lastClickTime=s,this.lastClickElement=e)});u(this,"audioCache",new Map);this.config={...Rp,...t},this.highlighter=new Lp,Np(this.config.showDebugPanel??!1),N("构造函数 - 词边界服务可用:",Ie.isAvailable()),N("配置:",JSON.stringify(this.config)),kp(),N("样式已注入")}enable(){document.addEventListener("click",this.handleClick),N("✅ 服务已启用 - 监听 click 事件"),N("当前 URL:",window.location.href),N("User Agent:",navigator.userAgent),this.warmUpAudioSystem(),Mp()}warmUpAudioSystem(){U.warmUp().catch(t=>{we("音频预热失败:",t)})}disable(){document.removeEventListener("click",this.handleClick),this.stop(),Dp(),N("❌ 服务已禁用")}handleDoubleClick(t){N("handleDoubleClick - 当前状态:",this.state),this.state==="playing"||this.state==="paused"?(N("→ 停止播放"),this.stop()):(N("→ 开始新播放"),this.play(t))}async play(t){if(this.currentParagraph=t,this.currentText=this.getOriginalText(t),N("play() - 文本:",this.currentText.substring(0,50)+"..."),!this.currentText){we("文本为空，跳过");return}this.segments=this.segmentText(this.currentText),this.currentSegmentIndex=0,N(`切片完成: ${this.segments.length} 个片段`),this.segments.forEach((e,s)=>N(`  片段[${s}]: "${e.substring(0,30)}..."`)),N("准备高亮..."),this.highlighter.prepare(t),this.audioCache.clear(),this.preloadSegment(0),this.preloadSegment(1),N("开始播放第一个片段..."),await this.playSegment(this.currentSegmentIndex)}async playSegment(t){if(N(`playSegment(${t}) - 总共 ${this.segments.length} 个`),this.preloadSegment(t+1),t>=this.segments.length){N("所有片段播放完成"),this.stop();return}U.stop(this.currentPlaybackSession),this.currentPlaybackSession=null;const e=this.segments[t];this.state="playing",N(`播放片段[${t}]: "${e.substring(0,50)}..."`);let s=0;for(let n=0;n<t;n++)s+=this.segments[n].length+1;N("字符偏移:",s);try{const n=Math.floor(this.config.totalHighlightDelay/2);N(`延迟因子: Web Speech 启动延迟=${n}ms, 高亮延迟=${n}ms, 总延迟=${this.config.totalHighlightDelay}ms`),N("开始 Google TTS...");const r=this.startGoogleTTS(t,e),a=new Promise(c=>{const d=window.setTimeout(()=>{N(`Web Speech 延迟启动 (${n}ms 后)`),this.startShadowSpeech(e,s,n).then(c)},n);this.pendingTimeouts.push(d)}),[o,l]=await Promise.allSettled([r,a]);N("Google TTS 结果:",o.status),N("Web Speech 结果:",l.status)}catch(n){Di("playSegment 异常:",n),this.stop()}}startShadowSpeech(t,e,s){return new Promise(n=>{if(N("startShadowSpeech - 词边界服务可用:",Ie.isAvailable()),!Ie.isAvailable()){we("Web Speech API 不可用"),n();return}Ie.speakWithWordBoundary({text:t,rate:this.config.speechRate,lang:"en-US"},r=>{const a=e+r,o=window.setTimeout(()=>{this.state==="playing"&&this.highlighter.highlightByCharIndex(a)},s);this.pendingTimeouts.push(o)}).then(()=>{N("✓ 词边界检测结束"),n()}).catch(r=>{we("词边界检测错误:",r),n()})})}preloadSegment(t){if(t>=this.segments.length||this.audioCache.has(t))return;N(`预加载片段[${t}]...`);const e=this.segments[t],s=this.loadAudioBlob(e);this.audioCache.set(t,s)}getOrLoadAudio(t,e){if(this.audioCache.has(t))return N(`命中缓存片段[${t}]`),this.audioCache.get(t);N(`缓存未命中，直接加载片段[${t}]`);const s=this.loadAudioBlob(e);return this.audioCache.set(t,s),s}async startGoogleTTS(t,e,s){return N("Google TTS 准备播放, Index:",t),new Promise(n=>{let r=!1,a=null,o=!1;const l=()=>{r||(r=!0,a&&(clearTimeout(a),a=null),n())},c=()=>{r||(N("移动到下一个片段..."),this.clearPendingTimeouts(),Ie.cancel(),N("已取消词边界检测"),this.currentSegmentIndex++,this.currentSegmentIndex<this.segments.length?this.playSegment(this.currentSegmentIndex):this.stop(),l())};(async()=>{try{const d=await this.getOrLoadAudio(t,e);if(!d){we("Google TTS 返回空 blob"),c();return}N("Google TTS blob 大小:",d.size,"bytes");const h=await U.playBlob(d);this.currentPlaybackSession=h;const g=h.durationSeconds;N("✓ 音频解码完成，时长:",g,"s");const m=(g+5)*1e3;a=window.setTimeout(()=>{r||(we(`⚠️ 音频超时 (${m}ms)，强制跳到下一段`),U.stop(h),c())},m),s&&!o&&(o=!0,s()),await h.finished,N("✓ 音频播放结束 (adapter finished)"),this.currentPlaybackSession===h&&(this.currentPlaybackSession=null),c()}catch(d){Di("Google TTS 播放流程异常:",d),c()}})()})}async loadAudioBlob(t){const e=new URLSearchParams({ie:"UTF-8",client:"gtx",tl:"en",q:t}),s=`${_p}?${e.toString()}`;N(`fetchGoogleAudio: 文本长度=${t.length}, 前30字="${t.substring(0,30)}..."`),t.length>200&&we(`文本过长(${t.length} 字符)，Google TTS 可能限制 ~200 字符`);try{const n=await Qe.get(s);if(!n.ok)return Di("fetch 失败: HTTP 状态异常",n.status),null;const r=await n.blob();return r.size>0?(N("✓ 获取音频成功:",r.size,"bytes"),r):(Di("fetch 失败: 音频内容为空"),null)}catch(n){return Di("fetch 异常:",(n==null?void 0:n.message)||n),null}}pause(){this.state="paused",this.clearPendingTimeouts(),Ie.cancel(),U.stop(this.currentPlaybackSession),this.currentPlaybackSession=null,N("⏸ 已暂停")}resume(){if(this.state="playing",this.currentSegmentIndex<this.segments.length){this.playSegment(this.currentSegmentIndex);return}N("▶ 继续播放")}stop(){this.state="idle",this.clearPendingTimeouts(),Ie.cancel(),U.stop(this.currentPlaybackSession),this.currentPlaybackSession=null,this.highlighter.cleanup(),this.currentParagraph=null,this.currentText="",this.segments=[],this.currentSegmentIndex=0,N("⏹ 已停止")}clearPendingTimeouts(){const t=this.pendingTimeouts.length;for(const e of this.pendingTimeouts)window.clearTimeout(e);this.pendingTimeouts=[],N("清除 "+t+" 个待执行定时器")}segmentText(t){const{minSegmentChars:e,maxSegmentChars:s}=this.config,n=/([.。;；!！?？\n])/,r=t.split(n),a=[];let o="";for(let l=0;l<r.length;l++){const c=r[l];o.length+c.length<=s?o+=c:o.length>=e?(a.push(o.trim()),o=c):o+=c}return o.trim().length>0&&a.push(o.trim()),a.filter(l=>l.length>=e||a.length===1)}getOriginalText(t){const e=t.cloneNode(!0),s=[".wxt-translation-term",".illa-paragraph-translation","[data-translation]"];for(const r of s)e.querySelectorAll(r).forEach(o=>o.remove());const n=e.innerText.trim();return N(`getOriginalText: 原文长度 = ${n.length}, 排除翻译元素后`),n}findParagraph(t){let e=t,s=0;for(;e&&e!==document.body&&s<20;){const n=e.tagName.toLowerCase();if(["p","div","article","section","li","td","th","blockquote","h1","h2","h3","h4","h5","h6"].includes(n)&&e.innerText.trim().length>10)return N(`findParagraph: 深度 = ${s}, tag = ${n}, 长度 = ${e.innerText.length}`),e;e=e.parentElement,s++}return N(`findParagraph: 未找到，遍历了 ${s} 层`),null}getState(){return this.state}destroy(){this.disable()}}const Fp="/translate_a/single";async function Up(i,t="zh-CN"){const e=new URLSearchParams({client:"gtx",sl:"auto",tl:t,dt:"t",q:i}),s=`${Fp}?${e.toString()}`;try{const n=await Qe.get(s);if(!n)throw new Error("Google Translate API Error: httpClient returned null");const r=await n.json();if(Array.isArray(r)&&Array.isArray(r[0])){const a=r[0];let o="";for(const l of a)Array.isArray(l)&&l[0]&&(o+=l[0]);return{originalText:i,translatedText:o,detectedLanguage:r[2]}}throw new Error("Invalid response format from Google Translate API")}catch(n){throw console.error("[GoogleTranslateUtils] Translation failed:",n),n}}const $p={minSwipeDistance:80,maxSwipeTime:500,swipeDirection:"left"},Tl="zh-CN",ar="data-wxt-swipe-translated";class Hp{constructor(t={}){u(this,"config");u(this,"isEnabled",!1);u(this,"targetLanguage",Tl);u(this,"touchStartX",0);u(this,"touchStartY",0);u(this,"touchStartTime",0);u(this,"targetElement",null);u(this,"translationCache",new Map);u(this,"TRANSLATION_CONTAINER_CLASS","wxt-immersive-translation-container");u(this,"handleTouchStart",t=>{if(!this.isEnabled||t.touches.length!==1)return;const e=t.touches[0];this.touchStartX=e.clientX,this.touchStartY=e.clientY,this.touchStartTime=Date.now(),this.targetElement=this.findParagraphElement(t.target)});u(this,"handleTouchEnd",t=>{if(!this.isEnabled||t.changedTouches.length!==1)return;const e=t.changedTouches[0];this.processSwipe(e.clientX,e.clientY)});u(this,"handleMouseDown",t=>{this.isEnabled&&(this.touchStartX=t.clientX,this.touchStartY=t.clientY,this.touchStartTime=Date.now(),this.targetElement=this.findParagraphElement(t.target))});u(this,"handleMouseUp",t=>{this.isEnabled&&this.processSwipe(t.clientX,t.clientY)});this.config={...$p,...t}}enable(){this.isEnabled||(this.isEnabled=!0,document.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),document.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("mouseup",this.handleMouseUp))}disable(){this.isEnabled&&(this.isEnabled=!1,document.removeEventListener("touchstart",this.handleTouchStart),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mouseup",this.handleMouseUp))}updateSettings(t){this.targetLanguage=this.resolveTargetLanguage(t.nativeLanguage),t.leftSwipe||t.rightSwipe?(this.config.leftSwipe=t.leftSwipe,this.config.rightSwipe=t.rightSwipe,this.enable()):(this.config.leftSwipe=!1,this.config.rightSwipe=!1,this.disable())}processSwipe(t,e){const s=t-this.touchStartX,n=e-this.touchStartY,r=Date.now()-this.touchStartTime,a=Math.abs(s)>Math.abs(n)*2,o=Math.abs(s)>=this.config.minSwipeDistance,l=r<=this.config.maxSwipeTime;if(a&&o&&l&&this.targetElement){const c=s<0,d=s>0;c&&this.config.leftSwipe?this.handleLeftSwipe(this.targetElement):d&&this.config.rightSwipe&&this.handleRightSwipe(this.targetElement)}this.touchStartX=0,this.touchStartY=0,this.touchStartTime=0,this.targetElement=null}async handleLeftSwipe(t){const e=t.hasAttribute(ar),s=t.nextElementSibling,n=s&&s.classList.contains(this.TRANSLATION_CONTAINER_CLASS);if(e&&n){const r=s;r.style.display!=="none"?r.style.display="none":r.style.display="block"}else await this.performTranslation(t)}handleRightSwipe(t){const e=t.nextElementSibling;return e&&e.classList.contains(this.TRANSLATION_CONTAINER_CLASS)&&(e.style.display="none"),Promise.resolve()}async performTranslation(t){const e=this.extractSourceText(t);if(!e)return;const s=`${this.targetLanguage}::${e}`;t.style.opacity="0.6",t.style.transition="opacity 0.3s";try{let n="";this.translationCache.has(s)?n=this.translationCache.get(s):(n=(await Up(e,this.targetLanguage)).translatedText,this.translationCache.set(s,n)),this.showTranslation(t,n)}catch(n){console.error("[SwipeTranslation] 翻译失败:",n)}finally{t.style.opacity="1"}}extractSourceText(t){const e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),s=[];let n=e.nextNode();for(;n;)this.shouldSkipTextNode(n)||s.push(n.textContent||""),n=e.nextNode();return s.join("").replace(/\s+/g," ").trim()}shouldSkipTextNode(t){const e=t.parentElement;return e?!!(e.closest("script,style,noscript,template")||e.closest(".wxt-translation-term")||e.closest(`.${this.TRANSLATION_CONTAINER_CLASS}`)||e.closest(".illa-paragraph-translation")||e.closest("[data-translation]")):!1}resolveTargetLanguage(t){const e=t==null?void 0:t.trim().toLowerCase();return e?e==="zh"?"zh-CN":t.trim():Tl}showTranslation(t,e){t.setAttribute(ar,"true");let s=t.nextElementSibling;(!s||!s.classList.contains(this.TRANSLATION_CONTAINER_CLASS))&&(s=document.createElement("div"),s.className=this.TRANSLATION_CONTAINER_CLASS,s.style.marginTop="6px",s.style.marginBottom="12px",s.style.color="rgb(100, 116, 139)",s.style.fontWeight="500",s.style.fontSize="0.95em",s.style.lineHeight="1.5",t.parentNode&&t.parentNode.insertBefore(s,t.nextSibling)),s.innerText=e,s.style.display="block"}restoreOriginal(t){const e=t.nextElementSibling;e&&e.classList.contains(this.TRANSLATION_CONTAINER_CLASS)&&e.remove(),t.removeAttribute(ar)}findParagraphElement(t){let e=t;for(;e&&e!==document.body;){const s=e.tagName.toLowerCase();if(["p","div","article","section","li","blockquote","h1","h2","h3","h4","h5","h6"].includes(s)&&e.innerText.trim().length>10)return e;e=e.parentElement}return null}updateConfig(t){this.config={...this.config,...t}}destroy(){this.disable(),this.translationCache.clear()}}const ti=Pt("SPANavigationDetector");class Bp{constructor(){u(this,"lastUrl");u(this,"urlPollInterval",null);u(this,"callbacks",new Set);u(this,"isDestroyed",!1);u(this,"originalPushState");u(this,"originalReplaceState");u(this,"domObserver",null);u(this,"domChangeAccumulator",0);u(this,"domChangeTimer",null);u(this,"DOM_CHANGE_THRESHOLD",50);u(this,"DOM_CHANGE_DEBOUNCE",500);u(this,"handlePopState",()=>{const t=window.location.href;this.lastUrl!==t&&this.handleNavigation(t,this.lastUrl,"popstate")});u(this,"handleHashChange",()=>{const t=window.location.href;this.lastUrl!==t&&this.handleNavigation(t,this.lastUrl,"hashchange")});this.lastUrl=window.location.href,this.originalPushState=history.pushState.bind(history),this.originalReplaceState=history.replaceState.bind(history)}start(){this.isDestroyed||(ti.log("启动SPA导航检测"),this.interceptHistoryMethods(),window.addEventListener("popstate",this.handlePopState),window.addEventListener("hashchange",this.handleHashChange),this.startUrlPolling(),this.startDomObserver())}stop(){this.isDestroyed=!0,history.pushState=this.originalPushState,history.replaceState=this.originalReplaceState,window.removeEventListener("popstate",this.handlePopState),window.removeEventListener("hashchange",this.handleHashChange),this.urlPollInterval&&(clearInterval(this.urlPollInterval),this.urlPollInterval=null),this.domObserver&&(this.domObserver.disconnect(),this.domObserver=null),this.domChangeTimer&&(clearTimeout(this.domChangeTimer),this.domChangeTimer=null),this.callbacks.clear(),ti.log("SPA导航检测已停止")}onNavigate(t){return this.callbacks.add(t),()=>this.callbacks.delete(t)}interceptHistoryMethods(){history.pushState=(t,e,s)=>{const n=window.location.href;this.originalPushState.call(history,t,e,s);const r=window.location.href;n!==r&&this.handleNavigation(r,n,"pushState")},history.replaceState=(t,e,s)=>{const n=window.location.href;this.originalReplaceState.call(history,t,e,s);const r=window.location.href;n!==r&&this.handleNavigation(r,n,"replaceState")}}startUrlPolling(){this.urlPollInterval=window.setInterval(()=>{const t=window.location.href;this.lastUrl!==t&&this.handleNavigation(t,this.lastUrl,"polling")},500)}startDomObserver(){ti.log("DOM 变化观察已禁用（避免与翻译插入冲突）")}handleNavigation(t,e,s){ti.log(`检测到导航 [${s}]: ${e} -> ${t}`),this.lastUrl=t,this.callbacks.forEach(n=>{try{n(t,e)}catch(r){ti.error("导航回调执行失败:",r)}})}handleContentReplacement(){const t=window.location.href;this.callbacks.forEach(e=>{try{e(t,t)}catch(s){ti.error("内容替换回调执行失败:",s)}})}}let ei=null;function Wp(){return ei||(ei=new Bp),ei}function zp(){ei&&(ei.stop(),ei=null)}const Gp="https://texttospeech.googleapis.com/v1beta1/text:synthesize",or={languageCode:"en-US",name:"en-US-Standard-H"},jp={audioEncoding:"MP3"},Vp=1e3,qp=80,Yp=[`
`,".","?","!",";"],Kp=300,El=1,Cl=2,Jp=3e4,Xp="Hello, this is a test.",Ut=Pt("FullTextTTSProvider");class Qp{constructor(t){u(this,"config");u(this,"customParams",{});u(this,"voiceName",or.name);this.config=t,this.parseCustomParams()}parseCustomParams(){if(this.config.customParams)try{this.customParams=JSON.parse(this.config.customParams)}catch(t){Ut.warn("解析自定义参数失败:",t),this.customParams={}}}updateConfig(t){this.config=t,this.parseCustomParams()}setVoiceName(t){this.voiceName=t,Ut.log(`语音模型已更新: ${t}`)}async synthesize(t){var a,o;const e=this.config.apiEndpoint||Gp,s=`${e}?key=${this.config.apiKey}`;let n=this.voiceName;try{const{StorageService:l}=await Promise.resolve().then(()=>qo),d=await l.getInstance().getUserSettings();Ut.log("读取存储中的语音模型设置:",{storedVoiceName:d==null?void 0:d.fullTextTTSVoiceName,defaultVoiceName:this.voiceName}),d!=null&&d.fullTextTTSVoiceName?(n=d.fullTextTTSVoiceName,Ut.log("使用存储中的语音模型:",n)):Ut.log("未找到存储中的语音模型设置，使用默认值:",n)}catch(l){Ut.warn("读取语音模型设置失败:",String(l))}const r={input:{ssml:t},voice:{languageCode:or.languageCode,name:n||or.name,...this.customParams.voice||{}},audioConfig:{audioEncoding:jp.audioEncoding,...this.customParams.audioConfig||{}}};Ut.log("发送 TTS 请求:",{endpoint:e,ssmlLength:t.length,voice:r.voice});try{const l=await Vo.request({url:s,method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r),timeoutMs:Jp,retries:1});if(!l.ok){const h=((a=(await l.json().catch(()=>({}))).error)==null?void 0:a.message)||l.statusText;throw new Error(`TTS API 错误 (${l.status}): ${h}`)}const c=await l.json();if(!c.audioContent)throw new Error("TTS API 返回空音频内容");return Ut.log("TTS 合成成功:",{audioLength:c.audioContent.length,timepointsCount:((o=c.timepoints)==null?void 0:o.length)||0}),{audioContent:c.audioContent,timepoints:c.timepoints||[]}}catch(l){throw l instanceof Error?l.name==="AbortError"||l.message.toLowerCase().includes("aborted")?new Error("TTS API 请求超时"):l:new Error("TTS API 请求失败")}}async synthesizeToArrayBuffer(t){const e=await this.synthesize(t),s=atob(e.audioContent),n=new Uint8Array(s.length);for(let o=0;o<s.length;o++)n[o]=s.charCodeAt(o);const r=n.buffer;let a=0;try{a=await U.decodeDuration(r),Ut.log(`音频时长: ${a.toFixed(2)}s`)}catch(o){a=r.byteLength/16e3,Ut.warn(`Web Audio API 解码失败，估算时长: ${a.toFixed(2)}s`,o)}return{audioBuffer:r,audioDuration:a}}async testConnection(){try{const t=`<speak>${Xp}</speak>`;return await this.synthesize(t),{success:!0}}catch(t){const e=t instanceof Error?t.message:"未知错误";return Ut.error("连接测试失败:",e),{success:!1,error:e}}}getConfig(){return{...this.config}}}let Ps=null;function Zp(i){return Ps?Ps.updateConfig(i):Ps=new Qp(i),Ps}const $t=Pt("AudioCache");class tf{constructor(t){u(this,"cache",new Map);u(this,"pendingRequests",new Map);u(this,"provider");u(this,"slices",[]);u(this,"isPaused",!1);u(this,"currentPlayingIndex",0);this.provider=t}setSlices(t){this.slices=t,this.clear()}get(t){return this.cache.get(t)}has(t){return this.cache.has(t)}isLoading(t){return this.pendingRequests.has(t)}async getOrLoad(t){const e=this.cache.get(t);if(e)return $t.log(`缓存命中: slice ${t}`),e;const s=this.pendingRequests.get(t);return s?($t.log(`等待加载中: slice ${t}`),s):this.load(t)}async load(t){if(t<0||t>=this.slices.length)return null;const e=this.slices[t];$t.log(`开始加载: slice ${t}, ssml 长度: ${e.ssml.length}`);const s=(async()=>{try{const{audioBuffer:n,audioDuration:r}=await this.provider.synthesizeToArrayBuffer(e.ssml),a={sliceIndex:t,audioBuffer:n,audioDuration:r,blob:new Blob([n],{type:"audio/mpeg"})};return this.cache.set(t,a),$t.log(`加载完成: slice ${t}, 时长: ${r.toFixed(2)}s`),this.isPaused||this.prefetchNext(t),a}catch(n){return $t.error(`加载失败: slice ${t}`,n),null}finally{this.pendingRequests.delete(t)}})();return this.pendingRequests.set(t,s),s}prefetchNext(t){const e=t+1,s=this.currentPlayingIndex+Cl;if(e>s){$t.log(`预加载已达到限制 (当前播放=${this.currentPlayingIndex}, 最大预加载=${s}), 跳过 slice ${e}`);return}e<this.slices.length&&!this.has(e)&&!this.isLoading(e)&&($t.log(`预加载: slice ${e}`),this.load(e))}prefetch(t){if(this.currentPlayingIndex=t,this.isPaused){$t.log("暂停状态，跳过预加载");return}const e=this.slices.length;for(let s=1;s<=El;s++){const n=t-s;n>=0&&!this.has(n)&&!this.isLoading(n)&&this.load(n)}for(let s=1;s<=Cl;s++){const n=t+s;n<e&&!this.has(n)&&!this.isLoading(n)&&this.load(n)}}evict(t){for(const[e]of this.cache)e<t-El&&($t.log(`清理过期缓存: slice ${e}`),this.cache.delete(e));this.prefetch(t)}setPaused(t){this.isPaused=t,$t.log(`暂停状态: ${t}`)}clear(){this.cache.clear(),$t.log("缓存已清空")}getStats(){return{cached:this.cache.size,pending:this.pendingRequests.size,total:this.slices.length}}}const _e=Pt("AudioPlayer");class ef{constructor(){u(this,"currentSession",null);u(this,"currentBuffer",null);u(this,"currentDuration",0);u(this,"pauseTime",0);u(this,"isPlaying",!1);u(this,"isPaused",!1);u(this,"callbacks",{});u(this,"timeUpdateInterval",null)}setCallbacks(t){this.callbacks=t}async play(t,e=0){var s,n;this.stopInternal(!1);try{await U.warmUp(),this.currentBuffer=t.slice(0),this.currentSession=await U.playArrayBuffer(this.currentBuffer,e),this.currentDuration=this.currentSession.durationSeconds,this.isPlaying=!0,this.isPaused=!1,this.pauseTime=e;const r=this.currentSession;r.finished.then(()=>{this.currentSession===r&&this.isPlaying&&!this.isPaused&&this.onPlaybackEnded()}),this.startTimeUpdate(),_e.log(`开始播放: duration=${this.currentDuration.toFixed(2)}s, offset=${e.toFixed(2)}s`)}catch(r){throw _e.error("音频播放失败:",r),(n=(s=this.callbacks).onError)==null||n.call(s,r instanceof Error?r:new Error("音频播放失败")),r}}pause(){!this.currentSession||!this.isPlaying||this.isPaused||(this.pauseTime=this.currentSession.getCurrentTime(),this.currentSession.pause(),this.isPaused=!0,this.stopTimeUpdate(),_e.log(`暂停播放: pauseTime=${this.pauseTime.toFixed(2)}s`))}resume(){!this.currentSession||!this.isPaused||(_e.log(`恢复播放: from=${this.pauseTime.toFixed(2)}s`),this.currentSession.resume(),this.isPaused=!1,this.isPlaying=!0,this.startTimeUpdate())}stop(){this.stopInternal(!0)}stopInternal(t){this.currentSession&&(U.stop(this.currentSession),this.currentSession=null),this.isPlaying=!1,this.isPaused=!1,this.pauseTime=0,this.currentDuration=0,this.stopTimeUpdate(),t&&_e.log("停止播放")}onPlaybackEnded(){var t,e;this.isPlaying=!1,this.isPaused=!1,this.pauseTime=this.currentDuration,this.stopTimeUpdate(),this.currentSession=null,_e.log("播放结束"),(e=(t=this.callbacks).onEnded)==null||e.call(t)}getCurrentTime(){return this.currentSession?this.currentSession.getCurrentTime():this.pauseTime}getDuration(){return this.currentDuration}getIsPlaying(){return this.isPlaying&&!this.isPaused}getIsPaused(){return this.isPaused}startTimeUpdate(){this.stopTimeUpdate(),this.timeUpdateInterval=setInterval(()=>{this.callbacks.onTimeUpdate&&this.callbacks.onTimeUpdate(this.getCurrentTime(),this.getDuration())},100)}stopTimeUpdate(){this.timeUpdateInterval&&(clearInterval(this.timeUpdateInterval),this.timeUpdateInterval=null)}destroy(){this.stop(),this.currentBuffer=null,_e.log("播放器已销毁")}}let ii=null;function sf(){return ii||(ii=new ef),ii}function nf(){ii&&(ii.destroy(),ii=null)}const xl=Pt("TextSlicer");class rf{constructor(t=Vp){u(this,"maxLength");this.maxLength=t}slice(t,e=0){const s=t.trim();return s?s.length<=this.maxLength?[this.createSlice(s,e)]:this.recursiveSplit(s,e):[]}recursiveSplit(t,e){if(t.length<=this.maxLength)return[this.createSlice(t,e)];const s=Math.floor(t.length/2),n=this.findSplitPoint(t,s);if(n===-1){xl.warn("无法找到合适的切分点，强制在中心切分");const d=t.substring(0,s),h=t.substring(s);return[...this.recursiveSplit(d,e),...this.recursiveSplit(h,e+s)]}const r=t.substring(0,n+1).trim(),a=t.substring(n+1).trim(),o=this.recursiveSplit(r,e),l=e+t.indexOf(a,n),c=this.recursiveSplit(a,l);return[...o,...c]}findSplitPoint(t,e){const s=Math.min(qp,Math.floor(t.length/2));for(const n of Yp){for(let r=0;r<=s;r++){const a=e+r;if(a<t.length&&t[a]===n)return a}for(let r=1;r<=s;r++){const a=e-r;if(a>=0&&t[a]===n)return a}}for(let n=0;n<=s;n++){const r=e+n;if(r<t.length&&t[r]===" ")return r;const a=e-n;if(a>=0&&t[a]===" ")return a}return-1}createSlice(t,e){const s=this.splitIntoSentences(t,e),n=this.buildSSML(t);return xl.log(`创建切片: ${s.length} 句, 时长估算模式`),{text:t,startOffset:e,endOffset:e+t.length,ssml:n,marks:[],sentences:s}}splitIntoSentences(t,e){const s=[],n=/[^.!?;]*[.!?;]+/g;let r,a=0;for(;(r=n.exec(t))!==null;){const l=r[0].trim();if(l){const c=t.indexOf(r[0],a);s.push({text:l,startOffset:e+c,endOffset:e+c+r[0].length,wordCount:this.countWords(l)}),a=c+r[0].length}}const o=t.substring(a).trim();return o&&s.push({text:o,startOffset:e+a,endOffset:e+t.length,wordCount:this.countWords(o)}),s.length===0&&s.push({text:t,startOffset:e,endOffset:e+t.length,wordCount:this.countWords(t)}),s}countWords(t){return t.split(/\s+/).filter(e=>e.length>0).length}buildSSML(t){const e=this.escapeSSML(t);return`<speak><break time="${Kp}ms"/>${e}</speak>`}escapeSSML(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}const af=Pt("DOMTextExtractor"),of=[".illa-paragraph-translation",".illa-paragraph-content","[data-illa-translated]",".translation-overlay-text",".translation-tooltip-container",".translation-tooltip-content","[data-translation-overlay]",".wxt-translation-term",".wxt-original-word",".wxt-pronunciation-tooltip","[data-wxt-text-processed]",".fulltext-tts-word",".fulltext-tts-highlight","script","style","noscript","input","textarea","select","button","img","video","audio","canvas","svg","[hidden]",'[aria-hidden="true"]',"nav","header","footer","aside","code","pre"],lf=["p","article > div","main > div",".content > div","section > div","h1","h2","h3","h4","h5","h6","li","blockquote"];class cf{constructor(t={}){u(this,"textSlicer");u(this,"excludeSelectors");u(this,"minTextLength");this.textSlicer=new rf,this.minTextLength=t.minTextLength??20,this.excludeSelectors=[...of,...t.additionalExcludeSelectors||[]]}extractParagraphs(){const t=[],e=new Set,s=this.findCandidateElements();for(const n of s){if(this.shouldExclude(n))continue;const r=this.extractText(n);if(!r||r.length<this.minTextLength)continue;const a=r.trim().substring(0,100);if(e.has(a))continue;e.add(a);const o=this.textSlicer.slice(r);t.push({element:n,text:r,slices:o})}return af.log(`提取到 ${t.length} 个段落`),t}findCandidateElements(){const t=[];for(const e of lf){const s=document.querySelectorAll(e);for(const n of s)t.includes(n)||t.push(n)}return t.sort((e,s)=>{const n=e.compareDocumentPosition(s);return n&Node.DOCUMENT_POSITION_FOLLOWING?-1:n&Node.DOCUMENT_POSITION_PRECEDING?1:0}),t}shouldExclude(t){for(const s of this.excludeSelectors)if(t.matches(s))return!0;return!!(t.closest(this.excludeSelectors.join(","))||!this.isVisible(t))}isVisible(t){const e=window.getComputedStyle(t);if(e.display==="none"||e.visibility==="hidden"||e.opacity==="0")return!1;const s=t.getBoundingClientRect();return!(s.width===0||s.height===0)}extractText(t){const e=t.cloneNode(!0);for(const n of this.excludeSelectors){const r=e.querySelectorAll(n);for(const a of r)a.remove()}let s=e.textContent||"";return s=s.replace(/\s+/g," ").trim(),s}getParagraphInfo(t){if(this.shouldExclude(t))return null;const e=this.extractText(t);if(!e||e.length<this.minTextLength)return null;const s=this.textSlicer.slice(e);return{element:t,text:e,slices:s}}}let lr=null;function uf(i){return lr||(lr=new cf(i)),lr}const df=Pt("WordTimingEstimator"),hf={",":.15,";":.15,":":.1,"—":.12,"-":.05,"...":.2,"…":.2},gf=6,pf=1.25,ff=1.1,mf=.95;function bf(i,t){if(!i.trim()||t<=0)return[];const e=Sf(i);if(e.length===0)return[];const s=e.map((o,l)=>({word:o.word,rawWeight:wf(o.word,l,e.length),normalizedDuration:0,startTime:0})),n=s.reduce((o,l)=>o+l.rawWeight,0);let r=0;for(let o=0;o<s.length;o++)s[o].normalizedDuration=s[o].rawWeight/n*t,s[o].startTime=r,r+=s[o].normalizedDuration;const a=s.map((o,l)=>({word:o.word,startTime:o.startTime,duration:o.normalizedDuration,charOffset:e[l].charOffset}));return df.log(`估算 ${e.length} 个词时间, 句时长=${t.toFixed(2)}s`),a}function Sf(i){const t=[],e=/\S+/g;let s;for(;(s=e.exec(i))!==null;)t.push({word:s[0],charOffset:s.index});return t}function wf(i,t,e){let s=1;i.replace(/[^a-zA-Z0-9\u4e00-\u9fff]/g,"").length>gf&&(s*=pf),t===0?s*=ff:t===e-1&&(s*=mf);for(const[r,a]of Object.entries(hf))if(i.includes(r)){s+=a/.4;break}return s}function vf(i){const t=[];for(const e of i)for(const s of e.wordTimings)t.push({word:s.word,globalStartTime:e.sentenceStartTime+s.startTime,globalCharOffset:e.globalCharOffset+s.charOffset});return t}function yf(i,t){if(t.length===0||i<0)return-1;let e=0,s=t.length-1,n=-1;for(;e<=s;){const r=Math.floor((e+s)/2);t[r].globalStartTime<=i?(n=r,e=r+1):s=r-1}return n}const At=Pt("HighlightAnimator"),cr="fulltext-tts-highlight",ur="fulltext-tts-word",dr="fulltext-tts-word-active";function Tf(){const i="fulltext-tts-highlight-styles";if(document.getElementById(i))return;const t=document.createElement("style");t.id=i,t.textContent=`
    .${cr} {
      background: linear-gradient(90deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%);
      border-radius: 4px;
      padding: 2px 4px;
    }
    .${ur} {
      display: inline;
      transition: background 0.15s ease, color 0.15s ease;
      border-radius: 3px;
    }
    .${dr} {
      background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
      color: #333;
      padding: 1px 2px;
    }
  `,document.head.appendChild(t),At.log("高亮样式已注入 (段落背景 + 走字渐变)")}class Ef{constructor(){u(this,"currentElement",null);u(this,"originalHTML","");u(this,"slice",null);u(this,"timepoints",[]);u(this,"audioDuration",0);u(this,"globalWordTimings",[]);u(this,"currentWordIndex",-1);u(this,"wordSpans",[]);u(this,"enableWordLevel",!0);u(this,"animationFrame",null);u(this,"isPaused",!1);u(this,"currentTimeGetter",null);Tf()}startSync(t,e,s,n,r=0,a=!0){this.stop(),this.currentElement=t,this.originalHTML=t.innerHTML,this.slice=e,this.timepoints=s,this.audioDuration=r,this.currentTimeGetter=n,this.isPaused=!1,this.enableWordLevel=a,t.classList.add(cr),a&&this.setupWordLevelHighlight(e,s,r),this.startAnimationLoop(),this.scrollToElement(),At.log("开始高亮同步:",{text:e.text.substring(0,50)+"...",timepointsCount:s.length,wordCount:this.globalWordTimings.length,enableWordLevel:a})}setupWordLevelHighlight(t,e,s){const n=t.sentences||[];if(n.length===0){At.warn("无句子信息，跳过词级高亮");return}const r=this.calculateSentenceDurations(n,e,s),a=[];let o=0;for(let l=0;l<n.length;l++){const c=n[l],d=r[l]||0,h=bf(c.text,d);a.push({sentenceStartTime:o,wordTimings:h,globalCharOffset:c.startOffset}),o+=d}this.globalWordTimings=vf(a),At.log(`词级时间计算完成: ${this.globalWordTimings.length} 个词`),this.wrapWordsInDOM()}calculateSentenceDurations(t,e,s){const n=t.reduce((a,o)=>a+o.wordCount,0);if(n===0){const a=s/Math.max(t.length,1);return t.map(()=>a)}const r=[];for(const a of t){const o=a.wordCount/n;r.push(s*o)}return At.log(`句子时长 (词数估算): [${r.map(a=>a.toFixed(2)).join(", ")}]s, 总时长: ${s.toFixed(2)}s`),r}wrapWordsInDOM(){var o,l;if(!this.currentElement||this.globalWordTimings.length===0)return;const t=((o=this.slice)==null?void 0:o.text)||"";let e="",s=0;const n=this.globalWordTimings.map((c,d)=>({...c,originalIndex:d}));n.sort((c,d)=>c.globalCharOffset-d.globalCharOffset);for(const c of n){const d=c.globalCharOffset-(((l=this.slice)==null?void 0:l.startOffset)||0);d>s&&(e+=this.escapeHTML(t.substring(s,d)));const h=d+c.word.length,g=t.substring(d,h);e+=`<span class="${ur}" data-word-index="${c.originalIndex}">${this.escapeHTML(g)}</span>`,s=h}s<t.length&&(e+=this.escapeHTML(t.substring(s))),this.currentElement.innerHTML=e,this.wordSpans=new Array(this.globalWordTimings.length);const r=this.currentElement.querySelectorAll(`.${ur}`);r.forEach(c=>{const d=parseInt(c.dataset.wordIndex||"-1",10);d>=0&&d<this.wordSpans.length&&(this.wordSpans[d]=c)});const a=this.wordSpans.filter(c=>!c).length;a>0&&At.warn(`[DEBUG] 词映射异常: ${a} 个词未找到 span 元素`),At.log(`DOM 包装完成: ${r.length} 个词 span, 映射 ${this.wordSpans.length} 个`)}escapeHTML(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}startAnimationLoop(){const t=()=>{if(!this.currentTimeGetter||this.isPaused)return;const e=this.currentTimeGetter();this.updateHighlight(e),this.animationFrame=requestAnimationFrame(t)};this.animationFrame=requestAnimationFrame(t)}updateHighlight(t){var s;if(!this.enableWordLevel||this.globalWordTimings.length===0)return;const e=yf(t,this.globalWordTimings.map(n=>({globalStartTime:n.globalStartTime})));if(e!==this.currentWordIndex){if(this.currentWordIndex>=0&&this.currentWordIndex<this.wordSpans.length){const n=this.wordSpans[this.currentWordIndex];n&&n.classList.remove(dr)}if(e>=0&&e<this.wordSpans.length){const n=this.wordSpans[e];if(n){n.classList.add(dr);const r=e-this.currentWordIndex;if(e%10===0||r>1){const l=((s=this.globalWordTimings[e])==null?void 0:s.word)||"?";At.log(`[HIGHLIGHT] 词[${e}] "${l}" @ ${t.toFixed(2)}s, 跳跃=${r}`)}const a=n.getBoundingClientRect();a.top>=0&&a.bottom<=window.innerHeight||n.scrollIntoView({behavior:"smooth",block:"center"})}else At.warn(`[DEBUG] 词[${e}] span 为空! 时间=${t.toFixed(2)}s`)}this.currentWordIndex=e}}pause(){this.isPaused||(this.isPaused=!0,this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),At.log("高亮暂停"))}resume(){this.isPaused&&(this.isPaused=!1,this.startAnimationLoop(),At.log("高亮恢复"))}stop(){this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.currentElement&&this.originalHTML&&(this.currentElement.innerHTML=this.originalHTML,this.currentElement.classList.remove(cr)),this.currentElement=null,this.originalHTML="",this.slice=null,this.timepoints=[],this.audioDuration=0,this.globalWordTimings=[],this.currentWordIndex=-1,this.wordSpans=[],this.isPaused=!1,this.currentTimeGetter=null,At.log("高亮停止")}scrollToElement(){this.currentElement&&this.currentElement.scrollIntoView({behavior:"smooth",block:"center"})}getCurrentElement(){return this.currentElement}isSyncing(){return this.currentElement!==null&&!this.isPaused}}let hr=null;function Cf(){return hr||(hr=new Ef),hr}const rt=Pt("FullTextTTSService");class xf{constructor(){u(this,"state","IDLE");u(this,"paragraphs",[]);u(this,"currentParagraphIndex",0);u(this,"currentSliceIndex",0);u(this,"provider",null);u(this,"audioCache",null);u(this,"audioPlayer",null);u(this,"textExtractor",null);u(this,"highlightAnimator",null);u(this,"config",null);u(this,"stateChangeCallbacks",[]);u(this,"positionUpdateCallbacks",[]);this.textExtractor=uf(),this.audioPlayer=sf(),this.highlightAnimator=Cf(),this.audioPlayer.setCallbacks({onEnded:()=>this.onSliceEnded(),onTimeUpdate:(t,e)=>this.onTimeUpdate(t,e),onError:t=>this.onError(t)})}initialize(t){this.config=t,this.provider=Zp(t),this.audioCache=new tf(this.provider),rt.log("服务已初始化")}updateConfig(t){this.config=t,this.provider&&this.provider.updateConfig(t),rt.log("配置已更新")}async startFullTextReading(){if(!this.provider||!this.audioCache)throw new Error("服务未初始化");if(this.paragraphs=this.textExtractor.extractParagraphs(),this.paragraphs.length===0){rt.warn("未找到可朗读的段落");return}rt.log(`开始全文朗读: ${this.paragraphs.length} 个段落`),this.currentParagraphIndex=0,this.currentSliceIndex=0;const t=this.paragraphs.flatMap(e=>e.slices);this.audioCache.setSlices(t),await this.playCurrentSlice()}async playCurrentSlice(){var n;if(!this.audioCache||!this.audioPlayer)return;const t=this.getGlobalSliceIndex(),e=this.paragraphs[this.currentParagraphIndex],s=e==null?void 0:e.slices[this.currentSliceIndex];if(!e||!s){rt.log("播放完成"),this.setState("IDLE");return}rt.log(`播放: 段落 ${this.currentParagraphIndex+1}/${this.paragraphs.length}, 切片 ${this.currentSliceIndex+1}/${e.slices.length}`),this.setState("LOADING");try{const r=await this.audioCache.getOrLoad(t);if(!r)throw new Error("加载音频失败");await this.audioPlayer.play(r.audioBuffer),(n=this.highlightAnimator)==null||n.startSync(e.element,s,[],()=>{var a;return((a=this.audioPlayer)==null?void 0:a.getCurrentTime())||0},r.audioDuration,!0),this.setState("PLAYING"),this.audioCache.prefetch(t)}catch(r){throw rt.error("播放失败:",r),this.setState("IDLE"),r}}pause(){var t,e,s;this.state==="PLAYING"&&((t=this.audioPlayer)==null||t.pause(),(e=this.highlightAnimator)==null||e.pause(),(s=this.audioCache)==null||s.setPaused(!0),this.setState("PAUSED"),rt.log("已暂停"))}resume(){var t,e,s;this.state==="PAUSED"&&((t=this.audioPlayer)==null||t.resume(),(e=this.highlightAnimator)==null||e.resume(),(s=this.audioCache)==null||s.setPaused(!1),this.setState("PLAYING"),rt.log("已恢复"))}stop(){var t,e,s,n;(t=this.audioPlayer)==null||t.stop(),(e=this.highlightAnimator)==null||e.stop(),(s=this.audioCache)==null||s.clear(),(n=this.audioCache)==null||n.setPaused(!1),this.currentParagraphIndex=0,this.currentSliceIndex=0,this.paragraphs=[],this.setState("IDLE"),rt.log("已停止")}async previousParagraph(){var t,e;if(this.currentParagraphIndex<=0){rt.log("已是第一段");return}(t=this.audioPlayer)==null||t.stop(),(e=this.highlightAnimator)==null||e.stop(),this.currentParagraphIndex--,this.currentSliceIndex=0,await this.playCurrentSlice()}async nextParagraph(){var t,e;if(this.currentParagraphIndex>=this.paragraphs.length-1){rt.log("已是最后一段"),this.stop();return}(t=this.audioPlayer)==null||t.stop(),(e=this.highlightAnimator)==null||e.stop(),this.currentParagraphIndex++,this.currentSliceIndex=0,await this.playCurrentSlice()}async onSliceEnded(){var s;if(this.state!=="PLAYING")return;const t=this.paragraphs[this.currentParagraphIndex];if(!t){this.stop();return}const e=this.getGlobalSliceIndex();if((s=this.audioCache)==null||s.evict(e),this.currentSliceIndex++,this.currentSliceIndex>=t.slices.length&&(this.currentParagraphIndex++,this.currentSliceIndex=0,this.currentParagraphIndex>=this.paragraphs.length)){rt.log("全部播放完成"),this.stop();return}await this.playCurrentSlice()}onTimeUpdate(t,e){}onError(t){rt.error("播放错误:",t),this.setState("IDLE")}getGlobalSliceIndex(){let t=0;for(let e=0;e<this.currentParagraphIndex;e++)t+=this.paragraphs[e].slices.length;return t+this.currentSliceIndex}setState(t){if(this.state===t)return;const e=this.state;this.state=t,rt.log(`状态变更: ${e} → ${t}`);for(const s of this.stateChangeCallbacks)s(t)}getState(){return this.state}getProgress(){return{paragraphIndex:this.currentParagraphIndex,sliceIndex:this.currentSliceIndex,charOffset:0,totalParagraphs:this.paragraphs.length}}onStateChange(t){return this.stateChangeCallbacks.push(t),()=>{const e=this.stateChangeCallbacks.indexOf(t);e>-1&&this.stateChangeCallbacks.splice(e,1)}}onPositionUpdate(t){return this.positionUpdateCallbacks.push(t),()=>{const e=this.positionUpdateCallbacks.indexOf(t);e>-1&&this.positionUpdateCallbacks.splice(e,1)}}destroy(){this.stop(),nf(),this.provider=null,this.audioCache=null,this.audioPlayer=null,this.stateChangeCallbacks=[],this.positionUpdateCallbacks=[],rt.log("服务已销毁")}}let si=null;function Oi(){return si||(si=new xf),si}function Pf(){si&&(si.destroy(),si=null)}const St=Pt("TTSBar"),Fi="fulltext-tts-bar-container",Af=(i,t,e=!0)=>{if(i)return`
      <div id="${Fi}" class="fulltext-tts-bar-collapsed">
        <button class="fulltext-tts-expand-btn" title="展开TTS底栏">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m18 15-6-6-6 6"/>
          </svg>
        </button>
      </div>
    `;const s=t==="PLAYING",n=t==="LOADING",r=t==="LOADING"||!e;return`
    <div id="${Fi}" class="fulltext-tts-bar">
      <!-- 左侧: 倍速 (占位) -->
      <div class="fulltext-tts-bar-left">
        <button class="fulltext-tts-speed-btn" disabled title="倍速 (开发中)">
          1.0x
        </button>
      </div>

      <!-- 中间: 播放控制 -->
      <div class="fulltext-tts-bar-center">
        <button class="fulltext-tts-control-btn" data-action="prev" ${r?"disabled":""} title="上一段">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="19 20 9 12 19 4 19 20"/>
            <line x1="5" x2="5" y1="19" y2="5"/>
          </svg>
        </button>
        <button class="fulltext-tts-play-btn ${e?"":"disabled"}" data-action="play" ${r?"disabled":""} title="${e?s?"暂停":"播放":"请先配置TTS API"}">
          ${n?'<svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>':s?'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>'}
        </button>
        <button class="fulltext-tts-control-btn" data-action="next" ${r?"disabled":""} title="下一段">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 4 15 12 5 20 5 4"/>
            <line x1="19" x2="19" y1="5" y2="19"/>
          </svg>
        </button>
      </div>

      <!-- 右侧: 设置和收起 -->
      <div class="fulltext-tts-bar-right">
        <button class="fulltext-tts-control-btn" data-action="settings" title="设置">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
        </button>
        <button class="fulltext-tts-control-btn" data-action="collapse" title="收起">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </button>
      </div>
    </div>
  `},If=`
  .fulltext-tts-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 56px;
    background: rgba(30, 30, 30, 0.95);
    backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    z-index: 99999;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .fulltext-tts-bar-collapsed {
    position: fixed;
    bottom: 16px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 99999;
  }

  .fulltext-tts-expand-btn {
    width: 44px;
    height: 28px;
    background: rgba(30, 30, 30, 0.9);
    border: none;
    border-radius: 14px;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .fulltext-tts-expand-btn:hover {
    background: rgba(50, 50, 50, 0.95);
    color: white;
    transform: translateY(-2px);
  }

  .fulltext-tts-bar-left,
  .fulltext-tts-bar-right {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 100px;
  }

  .fulltext-tts-bar-right {
    justify-content: flex-end;
  }

  .fulltext-tts-bar-center {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .fulltext-tts-speed-btn {
    padding: 4px 10px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 4px;
    color: rgba(255, 255, 255, 0.5);
    font-size: 12px;
    cursor: not-allowed;
  }

  .fulltext-tts-control-btn {
    width: 36px;
    height: 36px;
    background: transparent;
    border: none;
    border-radius: 50%;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .fulltext-tts-control-btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .fulltext-tts-control-btn:disabled {
    color: rgba(255, 255, 255, 0.3);
    cursor: not-allowed;
  }

  .fulltext-tts-play-btn {
    width: 48px;
    height: 48px;
    background: #3b82f6;
    border: none;
    border-radius: 50%;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .fulltext-tts-play-btn:hover {
    background: #2563eb;
    transform: scale(1.05);
  }

  .fulltext-tts-play-btn:active {
    transform: scale(0.95);
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }
`;class Lf{constructor(){u(this,"isInitialized",!1);u(this,"isBarVisible",!1);u(this,"isCollapsed",!0);u(this,"currentState","IDLE");u(this,"settings",null);u(this,"styleElement",null);u(this,"unsubscribeStateChange",null);u(this,"isConfigured",!1)}async init(t){if(this.isInitialized)return;if(this.settings=t,this.isCollapsed=t.fullTextTTSBarCollapsed,!t.enableFullTextTTSBar){St.log("底栏未启用");return}try{const n=(await O.storage.sync.get("user_settings")).user_settings;if(n){const r=JSON.parse(n);r.fullTextTTSVoiceName||(St.log("迁移语音模型设置: 添加默认值 en-US-Standard-H"),r.fullTextTTSVoiceName="en-US-Standard-H",await O.storage.sync.set({user_settings:JSON.stringify(r)}))}}catch(s){St.warn("迁移语音模型设置失败:",s)}const e=t.fullTextTTSConfigs.find(s=>s.id===t.activeFullTextTTSConfigId);if(this.isConfigured=!!(e!=null&&e.config.apiKey),this.isConfigured||St.warn("未配置 TTS API - 底栏将显示但播放功能禁用"),this.injectStyles(),this.isConfigured&&e){const s=Oi();s.initialize(e.config),this.unsubscribeStateChange=s.onStateChange(n=>{this.currentState=n,this.updateBarUI()})}this.show(),this.isInitialized=!0,St.log("底栏管理器已初始化",this.isConfigured?"(已配置)":"(未配置，播放功能禁用)")}injectStyles(){document.getElementById("fulltext-tts-bar-styles")||(this.styleElement=document.createElement("style"),this.styleElement.id="fulltext-tts-bar-styles",this.styleElement.textContent=If,document.head.appendChild(this.styleElement))}show(){this.isBarVisible=!0,this.renderBar(),this.attachEventListeners(),St.log("底栏已显示")}hide(){this.isBarVisible=!1;const t=document.getElementById(Fi);t&&t.remove(),St.log("底栏已隐藏")}renderBar(){const t=document.getElementById(Fi);t&&t.remove();const e=document.createElement("div");e.innerHTML=Af(this.isCollapsed,this.currentState,this.isConfigured);const s=e.firstElementChild;s&&document.body.appendChild(s)}updateBarUI(){this.isBarVisible&&(this.renderBar(),this.attachEventListeners())}attachEventListeners(){const t=document.getElementById(Fi);if(!t)return;const e=t.querySelector(".fulltext-tts-expand-btn");e&&e.addEventListener("click",()=>this.expand());const s=t.querySelector('[data-action="play"]');s&&s.addEventListener("click",()=>this.handlePlay());const n=t.querySelector('[data-action="prev"]');n&&n.addEventListener("click",()=>this.handlePrev());const r=t.querySelector('[data-action="next"]');r&&r.addEventListener("click",()=>this.handleNext());const a=t.querySelector('[data-action="settings"]');a&&a.addEventListener("click",()=>this.handleSettings());const o=t.querySelector('[data-action="collapse"]');o&&o.addEventListener("click",()=>this.collapse())}async collapse(){Oi().stop(),this.isCollapsed=!0,this.updateBarUI(),await this.saveCollapsedState(!0),St.log("底栏已折叠")}async expand(){this.isCollapsed=!1,this.updateBarUI(),await this.saveCollapsedState(!1),St.log("底栏已展开")}async saveCollapsedState(t){try{const s=(await O.storage.sync.get("user_settings")).user_settings;if(s){const n=JSON.parse(s);n.fullTextTTSBarCollapsed=t,await O.storage.sync.set({user_settings:JSON.stringify(n)})}}catch(e){St.error("保存折叠状态失败:",e)}}async handlePlay(){if(!this.isConfigured){St.warn("请先配置 TTS API"),this.handleSettings();return}const t=Oi();switch(t.getState()){case"IDLE":await t.startFullTextReading();break;case"PLAYING":t.pause();break;case"PAUSED":t.resume();break}}async handlePrev(){await Oi().previousParagraph()}async handleNext(){await Oi().nextParagraph()}handleSettings(){St.log("打开TTS设置页面: open-options hash=#tts"),O.runtime.sendMessage({type:"open-options",hash:"#tts"})}destroy(){this.hide(),this.unsubscribeStateChange&&(this.unsubscribeStateChange(),this.unsubscribeStateChange=null),this.styleElement&&(this.styleElement.remove(),this.styleElement=null),Pf(),this.isInitialized=!1,St.log("底栏管理器已销毁")}}let ni=null;function kf(){return ni||(ni=new Lf),ni}function _f(){ni&&(ni.destroy(),ni=null)}const Pl={enabled:!1,apiEndpoint:"http://148.135.95.44:9001",selectCaptureMode:!0,dbClickCaptureMode:!1,singleClickCaptureMode:!1,showExplainIcon:!0,autoSpeak:!1,showEnglishDefinition:!1},ri=Ot("WordCardAPI"),gr=new Map,Al=new Map,Il=2e3;async function Nf(i,t,e="en"){const s=i.toLowerCase(),n=`${t}/api/v2/entries/${e}/${encodeURIComponent(s)}`,r=`${t}|${e}|${s}`,a=Date.now(),o=Al.get(r);if(o&&a-o.ts<=Il)return ri.log("Query deduplicated by recent cache",{word:i,normalizedWord:s,language:e,apiEndpoint:t,requestUrl:n,ttlMs:Il,ageMs:a-o.ts}),o.data;const l=gr.get(r);if(l)return ri.log("Query deduplicated by in-flight request",{word:i,normalizedWord:s,language:e,apiEndpoint:t,requestUrl:n}),l;const c=(async()=>{const d=performance.now();ri.log("Query start",{word:i,normalizedWord:s,language:e,apiEndpoint:t,requestUrl:n});const h=await Qe.get(n,{method:"GET",headers:{Accept:"application/json"}}),g=Math.round(performance.now()-d),m={etag:h.headers.get("etag")||"",cacheControl:h.headers.get("cache-control")||"",age:h.headers.get("age")||""};if(h.status===304)throw ri.warn("Query got 304 Not Modified",{requestUrl:n,status:h.status,statusText:h.statusText,durationMs:g,...m}),new Error(`API cache not modified: ${h.status}`);if(!h.ok){const C=await h.clone().text().then(L=>L.slice(0,300)).catch(()=>"");throw ri.error("Query failed",{requestUrl:n,status:h.status,statusText:h.statusText,durationMs:g,...m,bodySnippet:C}),h.status===404?new Error(`Word not found: ${i}`):new Error(`API error: ${h.status}`)}const y=await h.json();return Al.set(r,{data:y,ts:Date.now()}),ri.log("Query success",{requestUrl:n,status:h.status,durationMs:g,source:y.source,cached:y.cached,...m}),y})();gr.set(r,c);try{return await c}finally{gr.delete(r)}}function Rf(i){return!i||i.length===0?!1:/^[a-zA-Z]+(-[a-zA-Z]+)*$/.test(i.trim())}function Mf(i){if(!i)return!1;const t=i.trim();return t.length>0&&!t.includes(" ")}function As(){const i=wg.getSelectionInfo();return i?{text:i.text,rect:i.rect,isWord:i.isWord}:null}function pr(i,t,e){if(!t.enabled||!Mf(i)||!Rf(i))return!1;switch(e){case"select":return t.selectCaptureMode;case"dblclick":return t.dbClickCaptureMode;case"click":return t.singleClickCaptureMode;default:return!1}}const Is=360,fr=400,wt=10;function Ls(i){const t=window.innerWidth,e=window.innerHeight;let s=i.left+i.width/2-Is/2;s<wt&&(s=wt),s+Is>t-wt&&(s=t-Is-wt);let n=i.bottom+wt;return n+fr>e-wt&&(n=i.top-fr-wt,n<wt&&(n=i.bottom+wt)),{x:s,y:n}}function Df(i,t,e=Is,s=fr){const n=window.innerWidth,r=window.innerHeight;return{x:Math.max(wt,Math.min(i,n-e-wt)),y:Math.max(wt,Math.min(t,r-s-wt))}}const tt=i=>Un.global.t(i),at={logo:'<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>',pin:'<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>',close:'<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>',star:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>',starOutline:'<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/></svg>',volume:'<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>',chevronDown:'<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>',menu:'<svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',arrowRight:'<svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>',search:'<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>'};function Of(i,t={}){const{starred:e=!1,pinned:s=!1}=t;return`
    <div class="wxt-word-card-header">
      <div class="wxt-word-card-header-left">
        ${at.logo}
        <span class="wxt-word-card-title">${tt("wordCardUI.title")}</span>
      </div>
      <div class="wxt-word-card-header-right">
        <button class="wxt-word-card-header-btn ${s?"pinned":""}" data-action="pin" title="${tt("common.pin")}">
          ${at.pin}
        </button>
        <button class="wxt-word-card-header-btn" data-action="close" title="${tt("common.close")}">
          ${at.close}
        </button>
      </div>
    </div>

    <div class="wxt-word-card-headword">
      <span class="wxt-word-card-word">${Ht(i.word)}</span>
      <button class="wxt-word-card-star ${e?"starred":""}" data-action="star" title="${tt("common.star")}">
        ${e?at.star:at.starOutline}
      </button>
    </div>

    ${Ff(i.phonetics)}

    <div class="wxt-word-card-content">
      ${Uf(i.translations)}
      ${$f(i.definitions)}
      ${Hf(i.exchange)}
    </div>

    <div class="wxt-word-card-footer">
      <div class="wxt-word-card-footer-left">
        <button class="wxt-word-card-menu-btn" data-action="menu" title="${tt("common.more")}">
          ${at.menu}
        </button>
      </div>
      <a class="wxt-word-card-detail-link" href="${Ht(i.detailUrl)}" target="_blank" rel="noopener">
        ${tt("wordCardUI.detail")} ${at.arrowRight}
      </a>
    </div>
  `}function Ff(i){return`
    <div class="wxt-word-card-phonetics">
      <div class="wxt-word-card-phonetic">
        <button class="wxt-word-card-phonetic-btn" data-action="speak" data-accent="us" title="US">
          ${at.volume}
        </button>
        <span class="wxt-word-card-phonetic-label">US</span>
        ${i.us?`<span class="wxt-word-card-phonetic-text">/${Ht(i.us)}/</span>`:""}
      </div>

      ${i.uk?`
        <div class="wxt-word-card-phonetic">
          <button class="wxt-word-card-phonetic-btn" data-action="speak" data-accent="uk" title="UK">
            ${at.volume}
          </button>
          <span class="wxt-word-card-phonetic-label">UK</span>
          <span class="wxt-word-card-phonetic-text">/${Ht(i.uk)}/</span>
        </div>
        `:""}
    </div>
  `}function Uf(i){if(!i||i.length===0)return"";const t=i.map((e,s)=>{const n=e.pos?`<span class="wxt-word-card-definition-pos">${Ht(e.pos)}</span>`:"",r=e.meanings.join("；");return`
      <div class="wxt-word-card-definition">
        <span class="wxt-word-card-definition-num">${s+1}.</span>
        <div class="wxt-word-card-definition-content">
          ${n}
          <span class="wxt-word-card-definition-text">${Ht(r)}</span>
        </div>
      </div>
    `}).join("");return`
    <div class="wxt-word-card-dict">
      <div class="wxt-word-card-dict-header" data-action="toggle-dict">
        ${at.chevronDown}
        <span class="wxt-word-card-dict-name">${tt("wordCardUI.enZh")}</span>
      </div>
      <div class="wxt-word-card-definitions">
        ${t}
      </div>
    </div>
  `}function $f(i){if(!i||i.length===0)return"";const t=i.slice(0,4).map((e,s)=>{const n=e.partOfSpeech?`<span class="wxt-word-card-definition-pos">${Ht(e.partOfSpeech)}</span>`:"";return`
      <div class="wxt-word-card-definition">
        <span class="wxt-word-card-definition-num">${s+1}.</span>
        <div class="wxt-word-card-definition-content">
          ${n}
          <span class="wxt-word-card-definition-text">${Ht(e.definition)}</span>
        </div>
      </div>
    `}).join("");return`
    <div class="wxt-word-card-dict">
      <div class="wxt-word-card-dict-header" data-action="toggle-dict">
        ${at.chevronDown}
        <span class="wxt-word-card-dict-name">${tt("wordCardUI.enEn")}</span>
      </div>
      <div class="wxt-word-card-definitions">
        ${t}
      </div>
    </div>
  `}function Hf(i){if(!i)return"";const t=[];return i.past&&t.push({label:tt("wordCardUI.grammar.past"),value:i.past}),i.pastParticiple&&t.push({label:tt("wordCardUI.grammar.pastParticiple"),value:i.pastParticiple}),i.presentParticiple&&t.push({label:tt("wordCardUI.grammar.presentParticiple"),value:i.presentParticiple}),i.thirdPerson&&t.push({label:tt("wordCardUI.grammar.thirdPerson"),value:i.thirdPerson}),i.plural&&t.push({label:tt("wordCardUI.grammar.plural"),value:i.plural}),i.comparative&&t.push({label:tt("wordCardUI.grammar.comparative"),value:i.comparative}),i.superlative&&t.push({label:tt("wordCardUI.grammar.superlative"),value:i.superlative}),t.length===0?"":`
    <div class="wxt-word-card-exchange">
      ${t.map(s=>`
    <div class="wxt-word-card-exchange-row">
      <span class="wxt-word-card-exchange-label">${s.label}:</span>
      <span class="wxt-word-card-exchange-tag" data-action="lookup" data-word="${Ht(s.value)}">${Ht(s.value)}</span>
    </div>
  `).join("")}
    </div>
  `}function Bf(){return`
    <div class="wxt-word-card-header">
      <div class="wxt-word-card-header-left">
        ${at.logo}
        <span class="wxt-word-card-title">${tt("wordCardUI.title")}</span>
      </div>
      <div class="wxt-word-card-header-right">
        <button class="wxt-word-card-header-btn" data-action="close" title="${tt("common.close")}">
          ${at.close}
        </button>
      </div>
    </div>
    <div class="wxt-word-card-loading">
      <div class="wxt-word-card-spinner"></div>
    </div>
  `}function Wf(i){return`
    <div class="wxt-word-card-header">
      <div class="wxt-word-card-header-left">
        ${at.logo}
        <span class="wxt-word-card-title">${tt("wordCardUI.title")}</span>
      </div>
      <div class="wxt-word-card-header-right">
        <button class="wxt-word-card-header-btn" data-action="close" title="${tt("common.close")}">
          ${at.close}
        </button>
      </div>
    </div>
    <div class="wxt-word-card-error">
      <div class="wxt-word-card-error-icon">😔</div>
      <div class="wxt-word-card-error-text">${Ht(i)}</div>
    </div>
  `}function zf(){return at.search}function Ht(i){const t=document.createElement("div");return t.textContent=i,t.innerHTML}const st=Ot("WordCard"),Gf="/translate_tts",ht=class ht{constructor(){u(this,"settings",Pl);u(this,"state",{visible:!1,loading:!1,word:"",position:{x:0,y:0},pinned:!1,starred:!1,data:null,error:null});u(this,"cardElement",null);u(this,"iconElement",null);u(this,"eventListeners",[]);u(this,"isDragging",!1);u(this,"dragStartX",0);u(this,"dragStartY",0);u(this,"cardStartX",0);u(this,"cardStartY",0);u(this,"lastTriggerWord","");u(this,"lastTriggerAt",0);u(this,"lastTriggerSource","");u(this,"lastSelectionChangeShowAt",0);u(this,"currentAudioSession",null);u(this,"selectionChangeTimer",null);u(this,"handleDragMove",t=>{if(!this.isDragging||!this.cardElement)return;const e=t.clientX-this.dragStartX,s=t.clientY-this.dragStartY,n=Df(this.cardStartX+e,this.cardStartY+s);this.state.position=n,this.cardElement.style.left=`${n.x}px`,this.cardElement.style.top=`${n.y}px`});u(this,"handleDragEnd",()=>{this.isDragging=!1,document.removeEventListener("mousemove",this.handleDragMove),document.removeEventListener("mouseup",this.handleDragEnd)})}static getInstance(){return ht.instance||(ht.instance=new ht),ht.instance}init(t){this.settings={...Pl,...t},st.log("Initialized with settings:",this.settings),this.settings.enabled?this.setupEventListeners():st.log("WordCard is disabled in init")}updateSettings(t){const e=this.settings.enabled;this.settings={...this.settings,...t},!e&&this.settings.enabled?this.setupEventListeners():e&&!this.settings.enabled&&(this.removeEventListeners(),this.hideCard(),this.hideIcon())}setupEventListeners(){st.log("Setting up event listeners",{selectCaptureMode:this.settings.selectCaptureMode,dbClickCaptureMode:this.settings.dbClickCaptureMode}),this.settings.selectCaptureMode&&(this.addListener(document,"mouseup",this.handleMouseUp.bind(this)),this.addListener(document,"touchend",this.handleTouchEnd.bind(this)),this.addListener(document,"selectionchange",this.handleSelectionChange.bind(this))),this.settings.dbClickCaptureMode&&this.addListener(document,"dblclick",this.handleDblClick.bind(this)),this.settings.singleClickCaptureMode&&this.addListener(document,"click",this.handleClick.bind(this)),this.addListener(document,"mousedown",this.handleDocumentMouseDown.bind(this)),this.addListener(document,"touchstart",this.handleDocumentMouseDown.bind(this)),this.addListener(document,"keydown",this.handleKeyDown.bind(this)),st.log("Event listeners set up successfully")}addListener(t,e,s){t.addEventListener(e,s),this.eventListeners.push({element:t,type:e,handler:s})}removeEventListeners(){for(const{element:t,type:e,handler:s}of this.eventListeners)t.removeEventListener(e,s);this.eventListeners=[]}handleMouseUp(t){var e,s;(e=this.cardElement)!=null&&e.contains(t.target)||(s=this.iconElement)!=null&&s.contains(t.target)||setTimeout(()=>{const n=As();if(st.log("MouseUp selection check:",n),!n||!n.isWord||!n.rect){st.log("Selection invalid or not a word",{info:n});return}const r=pr(n.text,this.settings,"select");if(st.log(`Should show card for "${n.text}"? ${r}`,{mode:"select",settings:this.settings}),r)if(this.settings.showExplainIcon)this.showIcon(n.text,{x:n.rect.right+5,y:n.rect.top+n.rect.height/2-14});else{const a=Ls(n.rect);this.showCard(n.text,a)}},10)}handleTouchEnd(t){var e,s;(e=this.cardElement)!=null&&e.contains(t.target)||(s=this.iconElement)!=null&&s.contains(t.target)||setTimeout(()=>{this.checkAndShowCard("touchend")},300)}handleSelectionChange(){this.selectionChangeTimer&&clearTimeout(this.selectionChangeTimer),this.selectionChangeTimer=setTimeout(()=>{this.selectionChangeTimer=null,this.checkAndShowCard("selectionchange")},500)}checkAndShowCard(t){const e=As();if(st.log(`${t} selection check:`,e),!e||!e.isWord||!e.rect){st.log(`${t}: Selection invalid or not a word`,{info:e});return}const s=pr(e.text,this.settings,"select");if(st.log(`${t}: Should show card for "${e.text}"? ${s}`),s){const n=e.text.toLowerCase(),r=Date.now(),a=n===this.lastTriggerWord&&r-this.lastTriggerAt<=ht.TRIGGER_DEDUP_WINDOW_MS;if(t==="touchend"&&r-this.lastSelectionChangeShowAt<=ht.TOUCHEND_SUPPRESS_WINDOW_MS){st.log("touchend skipped due to recent selectionchange trigger",{word:e.text,suppressWindowMs:ht.TOUCHEND_SUPPRESS_WINDOW_MS,sinceSelectionChangeMs:r-this.lastSelectionChangeShowAt});return}if(a){st.log("duplicate trigger skipped",{word:e.text,currentSource:t,lastSource:this.lastTriggerSource,dedupWindowMs:ht.TRIGGER_DEDUP_WINDOW_MS,elapsedMs:r-this.lastTriggerAt});return}if(this.lastTriggerWord=n,this.lastTriggerAt=r,this.lastTriggerSource=t,t==="selectionchange"&&(this.lastSelectionChangeShowAt=r),this.settings.showExplainIcon)this.showIcon(e.text,{x:e.rect.right+5,y:e.rect.top+e.rect.height/2-14});else{const o=Ls(e.rect);this.showCard(e.text,o)}}}handleDblClick(t){const e=As();if(st.log("DblClick selection check:",e),!e||!e.isWord||!e.rect)return;const s=pr(e.text,this.settings,"dblclick");if(st.log(`Should show card (dblclick) for "${e.text}"? ${s}`),s){const n=Ls(e.rect);this.showCard(e.text,n)}}handleClick(t){}handleDocumentMouseDown(t){var e;if(!this.state.pinned){if(this.cardElement&&this.state.visible&&!this.cardElement.contains(t.target)){if((e=this.iconElement)!=null&&e.contains(t.target))return;this.hideCard()}this.iconElement&&!this.iconElement.contains(t.target)&&this.hideIcon()}}handleKeyDown(t){t.key==="Escape"&&this.state.visible&&(this.hideCard(),this.hideIcon())}showIcon(t,e){this.hideIcon(),this.iconElement=document.createElement("div"),this.iconElement.className="wxt-word-card-icon",this.iconElement.innerHTML=zf(),this.iconElement.style.left=`${e.x}px`,this.iconElement.style.top=`${e.y}px`,this.iconElement.addEventListener("click",s=>{s.stopPropagation();const n=As(),r=(n==null?void 0:n.rect)||{left:e.x,right:e.x+28,top:e.y,bottom:e.y+28,width:28};this.hideIcon(),this.showCard(t,Ls(r))}),document.body.appendChild(this.iconElement)}hideIcon(){this.iconElement&&(this.iconElement.remove(),this.iconElement=null)}async showCard(t,e){st.log(`Showing card for: ${t}`,{position:e}),st.log("WordCard query request",{word:t,apiEndpoint:this.settings.apiEndpoint}),this.state={...this.state,visible:!0,loading:!0,word:t,position:e,data:null,error:null},this.renderCard();try{const s=await Nf(t,this.settings.apiEndpoint);this.state={...this.state,loading:!1,data:s},this.renderCard(),this.settings.autoSpeak&&s.word&&this.speakWord(s.word,"us")}catch(s){st.error("Query failed",{word:t,apiEndpoint:this.settings.apiEndpoint,error:s instanceof Error?{name:s.name,message:s.message,stack:s.stack}:String(s)}),this.state={...this.state,loading:!1,error:s.message||"Failed to load"},this.renderCard()}}hideCard(){this.cardElement&&(this.cardElement.remove(),this.cardElement=null),this.state={...this.state,visible:!1,pinned:!1}}renderCard(){this.cardElement||(this.cardElement=document.createElement("div"),this.cardElement.className="wxt-word-card",document.body.appendChild(this.cardElement),this.setupCardEvents()),this.cardElement.style.left=`${this.state.position.x}px`,this.cardElement.style.top=`${this.state.position.y}px`,this.state.loading?this.cardElement.innerHTML=Bf():this.state.error?this.cardElement.innerHTML=Wf(this.state.error):this.state.data&&(this.cardElement.innerHTML=Of(this.state.data,{starred:this.state.starred,pinned:this.state.pinned}))}setupCardEvents(){if(!this.cardElement)return;this.cardElement.addEventListener("click",e=>{var a;const n=e.target.closest("[data-action]");if(!n)return;switch(n.dataset.action){case"close":this.hideCard();break;case"pin":this.togglePin();break;case"star":this.toggleStar();break;case"speak":const o=n.dataset.accent;(a=this.state.data)!=null&&a.word&&this.speakWord(this.state.data.word,o);break;case"lookup":const l=n.dataset.word;l&&this.showCard(l,this.state.position);break;case"menu":break;case"toggle-dict":n.classList.toggle("collapsed");break}});const t=this.cardElement.querySelector(".wxt-word-card-header");t&&t.addEventListener("mousedown",this.handleDragStart.bind(this))}handleDragStart(t){t.target.closest("button")||(this.isDragging=!0,this.dragStartX=t.clientX,this.dragStartY=t.clientY,this.cardStartX=this.state.position.x,this.cardStartY=this.state.position.y,document.addEventListener("mousemove",this.handleDragMove),document.addEventListener("mouseup",this.handleDragEnd))}togglePin(){this.state.pinned=!this.state.pinned,this.renderCard()}toggleStar(){this.state.starred=!this.state.starred,this.renderCard()}async speakWord(t,e){var o,l;U.stop(this.currentAudioSession),this.currentAudioSession=null;const s=(l=(o=this.state.data)==null?void 0:o.audio)==null?void 0:l[e];if(s&&s.trim()!=="")try{const c=await U.playUrl(s);this.currentAudioSession=c;return}catch{}const n=e==="us"?"en-US":"en-GB",r=new URLSearchParams({ie:"UTF-8",client:"gtx",tl:n,q:t}),a=`${Gf}?${r.toString()}`;try{const c=await Qe.get(a);if(!c.ok)throw new Error(`HTTP ${c.status}`);const d=await c.blob();if(d.size>0){const h=await U.playBlob(d);this.currentAudioSession=h}else this.speakWordFallback(t,e)}catch{this.speakWordFallback(t,e)}}speakWordFallback(t,e){Ye.speak({text:t,lang:e==="us"?"en-US":"en-GB",rate:.9})}destroy(){U.stop(this.currentAudioSession),this.currentAudioSession=null,this.removeEventListeners(),this.hideCard(),this.hideIcon(),ht.instance=null}};u(ht,"instance",null),u(ht,"TRIGGER_DEDUP_WINDOW_MS",900),u(ht,"TOUCHEND_SUPPRESS_WINDOW_MS",1200);let ks=ht;const q=Ot("ContentManager");class jf{constructor(t,e,s){u(this,"isTranslationVisible",!0);u(this,"processingService");u(this,"paragraphTranslationService");u(this,"floatingBallManager");u(this,"HIDDEN_CLASS","wxt-translation-hidden");u(this,"TRANSLATION_SELECTOR",".wxt-translation-term");this.processingService=t,this.floatingBallManager=e,this.paragraphTranslationService=s}async toggleTranslationState(){this.hasTranslatedContent()?this.toggleVisibilityState():await this.executeTranslation(),this.syncFloatingBallState()}async executeTranslation(){(await(await Promise.resolve().then(()=>qo)).StorageService.getInstance().getUserSettings()).translationMode===Bi.PARAGRAPH?this.paragraphTranslationService&&await this.paragraphTranslationService.start():this.processingService&&await this.processingService.processPage(),this.isTranslationVisible=!0,document.body.classList.remove(this.HIDDEN_CLASS)}toggleVisibilityState(){this.isTranslationVisible=!this.isTranslationVisible,this.isTranslationVisible?document.body.classList.remove(this.HIDDEN_CLASS):document.body.classList.add(this.HIDDEN_CLASS)}syncFloatingBallState(){var t;(t=this.floatingBallManager)!=null&&t.updateTranslationStateIndicator&&this.floatingBallManager.updateTranslationStateIndicator()}hasTranslatedContent(){const t=document.querySelector(this.TRANSLATION_SELECTOR)!==null,e=document.querySelector(".illa-paragraph-translation")!==null;return t||e}getTranslationVisibility(){return this.isTranslationVisible}clearAllTranslations(){try{this.paragraphTranslationService&&this.paragraphTranslationService.clearAllTranslations()}catch(t){console.error("[ContentManager] 清除翻译失败:",t)}}reset(){document.querySelectorAll(this.TRANSLATION_SELECTOR).forEach(s=>s.remove()),document.querySelectorAll(".illa-paragraph-translation").forEach(s=>s.remove()),this.clearAllTranslations(),this.isTranslationVisible=!0,document.body.classList.remove(this.HIDDEN_CLASS),this.syncFloatingBallState()}updateProcessingService(t){this.processingService=t}updateFloatingBallManager(t){this.floatingBallManager=t}}class Vf{constructor(){u(this,"configurationService");u(this,"processingService");u(this,"listenerService");u(this,"services");u(this,"settings");u(this,"paragraphTTSService");u(this,"swipeTranslationService");u(this,"translationStateManager");u(this,"detectedPageLanguage");u(this,"finalTargetLanguage");u(this,"paragraphService",Ri.getInstance());u(this,"wordCardManager");u(this,"userFeedback");this.configurationService=new yp,this.userFeedback=Es.getInstance()}async init(){try{q.log("ContentManager init started",{url:window.location.href});const t=await this.checkWebsiteStatus();if(t==="blacklisted"){q.warn("Website is blacklisted, skipping initialization");return}if(ih(),await this.validateConfiguration(),this.settings=await this.configurationService.getUserSettings(),this.settings.floatingBall={...$s,...this.settings.floatingBall||{}},q.log("Settings loaded",{isEnabled:this.settings.isEnabled,triggerMode:this.settings.triggerMode,floatingBallEnabled:this.settings.floatingBall.enabled}),!this.settings.isEnabled){q.warn("Extension disabled by settings, skipping initialization");return}await this.handleLanguageDetection(),await this.initializeServices(),this.applyInitialConfiguration(),await this.initializeFloatingBall(),this.setupListeners(),await this.handleInitialProcessing(t),q.log("ContentManager init completed")}catch(t){throw q.error("ContentManager initialization failed",{error:t instanceof Error?t.message:String(t)}),t}}destroy(){var t,e,s,n,r,a;try{(t=this.listenerService)==null||t.destroy(),(s=(e=this.services)==null?void 0:e.lazyLoadingService)==null||s.destroy(),(n=this.paragraphTTSService)==null||n.destroy(),(r=this.swipeTranslationService)==null||r.destroy(),(a=this.wordCardManager)==null||a.destroy(),zp(),_f()}catch(o){console.error("[ContentManager] 销毁服务时出错:",o)}}updateSettings(t){var e;this.settings=t,(e=this.processingService)==null||e.updateSettings(t),this.services&&this.configurationService.updateConfiguration(t,this.services.styleManager,this.services.textReplacer),this.updateRuntimeFeatureServices(t)}updateRuntimeFeatureServices(t){var s,n,r,a;this.wordCardManager&&t.wordCard?(q.log("Updating WordCard settings",t.wordCard),this.wordCardManager.updateSettings(t.wordCard)):t.wordCard?(q.log("WordCard enabled in settings update, initializing",t.wordCard),this.wordCardManager=ks.getInstance(),this.wordCardManager.init(t.wordCard)):q.log("WordCard settings missing or manager missing",{hasManager:!!this.wordCardManager,hasSettings:!!t.wordCard});const e={leftSwipe:!!((s=t.gestureTranslation)!=null&&s.leftSwipe),rightSwipe:!!((n=t.gestureTranslation)!=null&&n.rightSwipe),nativeLanguage:t.multilingualConfig.nativeLanguage};(r=this.swipeTranslationService)==null||r.updateSettings(e),this.paragraphTTSService&&(((a=t.paragraphTTS)==null?void 0:a.enabled)??!0?this.paragraphTTSService.enable():this.paragraphTTSService.disable())}async checkWebsiteStatus(){return await new vp().getWebsiteStatus(window.location.href)}async validateConfiguration(){try{await O.runtime.sendMessage({type:"validate-configuration",source:"page_load"})||q.warn("Configuration validation failed on page load")}catch(t){q.warn("Configuration validation request failed, continuing init",{error:t instanceof Error?t.message:String(t)})}}async handleLanguageDetection(){this.settings&&(this.detectedPageLanguage=await Cp(),this.finalTargetLanguage=this.determineFinalTargetLanguage())}determineFinalTargetLanguage(){var r;if(!this.settings||!this.detectedPageLanguage)return((r=this.settings)==null?void 0:r.multilingualConfig.targetLanguage)||"en";const t=this.settings.multilingualConfig,e=me.normalizeLanguageCode(this.detectedPageLanguage),s=me.normalizeLanguageCode(t.targetLanguage),n=me.normalizeLanguageCode(t.nativeLanguage);return e===s?t.nativeLanguage:t.targetLanguage}async initializeServices(){var c,d,h;if(!this.settings)throw new Error("Settings not loaded");const t=new Hn,e=this.configurationService.getActiveApiConfig(this.settings),s=Jn.getInstance({enablePronunciationTooltip:this.settings.enablePronunciationTooltip,apiConfig:e==null?void 0:e.config}),n=this.createOptimizedSettings(),r=tr.getInstance(this.configurationService.createReplacementConfig(n)),a=this.initializeLazyLoading(this.settings),o=Ri.getInstance(a),l=new bp(this.settings.floatingBall);this.services={styleManager:t,textProcessor:s,textReplacer:r,floatingBallManager:l,lazyLoadingService:a,paragraphTranslationService:o},this.processingService=new Tp(s,r,n,a),this.translationStateManager=new jf(this.processingService,this.services.floatingBallManager,this.services.paragraphTranslationService),this.listenerService=new Pp(n,this.processingService,this.configurationService,t,r,l,this.translationStateManager,g=>this.updateRuntimeFeatureServices(g));try{this.paragraphTTSService=new Op({showDebugPanel:this.settings.showDebugPanel??!1,enabled:((c=this.settings.paragraphTTS)==null?void 0:c.enabled)??!0}),this.paragraphTTSService.enable()}catch(g){q.error("ParagraphTTS init failed",{error:g instanceof Error?g.message:String(g)})}try{this.swipeTranslationService=new Hp,this.swipeTranslationService.updateSettings({leftSwipe:!!((d=this.settings.gestureTranslation)!=null&&d.leftSwipe),rightSwipe:!!((h=this.settings.gestureTranslation)!=null&&h.rightSwipe),nativeLanguage:this.settings.multilingualConfig.nativeLanguage}),q.log("Swipe translation service initialized")}catch(g){q.error("Swipe translation service init failed",{error:g instanceof Error?g.message:String(g)})}try{await kf().init(n)}catch(g){q.error("Full text TTS bar init failed",{error:g instanceof Error?g.message:String(g)})}try{this.settings.wordCard?(this.wordCardManager=ks.getInstance(),this.wordCardManager.init(this.settings.wordCard),q.log("WordCard initialized",this.settings.wordCard)):q.log("WordCard settings missing in init")}catch(g){q.error("WordCard init failed",{error:g instanceof Error?g.message:String(g)})}}createOptimizedSettings(){return!this.settings||!this.finalTargetLanguage?this.settings:{...this.settings,multilingualConfig:{...this.settings.multilingualConfig,targetLanguage:this.finalTargetLanguage}}}applyInitialConfiguration(){!this.settings||!this.services||this.configurationService.updateConfiguration(this.settings,this.services.styleManager,this.services.textReplacer)}async initializeFloatingBall(){var t;!((t=this.services)!=null&&t.floatingBallManager)||!this.translationStateManager||(await this.services.floatingBallManager.init(async()=>{try{await O.runtime.sendMessage({type:"validate-configuration",source:"user_action"})||q.warn("User action config validation failed, continue for guest/manual mode")}catch(e){q.warn("User action config validation request failed",{error:e instanceof Error?e.message:String(e)})}if(this.translationStateManager)try{await this.translationStateManager.toggleTranslationState()}catch(e){this.userFeedback.showActionError("floating-ball-toggle-translation",e),q.error("Toggle translation state failed from floating ball",{error:e instanceof Error?e.message:String(e)})}}),q.log("Floating ball initialized"))}setupListeners(){var t,e;(t=this.listenerService)==null||t.setupMessageListeners(),(e=this.listenerService)==null||e.setupDomObserver(),this.setupSPANavigationDetection()}setupSPANavigationDetection(){const t=Wp();t.start(),t.onNavigate((e,s)=>{var n;(n=this.translationStateManager)==null||n.reset()})}async handleInitialProcessing(t){if(!(!this.settings||!this.processingService)&&(t==="whitelisted"||this.settings.triggerMode===ui.AUTOMATIC))try{this.settings.translationMode===Bi.PARAGRAPH?await this.paragraphService.start():await this.processingService.processPage()}catch(e){console.error("[ContentManager] 初始页面处理失败:",e)}}initializeLazyLoading(t){if(!t.lazyLoading||!t.lazyLoading.enabled)return;const e=new Ip(t.lazyLoading);return e.initialize(),e.setProcessingCallback(async s=>{this.processingService&&await this.processingService.processSegmentsLazy(s)}),e}}const qf={matches:["<all_urls>"],async main(){const i=new Vf;try{await i.init()}catch(t){console.error("[Content Script] 初始化失败:",t),i.destroy()}window.addEventListener("beforeunload",()=>{i.destroy()})}};function _s(i,...t){}const Yf={debug:(...i)=>_s(console.debug,...i),log:(...i)=>_s(console.log,...i),warn:(...i)=>_s(console.warn,...i),error:(...i)=>_s(console.error,...i)},Rs=class Rs extends Event{constructor(t,e){super(Rs.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=e}};u(Rs,"EVENT_NAME",br("wxt:locationchange"));let mr=Rs;function br(i){var t;return`${(t=O==null?void 0:O.runtime)==null?void 0:t.id}:content:${i}`}function Kf(i){let t,e;return{run(){t==null&&(e=new URL(location.href),t=i.setInterval(()=>{let s=new URL(location.href);s.href!==e.href&&(window.dispatchEvent(new mr(s,e)),e=s)},1e3))}}}const Ui=class Ui{constructor(t,e){u(this,"isTopFrame",window.self===window.top);u(this,"abortController");u(this,"locationWatcher",Kf(this));u(this,"receivedMessageIds",new Set);this.contentScriptName=t,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return O.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,e){const s=setInterval(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,e){const s=setTimeout(()=>{this.isValid&&t()},e);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const e=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(t,e){const s=requestIdleCallback((...n)=>{this.signal.aborted||t(...n)},e);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,e,s,n){var r;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(r=t.addEventListener)==null||r.call(t,e.startsWith("wxt:")?br(e):e,s,{...n,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Yf.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:Ui.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){var r,a,o;const e=((r=t.data)==null?void 0:r.type)===Ui.SCRIPT_STARTED_MESSAGE_TYPE,s=((a=t.data)==null?void 0:a.contentScriptName)===this.contentScriptName,n=!this.receivedMessageIds.has((o=t.data)==null?void 0:o.messageId);return e&&s&&n}listenForNewerScripts(t){let e=!0;const s=n=>{if(this.verifyScriptStartedEvent(n)){this.receivedMessageIds.add(n.data.messageId);const r=e;if(e=!1,r&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}};u(Ui,"SCRIPT_STARTED_MESSAGE_TYPE",br("wxt:content-script-started"));let Sr=Ui;function nm(){}function Ns(i,...t){}const Jf={debug:(...i)=>Ns(console.debug,...i),log:(...i)=>Ns(console.log,...i),warn:(...i)=>Ns(console.warn,...i),error:(...i)=>Ns(console.error,...i)};return(async()=>{try{const{main:i,...t}=qf,e=new Sr("content",t);return await i(e)}catch(i){throw Jf.error('The content script "content" crashed on startup!',i),i}})()}();
content;
